{"version":3,"file":"lib_index_js.95d04bd98b689d66970e.js","mappings":"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","sources":["webpack://@elyra/metadata-extension/./src/index.ts"],"sourcesContent":["/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { MetadataWidget, MetadataEditorWidget } from '@elyra/metadata-common';\r\nimport { MetadataService } from '@elyra/services';\r\n\r\nimport {\r\n  RequestErrors,\r\n  PasswordField,\r\n  CodeBlock,\r\n  TagsField,\r\n  DropDown,\r\n  IErrorResponse\r\n} from '@elyra/ui-components';\r\nimport {\r\n  JupyterFrontEnd,\r\n  JupyterFrontEndPlugin,\r\n  ILabStatus\r\n} from '@jupyterlab/application';\r\nimport { ICommandPalette, MainAreaWidget } from '@jupyterlab/apputils';\r\nimport { IEditorServices } from '@jupyterlab/codeeditor';\r\nimport { ITranslator } from '@jupyterlab/translation';\r\nimport {\r\n  textEditorIcon,\r\n  LabIcon,\r\n  IFormRendererRegistry\r\n} from '@jupyterlab/ui-components';\r\n\r\nimport { find } from '@lumino/algorithm';\r\nimport { Widget } from '@lumino/widgets';\r\n\r\nconst METADATA_EDITOR_ID = 'elyra-metadata-editor';\r\nconst METADATA_WIDGET_ID = 'elyra-metadata';\r\nconst METADATA_EXTENSION_ID = '@elyra/metadata-extension';\r\n\r\nconst commandIDs = {\r\n  openMetadata: 'elyra-metadata:open',\r\n  closeTabCommand: 'elyra-metadata:close'\r\n};\r\n\r\ninterface IOpenMetadataWidgetArgs {\r\n  display_name: string;\r\n  schemaspace: string;\r\n  icon: string;\r\n  addLabel?: string;\r\n}\r\n\r\ninterface IOpenMetadataEditorArgs {\r\n  schema: string;\r\n  schemaspace: string;\r\n  name?: string;\r\n  onSave: () => void;\r\n  titleContext?: string;\r\n}\r\n\r\n/**\r\n * Initialization data for the metadata-extension extension.\r\n */\r\nconst extension: JupyterFrontEndPlugin<void> = {\r\n  id: METADATA_WIDGET_ID,\r\n  autoStart: true,\r\n  requires: [\r\n    ICommandPalette,\r\n    IEditorServices,\r\n    ILabStatus,\r\n    IFormRendererRegistry,\r\n    ITranslator\r\n  ],\r\n  activate: async (\r\n    app: JupyterFrontEnd,\r\n    palette: ICommandPalette,\r\n    editorServices: IEditorServices,\r\n    status: ILabStatus,\r\n    componentRegistry: IFormRendererRegistry,\r\n    translator: ITranslator\r\n  ) => {\r\n    console.log('Elyra - metadata extension is activated!');\r\n\r\n    componentRegistry.addRenderer(`${METADATA_EXTENSION_ID}:plugin.code`, {\r\n      fieldRenderer: (props) => {\r\n        return CodeBlock(props);\r\n      }\r\n    });\r\n    componentRegistry.addRenderer(`${METADATA_EXTENSION_ID}:plugin.tags`, {\r\n      fieldRenderer: (props) => {\r\n        return TagsField(props);\r\n      }\r\n    });\r\n    componentRegistry.addRenderer(`${METADATA_EXTENSION_ID}:plugin.dropdown`, {\r\n      fieldRenderer: (props) => {\r\n        return DropDown(props);\r\n      }\r\n    });\r\n    componentRegistry.addRenderer(`${METADATA_EXTENSION_ID}:plugin.password`, {\r\n      fieldRenderer: (props) => {\r\n        return PasswordField(props);\r\n      }\r\n    });\r\n\r\n    const openMetadataEditor = (args: IOpenMetadataEditorArgs): void => {\r\n      let widgetLabel: string;\r\n      if (args.name) {\r\n        widgetLabel = args.name;\r\n      } else {\r\n        widgetLabel = `New ${args.schema}`;\r\n      }\r\n      const widgetId = `${METADATA_EDITOR_ID}:${args.schemaspace}:${\r\n        args.schema\r\n      }:${args.name ? args.name : 'new'}`;\r\n      const openWidget = find(app.shell.widgets('main'), (widget: Widget) => {\r\n        return widget.id === widgetId;\r\n      });\r\n      if (openWidget) {\r\n        app.shell.activateById(widgetId);\r\n        return;\r\n      }\r\n\r\n      const metadataEditorWidget = new MetadataEditorWidget({\r\n        ...args,\r\n        schemaName: args.schema,\r\n        editorServices,\r\n        status,\r\n        translator: translator.load('jupyterlab'),\r\n        componentRegistry\r\n      });\r\n      const main = new MainAreaWidget({ content: metadataEditorWidget });\r\n      main.title.label = widgetLabel;\r\n      main.id = widgetId;\r\n      main.title.closable = true;\r\n      main.title.icon = textEditorIcon;\r\n      metadataEditorWidget.addClass(METADATA_EDITOR_ID);\r\n      app.shell.add(main, 'main');\r\n    };\r\n\r\n    app.commands.addCommand(`${METADATA_EDITOR_ID}:open`, {\r\n      label: (args) => {\r\n        return `New ${args.title} ${\r\n          args.appendToTitle ? args.titleContext : ''\r\n        }`;\r\n      },\r\n      execute: (args) => {\r\n        openMetadataEditor(args as unknown as IOpenMetadataEditorArgs);\r\n      }\r\n    });\r\n\r\n    const openMetadataWidget = (args: IOpenMetadataWidgetArgs): void => {\r\n      const labIcon = LabIcon.resolve({ icon: args.icon });\r\n      const widgetId = `${METADATA_WIDGET_ID}:${args.schemaspace}`;\r\n      const metadataWidget = new MetadataWidget({\r\n        app,\r\n        display_name: args.display_name,\r\n        schemaspace: args.schemaspace,\r\n        icon: labIcon,\r\n        addLabel: args.addLabel\r\n      });\r\n      metadataWidget.id = widgetId;\r\n      metadataWidget.title.icon = labIcon;\r\n      metadataWidget.title.caption = args.display_name;\r\n\r\n      if (\r\n        find(app.shell.widgets('left'), (value) => value.id === widgetId) ===\r\n        undefined\r\n      ) {\r\n        app.shell.add(metadataWidget, 'left', { rank: 1000 });\r\n      }\r\n      app.shell.activateById(widgetId);\r\n    };\r\n\r\n    const openMetadataCommand: string = commandIDs.openMetadata;\r\n    app.commands.addCommand(openMetadataCommand, {\r\n      label: (args) => args.label as string,\r\n      execute: (args) => {\r\n        // Rank has been chosen somewhat arbitrarily to give priority\r\n        // to the running sessions widget in the sidebar.\r\n        openMetadataWidget(args as unknown as IOpenMetadataWidgetArgs);\r\n      }\r\n    });\r\n\r\n    // Add command to close metadata tab\r\n    const closeTabCommand: string = commandIDs.closeTabCommand;\r\n    app.commands.addCommand(closeTabCommand, {\r\n      label: 'Close Tab',\r\n      execute: (_args) => {\r\n        const contextNode: HTMLElement | undefined = app.contextMenuHitTest(\r\n          (node) => !!node.dataset.id\r\n        );\r\n        if (contextNode) {\r\n          const id = contextNode.dataset['id']!;\r\n          const widget = find(\r\n            app.shell.widgets('left'),\r\n            (widget: Widget, _index: number) => {\r\n              return widget.id === id;\r\n            }\r\n          );\r\n          if (widget) {\r\n            widget.dispose();\r\n          }\r\n        }\r\n      }\r\n    });\r\n    app.contextMenu.addItem({\r\n      selector:\r\n        '[data-id^=\"elyra-metadata:\"]:not([data-id$=\"code-snippets\"]):not([data-id$=\"runtimes\"])',\r\n      command: closeTabCommand\r\n    });\r\n\r\n    try {\r\n      const schemas = await MetadataService.getAllSchema();\r\n\r\n      if (!schemas) {\r\n        throw new Error('Failed to retrieve metadata schemas');\r\n      }\r\n\r\n      for (const schema of schemas) {\r\n        let icon = 'ui-components:text-editor';\r\n        let title = schema.title;\r\n        if (schema.uihints) {\r\n          if (schema.uihints.icon) {\r\n            icon = schema.uihints.icon;\r\n          }\r\n          if (schema.uihints.title) {\r\n            title = schema.uihints.title;\r\n          }\r\n        }\r\n        palette.addItem({\r\n          command: commandIDs.openMetadata,\r\n          args: {\r\n            label: `Manage ${title}`,\r\n            display_name: schema.uihints?.title ?? '',\r\n            schemaspace: schema.schemaspace,\r\n            icon: icon\r\n          },\r\n          category: 'Elyra'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      await RequestErrors.serverError(error as IErrorResponse);\r\n    }\r\n  }\r\n};\r\n\r\nexport default extension;\r\n"],"names":[],"sourceRoot":""}