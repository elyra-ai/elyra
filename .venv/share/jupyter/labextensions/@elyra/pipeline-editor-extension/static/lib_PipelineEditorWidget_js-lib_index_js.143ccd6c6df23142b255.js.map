{"version":3,"file":"lib_PipelineEditorWidget_js-lib_index_js.143ccd6c6df23142b255.js","mappings":"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","sources":["webpack://@elyra/pipeline-editor-extension/./src/ComponentCatalogsWidget.tsx","webpack://@elyra/pipeline-editor-extension/./src/EmptyPipelineContent.tsx","webpack://@elyra/pipeline-editor-extension/./src/FileSubmissionDialog.tsx","webpack://@elyra/pipeline-editor-extension/./src/ParameterInputForm.tsx","webpack://@elyra/pipeline-editor-extension/./src/PipelineEditorWidget.tsx","webpack://@elyra/pipeline-editor-extension/./src/PipelineExportDialog.tsx","webpack://@elyra/pipeline-editor-extension/./src/PipelineService.tsx","webpack://@elyra/pipeline-editor-extension/./src/PipelineSubmissionDialog.tsx","webpack://@elyra/pipeline-editor-extension/./src/RuntimeConfigSelect.tsx","webpack://@elyra/pipeline-editor-extension/./src/RuntimeImagesWidget.tsx","webpack://@elyra/pipeline-editor-extension/./src/RuntimesWidget.tsx","webpack://@elyra/pipeline-editor-extension/./src/SubmitFileButtonExtension.tsx","webpack://@elyra/pipeline-editor-extension/./src/formDialogWidget.ts","webpack://@elyra/pipeline-editor-extension/./src/index.ts","webpack://@elyra/pipeline-editor-extension/./src/pipeline-hooks.ts","webpack://@elyra/pipeline-editor-extension/./src/runtime-utils.ts","webpack://@elyra/pipeline-editor-extension/./src/theme.tsx","webpack://@elyra/pipeline-editor-extension/./src/utils.ts"],"sourcesContent":["/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {\r\n  MetadataWidget,\r\n  IMetadataWidgetProps,\r\n  MetadataDisplay,\r\n  IMetadataDisplayProps,\r\n  IMetadataActionButton\r\n} from '@elyra/metadata-common';\r\nimport { IMetadataResource, MetadataService } from '@elyra/services';\r\nimport {\r\n  GenericObjectType,\r\n  IErrorResponse,\r\n  RequestErrors\r\n} from '@elyra/ui-components';\r\nimport { JupyterFrontEnd } from '@jupyterlab/application';\r\nimport { LabIcon, refreshIcon } from '@jupyterlab/ui-components';\r\n\r\nimport React from 'react';\r\n\r\nimport { IRuntimeType, PipelineService } from './PipelineService';\r\n\r\nexport const COMPONENT_CATALOGS_SCHEMASPACE = 'component-catalogs';\r\n\r\nconst COMPONENT_CATALOGS_CLASS = 'elyra-metadata-component-catalogs';\r\n\r\n/**\r\n * A React Component for displaying the component catalogs list.\r\n */\r\nclass ComponentCatalogsDisplay extends MetadataDisplay<IMetadataDisplayProps> {\r\n  actionButtons(metadata: IMetadataResource): IMetadataActionButton[] {\r\n    return [\r\n      {\r\n        title: 'Reload components from catalog',\r\n        icon: refreshIcon,\r\n        onClick: (): void => {\r\n          PipelineService.refreshComponentsCache(metadata.name)\r\n            .then((): void => {\r\n              this.props.updateMetadata();\r\n            })\r\n            .catch((error) =>\r\n              console.error(\r\n                'An error occurred while refreshing components from catalog:',\r\n                error\r\n              )\r\n            );\r\n        }\r\n      },\r\n      ...super.actionButtons(metadata)\r\n    ];\r\n  }\r\n\r\n  //render catalog entries\r\n  renderExpandableContent(metadata: IMetadataResource): JSX.Element {\r\n    let category_output = [<li key=\"No category\">No category</li>];\r\n    if (metadata.metadata.categories) {\r\n      category_output = (metadata.metadata.categories as string[]).map(\r\n        (category) => <li key={category}>{category}</li>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <h6>Runtime Type</h6>\r\n        {metadata.metadata.runtime_type as string}\r\n        <br />\r\n        <br />\r\n        <h6>Description</h6>\r\n        {(metadata.metadata.description as string) ?? 'No description'}\r\n        <br />\r\n        <br />\r\n        <h6>Categories</h6>\r\n        <ul>{category_output}</ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Allow for filtering by display_name, name, and description\r\n  matchesSearch(searchValue: string, metadata: IMetadataResource): boolean {\r\n    searchValue = searchValue.toLowerCase();\r\n    // True if search string is in name or display_name,\r\n    // or if the search string is empty\r\n    const description = (\r\n      (metadata.metadata.description as string) || ''\r\n    ).toLowerCase();\r\n    return (\r\n      metadata.name.toLowerCase().includes(searchValue) ||\r\n      metadata.display_name.toLowerCase().includes(searchValue) ||\r\n      description.includes(searchValue)\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * ComponentCatalogsWidget props.\r\n */\r\nexport interface IComponentCatalogsWidgetProps extends IMetadataWidgetProps {\r\n  app: JupyterFrontEnd;\r\n  display_name: string;\r\n  schemaspace: string;\r\n  icon: LabIcon;\r\n  titleContext?: string;\r\n  appendToTitle?: boolean;\r\n  refreshCallback?: () => void;\r\n}\r\n\r\n/**\r\n * A widget for displaying component catalogs.\r\n */\r\nexport class ComponentCatalogsWidget extends MetadataWidget {\r\n  refreshButtonTooltip: string;\r\n  refreshCallback?: () => void;\r\n  runtimeTypes: IRuntimeType[] = [];\r\n\r\n  constructor(props: IComponentCatalogsWidgetProps) {\r\n    super(props);\r\n    this.refreshCallback = props.refreshCallback;\r\n    this.refreshButtonTooltip =\r\n      'Refresh list and reload components from all catalogs';\r\n  }\r\n\r\n  async getSchemas(): Promise<void> {\r\n    try {\r\n      const schemas = await MetadataService.getSchema(this.props.schemaspace);\r\n      if (!schemas) {\r\n        return;\r\n      }\r\n      this.runtimeTypes = await PipelineService.getRuntimeTypes();\r\n      const sortedSchema = schemas.sort((a, b) =>\r\n        (a.title ?? '').localeCompare(b.title ?? '')\r\n      );\r\n      this.schemas = sortedSchema.filter((schema) => {\r\n        return !!this.runtimeTypes.find((r) => {\r\n          const metadata = schema.properties?.metadata as GenericObjectType;\r\n          return (\r\n            metadata?.properties.runtime_type?.enum?.includes(r.id) &&\r\n            r.runtime_enabled\r\n          );\r\n        });\r\n      });\r\n      if (this.schemas?.length ?? 0 > 1) {\r\n        for (const schema of this.schemas ?? []) {\r\n          this.props.app.contextMenu.addItem({\r\n            selector: `#${this.props.schemaspace} .elyra-metadataHeader-addButton`,\r\n            command: 'elyra-metadata-editor:open',\r\n            args: {\r\n              onSave: this.updateMetadata,\r\n              schemaspace: this.props.schemaspace,\r\n              schema: schema.name,\r\n              title: schema.title,\r\n              titleContext: this.props.titleContext,\r\n              appendToTitle: this.props.appendToTitle\r\n            } as GenericObjectType\r\n          });\r\n        }\r\n      }\r\n      this.update();\r\n    } catch (error) {\r\n      await RequestErrors.serverError(error as IErrorResponse);\r\n    }\r\n  }\r\n\r\n  // wrapper function that refreshes the palette after calling updateMetadata\r\n  updateMetadataAndRefresh = (): void => {\r\n    super.updateMetadata();\r\n    if (this.refreshCallback) {\r\n      this.refreshCallback();\r\n    }\r\n  };\r\n\r\n  refreshMetadata(): void {\r\n    PipelineService.refreshComponentsCache()\r\n      .then((): void => {\r\n        this.updateMetadataAndRefresh();\r\n      })\r\n      .catch(async (error) => {\r\n        // silently eat a 409, the server will log in in the console\r\n        if (error.status !== 409) {\r\n          await RequestErrors.serverError(error);\r\n        }\r\n      });\r\n  }\r\n\r\n  renderDisplay(metadata: IMetadataResource[]): React.ReactElement {\r\n    if (Array.isArray(metadata) && !metadata.length) {\r\n      // Empty metadata\r\n      return (\r\n        <div>\r\n          <br />\r\n          <h6 className=\"elyra-no-metadata-msg\">\r\n            Click the + button to add {this.props.display_name.toLowerCase()}\r\n          </h6>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const filteredMetadata = metadata.filter((m) => {\r\n      return !!this.runtimeTypes.find((r) => m.metadata?.runtime_type === r.id);\r\n    });\r\n\r\n    return (\r\n      <ComponentCatalogsDisplay\r\n        metadata={filteredMetadata}\r\n        updateMetadata={this.updateMetadataAndRefresh}\r\n        openMetadataEditor={this.openMetadataEditor}\r\n        schemaspace={COMPONENT_CATALOGS_SCHEMASPACE}\r\n        sortMetadata={true}\r\n        className={COMPONENT_CATALOGS_CLASS}\r\n        omitTags={this.omitTags()}\r\n        titleContext={this.props.titleContext}\r\n      />\r\n    );\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { componentCatalogIcon, dragDropIcon } from '@elyra/ui-components';\r\nimport { settingsIcon } from '@jupyterlab/ui-components';\r\n\r\nimport React from 'react';\r\n\r\nconst HEADER_CLASS = 'empty-pipeline-header';\r\nconst BUTTON_CLASS = 'empty-pipeline-button';\r\nconst ICON_CLASS = 'empty-pipeline-icon';\r\n\r\nexport interface IEmptyGenericPipelineProps {\r\n  onOpenSettings: () => void;\r\n}\r\n\r\nexport const EmptyGenericPipeline: React.FC<IEmptyGenericPipelineProps> = ({\r\n  onOpenSettings\r\n}) => {\r\n  return (\r\n    <div>\r\n      <dragDropIcon.react\r\n        className=\"drag-drop-icon\"\r\n        tag=\"div\"\r\n        elementPosition=\"center\"\r\n        height=\"120px\"\r\n      />\r\n      <h3 className={HEADER_CLASS}>\r\n        Start your new pipeline by dragging files from the file browser pane\r\n      </h3>\r\n      <br />\r\n      <br />\r\n      <h3 className={HEADER_CLASS}>\r\n        Click{' '}\r\n        <button\r\n          title=\"Settings\"\r\n          className={BUTTON_CLASS}\r\n          onClick={onOpenSettings}\r\n        >\r\n          <settingsIcon.react className={ICON_CLASS} tag=\"div\" height=\"24px\" />\r\n        </button>{' '}\r\n        to configure the pipeline editor.\r\n      </h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport interface IEmptyPlatformSpecificPipelineProps {\r\n  onOpenCatalog: () => void;\r\n  onOpenSettings: () => void;\r\n}\r\n\r\nexport const EmptyPlatformSpecificPipeline: React.FC<\r\n  IEmptyPlatformSpecificPipelineProps\r\n> = ({ onOpenCatalog, onOpenSettings }) => {\r\n  // Note: the URL is rewritten by the release script by replacing `latest` with a\r\n  // specific version number, e.g. https://.../en/v3.6.0/user_guide/pi...\r\n  const customComponentsHelpTopicURL =\r\n    'https://elyra.readthedocs.io/en/v4.0.0/user_guide/pipeline-components.html';\r\n\r\n  return (\r\n    <div>\r\n      <dragDropIcon.react\r\n        className=\"drag-drop-icon\"\r\n        tag=\"div\"\r\n        elementPosition=\"center\"\r\n        height=\"120px\"\r\n      />\r\n      <h3 className={HEADER_CLASS}>\r\n        Start your new pipeline by dragging files from the file browser pane or\r\n        add custom components by clicking the{' '}\r\n        <button className={BUTTON_CLASS} onClick={onOpenCatalog}>\r\n          <componentCatalogIcon.react\r\n            className={ICON_CLASS}\r\n            tag=\"div\"\r\n            height=\"24px\"\r\n          />\r\n        </button>{' '}\r\n        button.\r\n      </h3>\r\n      <h4 className={HEADER_CLASS}>\r\n        Refer to the\r\n        <a\r\n          href={customComponentsHelpTopicURL}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          {' '}\r\n          &apos;pipeline components&apos; help topic{' '}\r\n        </a>\r\n        for details.\r\n      </h4>\r\n      <br />\r\n      <br />\r\n      <h3 className={HEADER_CLASS}>\r\n        Click{' '}\r\n        <button\r\n          title=\"Settings\"\r\n          className={BUTTON_CLASS}\r\n          onClick={onOpenSettings}\r\n        >\r\n          <settingsIcon.react className={ICON_CLASS} tag=\"div\" height=\"24px\" />\r\n        </button>{' '}\r\n        to configure the pipeline editor.\r\n      </h3>\r\n    </div>\r\n  );\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { IDictionary } from '@elyra/services';\r\nimport * as React from 'react';\r\n\r\nimport { IRuntimeData } from './runtime-utils';\r\nimport RuntimeConfigSelect from './RuntimeConfigSelect';\r\nimport Utils from './utils';\r\n\r\ninterface IProps {\r\n  env: string[];\r\n  dependencyFileExtension: string;\r\n  images: IDictionary<string>;\r\n  runtimeData: IRuntimeData;\r\n}\r\n\r\nconst EnvForm: React.FC<{ env: string[] }> = ({ env }) => {\r\n  if (env.length > 0) {\r\n    return (\r\n      <>\r\n        <br />\r\n        <br />\r\n        <div>Environment Variables:</div>\r\n        <br />\r\n        {Utils.chunkArray(env, 4).map((col, i) => (\r\n          <div key={i}>\r\n            {col.map((envVar) => (\r\n              <div key={envVar}>\r\n                <label htmlFor={envVar}>{envVar}:</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  id={envVar}\r\n                  className=\"envVar\"\r\n                  name={envVar}\r\n                  size={30}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const FileSubmissionDialog: React.FC<IProps> = ({\r\n  env,\r\n  images,\r\n  dependencyFileExtension,\r\n  runtimeData\r\n}) => {\r\n  const [includeDependency, setIncludeDependency] = React.useState(true);\r\n\r\n  const handleToggle = (): void => {\r\n    setIncludeDependency((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <form className=\"elyra-dialog-form\">\r\n      <RuntimeConfigSelect runtimeData={runtimeData} />\r\n      <label htmlFor=\"framework\">Runtime Image:</label>\r\n      <br />\r\n      <select id=\"framework\" name=\"framework\" className=\"elyra-form-framework\">\r\n        {Object.entries(images).map(([key, val]) => (\r\n          <option key={key} value={key}>\r\n            {val}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <br />\r\n      <div className=\"elyra-resourcesWrapper\">\r\n        <div className=\"elyra-resourceInput\">\r\n          <label htmlFor=\"cpu\"> CPU request:</label>\r\n          <div className=\"elyra-resourceInputDescription\" id=\"cpu-description\">\r\n            For CPU-intensive workloads, you can request more than 1 CPU (e.g.\r\n            1.5, this is optional).\r\n          </div>\r\n          <input id=\"cpu\" type=\"number\" name=\"cpu\" />\r\n        </div>\r\n        <div className=\"elyra-resourceInput\">\r\n          <label htmlFor=\"cpu_limit\"> CPU limit:</label>\r\n          <div\r\n            className=\"elyra-resourceInputDescription\"\r\n            id=\"cpu-limit-description\"\r\n          >\r\n            The maximum CPU that can be allocated to this node. This should be\r\n            equal or higher than the request\r\n          </div>\r\n          <input id=\"cpu_limit\" type=\"number\" name=\"cpu_limit\" />\r\n        </div>\r\n        <div className=\"elyra-resourceInput\">\r\n          <label htmlFor=\"gpu\"> GPU:</label>\r\n          <div className=\"elyra-resourceInputDescription\" id=\"gpu-description\">\r\n            For GPU-intensive workloads, you can choose more than 1 GPU. Must be\r\n            an integer.\r\n          </div>\r\n          <input id=\"gpu\" type=\"number\" name=\"gpu\" />\r\n        </div>\r\n        <div className=\"elyra-resourceInput\">\r\n          <label htmlFor=\"memory\"> RAM request (GB):</label>\r\n          <div\r\n            className=\"elyra-resourceInputDescription\"\r\n            id=\"memory-description\"\r\n          >\r\n            The total amount of RAM requested (optional).\r\n          </div>\r\n          <input id=\"memory\" type=\"number\" name=\"memory\" />\r\n        </div>\r\n        <div className=\"elyra-resourceInput\">\r\n          <label htmlFor=\"memory_limit\"> RAM limit (GB):</label>\r\n          <div\r\n            className=\"elyra-resourceInputDescription\"\r\n            id=\"memory-limit-description\"\r\n          >\r\n            The maximum amount of RAM allowed. This should be equal or higher\r\n            than the request\r\n          </div>\r\n          <input id=\"memory_limit\" type=\"number\" name=\"memory_limit\" />\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <input\r\n        type=\"checkbox\"\r\n        className=\"elyra-Dialog-checkbox\"\r\n        id=\"dependency_include\"\r\n        name=\"dependency_include\"\r\n        size={20}\r\n        checked={includeDependency}\r\n        onChange={handleToggle}\r\n      />\r\n      <label htmlFor=\"dependency_include\">Include File Dependencies:</label>\r\n      <br />\r\n      {includeDependency && (\r\n        <div key=\"dependencies\">\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            id=\"dependencies\"\r\n            className=\"jp-mod-styled\"\r\n            name=\"dependencies\"\r\n            placeholder={`*${dependencyFileExtension}`}\r\n            defaultValue={`*${dependencyFileExtension}`}\r\n            size={30}\r\n          />\r\n        </div>\r\n      )}\r\n      <EnvForm env={env} />\r\n    </form>\r\n  );\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport React from 'react';\r\n\r\nconst DIALOG_WIDTH = 27;\r\n\r\nexport interface IParameterProps {\r\n  parameters?: {\r\n    name: string;\r\n    default_value?:\r\n      | { type: 'String'; value: string }\r\n      | { type: 'Integer'; value: number }\r\n      | { type: 'Float'; value: number }\r\n      | { type: 'Bool'; value: boolean };\r\n\r\n    type?: string;\r\n    required?: boolean;\r\n    description?: string;\r\n  }[];\r\n}\r\n\r\nexport const ParameterInputForm: React.FC<IParameterProps> = ({\r\n  parameters\r\n}) => {\r\n  return parameters && parameters.length > 0 ? (\r\n    <div>\r\n      <label\r\n        style={{\r\n          fontWeight: '600',\r\n          fontSize: 'var(--jp-content-font-size1)'\r\n        }}\r\n      >\r\n        Parameters\r\n      </label>\r\n      {parameters.map((param) => {\r\n        if (!param.name) {\r\n          return undefined;\r\n        }\r\n        const required =\r\n          param.required === true && param.default_value?.value === ''\r\n            ? true\r\n            : undefined;\r\n        let type = 'text';\r\n        switch (param.default_value?.type) {\r\n          case 'Bool':\r\n            type = 'checkbox';\r\n            break;\r\n          case 'Float':\r\n          case 'Integer':\r\n            type = 'number';\r\n            break;\r\n        }\r\n        if (type === 'checkbox') {\r\n          return (\r\n            <div key={param.name}>\r\n              <input\r\n                id={`${param.name}-paramInput`}\r\n                name={`${param.name}-paramInput`}\r\n                defaultChecked={param.default_value?.value as boolean}\r\n                type=\"checkbox\"\r\n              />\r\n              <label htmlFor={`${param.name}-paramInput`}>{`${param.name}${\r\n                required ? '*' : ''\r\n              }`}</label>\r\n              <br />\r\n              <br />\r\n            </div>\r\n          );\r\n        }\r\n        return (\r\n          <div key={param.name}>\r\n            <div className=\"label-header\">\r\n              <label\r\n                className=\"control-label\"\r\n                htmlFor={`${param.name}-paramInput`}\r\n              >{`${param.name}${param.required ? '*' : ''}`}</label>\r\n              {param.description && (\r\n                <div className=\"description-wrapper\">\r\n                  <div className=\"description-button\">?</div>\r\n                  <p\r\n                    style={{\r\n                      transform: `translate(0px, -10%)`,\r\n                      left: `-${\r\n                        Math.min(\r\n                          param.name.length,\r\n                          Math.min(DIALOG_WIDTH, param.description.length)\r\n                        ) - 4\r\n                      }ch`\r\n                    }}\r\n                    className={'field-description'}\r\n                  >\r\n                    {param.description}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <input\r\n              id={`${param.name}-paramInput`}\r\n              name={`${param.name}-paramInput`}\r\n              type={type}\r\n              placeholder={param.default_value?.value as string | undefined}\r\n              data-form-required={required}\r\n            />\r\n            <br />\r\n            <br />\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  ) : (\r\n    <div />\r\n  );\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {\r\n  PipelineEditor,\r\n  PipelineOutOfDateError,\r\n  ThemeProvider\r\n} from '@elyra/pipeline-editor';\r\nimport {\r\n  migrate,\r\n  validate,\r\n  ComponentNotFoundError\r\n} from '@elyra/pipeline-services';\r\nimport { ContentParser } from '@elyra/services';\r\nimport {\r\n  IconUtil,\r\n  clearPipelineIcon,\r\n  exportPipelineIcon,\r\n  pipelineIcon,\r\n  savePipelineIcon,\r\n  showBrowseFileDialog,\r\n  runtimesIcon,\r\n  containerIcon,\r\n  Dropzone,\r\n  RequestErrors,\r\n  showFormDialog,\r\n  componentCatalogIcon,\r\n  GenericObjectType\r\n} from '@elyra/ui-components';\r\nimport { JupyterFrontEnd } from '@jupyterlab/application';\r\nimport { Dialog, ReactWidget, showDialog } from '@jupyterlab/apputils';\r\nimport { PathExt } from '@jupyterlab/coreutils';\r\nimport {\r\n  DocumentRegistry,\r\n  ABCWidgetFactory,\r\n  DocumentWidget\r\n} from '@jupyterlab/docregistry';\r\nimport { IDefaultFileBrowser } from '@jupyterlab/filebrowser';\r\nimport { ServiceManager } from '@jupyterlab/services';\r\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\r\n\r\nimport 'carbon-components/css/carbon-components.min.css';\r\n\r\nimport { toArray } from '@lumino/algorithm';\r\nimport { CommandRegistry } from '@lumino/commands';\r\nimport {\r\n  PartialJSONArray,\r\n  PartialJSONObject,\r\n  PartialJSONValue,\r\n  ReadonlyPartialJSONObject\r\n} from '@lumino/coreutils';\r\nimport { IDragEvent } from '@lumino/dragdrop';\r\nimport { Signal } from '@lumino/signaling';\r\n\r\nimport React, {\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState\r\n} from 'react';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport {\r\n  EmptyGenericPipeline,\r\n  EmptyPlatformSpecificPipeline\r\n} from './EmptyPipelineContent';\r\nimport { formDialogWidget } from './formDialogWidget';\r\nimport {\r\n  IRuntimeComponentNodeType,\r\n  IRuntimeComponentParameter,\r\n  IRuntimeComponentsResponse,\r\n  IRuntimeImage,\r\n  usePalette,\r\n  useRuntimeImages,\r\n  useRuntimesSchema\r\n} from './pipeline-hooks';\r\nimport { PipelineExportDialog } from './PipelineExportDialog';\r\nimport {\r\n  PipelineService,\r\n  RUNTIMES_SCHEMASPACE,\r\n  RUNTIME_IMAGES_SCHEMASPACE,\r\n  COMPONENT_CATALOGS_SCHEMASPACE,\r\n  IRuntimeSchema\r\n} from './PipelineService';\r\nimport { PipelineSubmissionDialog } from './PipelineSubmissionDialog';\r\nimport {\r\n  createRuntimeData,\r\n  getConfigDetails,\r\n  IRuntimeData\r\n} from './runtime-utils';\r\nimport { theme } from './theme';\r\n\r\nimport { getEmptyPipelineJson } from './index';\r\n\r\nconst PIPELINE_CLASS = 'elyra-PipelineEditor';\r\n\r\nexport const commandIDs = {\r\n  openPipelineEditor: 'pipeline-editor:open',\r\n  openMetadata: 'elyra-metadata:open',\r\n  openDocManager: 'docmanager:open',\r\n  newDocManager: 'docmanager:new-untitled',\r\n  saveDocManager: 'docmanager:save',\r\n  submitScript: 'script-editor:submit',\r\n  submitNotebook: 'notebook:submit',\r\n  addFileToPipeline: 'pipeline-editor:add-node',\r\n  refreshPalette: 'pipeline-editor:refresh-palette',\r\n  openViewer: 'code-viewer:open'\r\n};\r\n\r\ninterface IExtendedThemeProviderProps\r\n  extends React.ComponentProps<typeof ThemeProvider> {\r\n  children: React.ReactNode;\r\n}\r\n\r\n//extend ThemeProvider to accept the same props as original but with children prop as one of them.\r\nconst ExtendedThemeProvider: React.FC<IExtendedThemeProviderProps> = ({\r\n  children,\r\n  ...props\r\n}) => {\r\n  return <ThemeProvider {...props}>{children}</ThemeProvider>;\r\n};\r\n\r\nconst getAllPaletteNodes = (\r\n  palette: IRuntimeComponentsResponse | undefined\r\n): IRuntimeComponentNodeType[] => {\r\n  if (palette?.categories === undefined) {\r\n    return [];\r\n  }\r\n\r\n  const nodes: IRuntimeComponentNodeType[] = [];\r\n  for (const c of palette.categories) {\r\n    if (c.node_types) {\r\n      nodes.push(...c.node_types);\r\n    }\r\n  }\r\n\r\n  return nodes;\r\n};\r\n\r\nconst isRuntimeTypeAvailable = (data: IRuntimeData, type?: string): boolean => {\r\n  for (const p of data.platforms) {\r\n    if (type === undefined || p.id === type) {\r\n      if (p.configs.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst getDisplayName = (\r\n  runtimesSchema?: IRuntimeSchema[],\r\n  type?: string\r\n): string | undefined => {\r\n  if (!type) {\r\n    return undefined;\r\n  }\r\n  const schema = runtimesSchema?.find((s) => s.runtime_type === type);\r\n  return schema?.title;\r\n};\r\n\r\ninterface IPipelineEditorWidgetProps {\r\n  context: DocumentRegistry.Context;\r\n  browserFactory: IDefaultFileBrowser;\r\n  serviceManager: ServiceManager.IManager;\r\n  shell: JupyterFrontEnd.IShell;\r\n  commands: CommandRegistry;\r\n  settings?: ISettingRegistry.ISettings;\r\n  widgetId?: string;\r\n  defaultRuntimeType: string;\r\n}\r\n\r\nclass PipelineEditorWidget extends ReactWidget {\r\n  addFileToPipelineSignal: Signal<\r\n    PipelineEditorWidget,\r\n    ReadonlyPartialJSONObject\r\n  >;\r\n  refreshPaletteSignal: Signal<PipelineEditorWidget, ReadonlyPartialJSONObject>;\r\n\r\n  constructor(private readonly args: IPipelineEditorWidgetProps) {\r\n    super();\r\n    let nullPipeline = this.args.context.model.toJSON() === null;\r\n\r\n    this.addFileToPipelineSignal = new Signal<\r\n      PipelineEditorWidget,\r\n      ReadonlyPartialJSONObject\r\n    >(this);\r\n\r\n    this.refreshPaletteSignal = new Signal<\r\n      PipelineEditorWidget,\r\n      ReadonlyPartialJSONObject\r\n    >(this);\r\n\r\n    this.args.context.model.contentChanged.connect(() => {\r\n      if (nullPipeline) {\r\n        nullPipeline = false;\r\n        this.update();\r\n      }\r\n    });\r\n    this.args.context.fileChanged.connect(() => {\r\n      if (this.args.context.model.toJSON() === null) {\r\n        const pipelineJson = getEmptyPipelineJson(this.args.defaultRuntimeType);\r\n        this.args.context.model.fromString(JSON.stringify(pipelineJson));\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.args.context.model.toJSON() === null) {\r\n      return <div className=\"elyra-loader\"></div>;\r\n    }\r\n    return (\r\n      <PipelineWrapper\r\n        context={this.args.context}\r\n        browserFactory={this.args.browserFactory}\r\n        shell={this.args.shell}\r\n        commands={this.args.commands}\r\n        addFileToPipelineSignal={this.addFileToPipelineSignal}\r\n        refreshPaletteSignal={this.refreshPaletteSignal}\r\n        widgetId={this.parent?.id}\r\n        settings={this.args.settings}\r\n        defaultRuntimeType={this.args.defaultRuntimeType}\r\n        serviceManager={this.args.serviceManager}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst PipelineWrapper: React.FC<\r\n  IPipelineEditorWidgetProps & {\r\n    addFileToPipelineSignal: Signal<\r\n      PipelineEditorWidget,\r\n      ReadonlyPartialJSONObject\r\n    >;\r\n    refreshPaletteSignal: Signal<\r\n      PipelineEditorWidget,\r\n      ReadonlyPartialJSONObject\r\n    >;\r\n  }\r\n> = ({\r\n  context,\r\n  browserFactory,\r\n  shell,\r\n  commands,\r\n  addFileToPipelineSignal,\r\n  refreshPaletteSignal,\r\n  settings,\r\n  widgetId\r\n}) => {\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- PipelineEditor API not typed\r\n  const ref = useRef<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [pipeline, setPipeline] = useState<GenericObjectType>(\r\n    context.model.toJSON() as GenericObjectType\r\n  );\r\n  const [panelOpen, setPanelOpen] = React.useState(false);\r\n\r\n  const type: string | undefined =\r\n    pipeline?.pipelines?.[0]?.app_data?.runtime_type;\r\n\r\n  const { data: runtimesSchema, error: runtimesSchemaError } =\r\n    useRuntimesSchema();\r\n\r\n  const doubleClickToOpenProperties =\r\n    settings?.composite['doubleClickToOpenProperties'] ?? true;\r\n\r\n  const runtimeDisplayName = getDisplayName(runtimesSchema, type) ?? 'Generic';\r\n\r\n  const filePersistedRuntimeImages = useMemo(() => {\r\n    const images: string[] = [];\r\n    const pipelineDefaultRuntimeImage =\r\n      pipeline?.pipelines?.[0]?.app_data?.properties?.pipeline_defaults\r\n        ?.runtime_image;\r\n    if (pipelineDefaultRuntimeImage?.length > 0) {\r\n      images.push(pipelineDefaultRuntimeImage);\r\n    }\r\n    const nodes = pipeline?.pipelines?.[0]?.nodes;\r\n    if (nodes?.length > 0) {\r\n      for (const node of nodes) {\r\n        const nodeRuntimeImage =\r\n          node?.app_data?.component_parameters?.runtime_image;\r\n        if (nodeRuntimeImage?.length > 0) {\r\n          images.push(nodeRuntimeImage);\r\n        }\r\n      }\r\n    }\r\n\r\n    return images.map((imageName) => {\r\n      return {\r\n        name: imageName,\r\n        display_name: imageName,\r\n        metadata: {\r\n          image_name: imageName\r\n        }\r\n      } as IRuntimeImage;\r\n    });\r\n  }, [pipeline]);\r\n\r\n  const {\r\n    data: palette,\r\n    error: paletteError,\r\n    mutate: mutatePalette\r\n  } = usePalette(type, filePersistedRuntimeImages);\r\n\r\n  useEffect(() => {\r\n    const handleMutateSignal = (): void => {\r\n      mutatePalette?.();\r\n    };\r\n    refreshPaletteSignal.connect(handleMutateSignal);\r\n    return (): void => {\r\n      refreshPaletteSignal.disconnect(handleMutateSignal);\r\n    };\r\n  }, [refreshPaletteSignal, mutatePalette]);\r\n\r\n  const { data: runtimeImages, error: runtimeImagesError } = useRuntimeImages();\r\n\r\n  useEffect(() => {\r\n    if (runtimeImages?.length === 0) {\r\n      RequestErrors.noMetadataError('runtime image');\r\n    }\r\n  }, [runtimeImages?.length]);\r\n\r\n  useEffect(() => {\r\n    if (paletteError) {\r\n      RequestErrors.serverError(paletteError).then(() => {\r\n        shell.currentWidget?.close();\r\n      });\r\n    }\r\n  }, [paletteError, shell.currentWidget]);\r\n\r\n  useEffect(() => {\r\n    if (runtimeImagesError) {\r\n      RequestErrors.serverError(runtimeImagesError).then(() => {\r\n        shell.currentWidget?.close();\r\n      });\r\n    }\r\n  }, [runtimeImagesError, shell.currentWidget]);\r\n\r\n  useEffect(() => {\r\n    if (runtimesSchemaError) {\r\n      RequestErrors.serverError(runtimesSchemaError).then(() => {\r\n        shell.currentWidget?.close();\r\n      });\r\n    }\r\n  }, [runtimesSchemaError, shell.currentWidget]);\r\n\r\n  const contextRef = useRef(context);\r\n  useEffect(() => {\r\n    const currentContext = contextRef.current;\r\n\r\n    const changeHandler = (): void => {\r\n      const pipelineJson = currentContext.model.toJSON() as GenericObjectType;\r\n\r\n      // map IDs to display names\r\n      const nodes = pipelineJson?.pipelines?.[0]?.nodes;\r\n      if (nodes?.length > 0) {\r\n        for (const node of nodes) {\r\n          if (node?.app_data?.component_parameters) {\r\n            for (const [key, val] of Object.entries(\r\n              node?.app_data?.component_parameters\r\n            )) {\r\n              if (val === null) {\r\n                node.app_data.component_parameters[key] = undefined;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // TODO: don't persist this, but this will break things right now\r\n      if (pipelineJson?.pipelines?.[0]?.app_data) {\r\n        if (!pipelineJson.pipelines[0].app_data.properties) {\r\n          pipelineJson.pipelines[0].app_data.properties = {};\r\n        }\r\n        const pipeline_path = contextRef.current.path;\r\n        const pipeline_name = PathExt.basename(\r\n          pipeline_path,\r\n          PathExt.extname(pipeline_path)\r\n        );\r\n        pipelineJson.pipelines[0].app_data.properties.name = pipeline_name;\r\n        pipelineJson.pipelines[0].app_data.properties.runtime =\r\n          runtimeDisplayName;\r\n      }\r\n      setPipeline(pipelineJson);\r\n      setLoading(false);\r\n    };\r\n\r\n    currentContext.ready.then(changeHandler);\r\n    currentContext.model.contentChanged.connect(changeHandler);\r\n\r\n    return (): void => {\r\n      currentContext.model.contentChanged.disconnect(changeHandler);\r\n    };\r\n  }, [runtimeDisplayName]);\r\n\r\n  const onChange = useCallback((pipelineJson: GenericObjectType): void => {\r\n    const isNullOrEmpty = (\r\n      value: PartialJSONValue | null | undefined\r\n    ): boolean => value === null || value === undefined || value === '';\r\n\r\n    const cleanArray = (arr: PartialJSONArray): PartialJSONArray => {\r\n      const newArray: PartialJSONArray = [];\r\n\r\n      for (const item of arr) {\r\n        if (isNullOrEmpty(item)) {\r\n          continue;\r\n        }\r\n        if (typeof item === 'object') {\r\n          const itemCopy = JSON.parse(\r\n            JSON.stringify(item)\r\n          ) as PartialJSONObject;\r\n          removeNullValues(itemCopy);\r\n          newArray.push(itemCopy);\r\n        } else {\r\n          newArray.push(item);\r\n        }\r\n      }\r\n\r\n      return newArray;\r\n    };\r\n\r\n    const removeNullValues = (data?: PartialJSONObject): void => {\r\n      if (!data) {\r\n        return;\r\n      }\r\n\r\n      for (const key in data) {\r\n        const value = data[key];\r\n        if (isNullOrEmpty(value)) {\r\n          delete data[key];\r\n        } else if (Array.isArray(value)) {\r\n          data[key] = cleanArray(value);\r\n        } else if (typeof value === 'object') {\r\n          const objCopy = JSON.parse(JSON.stringify(value));\r\n          removeNullValues(objCopy);\r\n          data[key] = objCopy;\r\n        }\r\n      }\r\n    };\r\n\r\n    // Remove all null values from the pipeline\r\n    for (const node of pipelineJson?.pipelines?.[0]?.nodes ?? []) {\r\n      removeNullValues(node.app_data ?? {});\r\n    }\r\n    removeNullValues(\r\n      pipelineJson?.pipelines?.[0]?.app_data?.properties?.pipeline_defaults ??\r\n        {}\r\n    );\r\n    if (contextRef.current.isReady) {\r\n      contextRef.current.model.fromString(\r\n        JSON.stringify(pipelineJson, null, 2)\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  const isDialogAlreadyShowing = useRef(false);\r\n  const onError = useCallback(\r\n    (error?: Error): void => {\r\n      if (isDialogAlreadyShowing.current) {\r\n        return; // bail, we are already showing a dialog.\r\n      }\r\n      isDialogAlreadyShowing.current = true;\r\n      if (error instanceof PipelineOutOfDateError) {\r\n        showDialog({\r\n          title: 'Migrate pipeline?',\r\n          body: (\r\n            <p>\r\n              This pipeline corresponds to an older version of Elyra and needs\r\n              to be migrated.\r\n              <br />\r\n              Although the pipeline can be further edited and/or submitted after\r\n              its update,\r\n              <br />\r\n              the migration will not be completed until the pipeline has been\r\n              saved within the editor.\r\n              <br />\r\n              <br />\r\n              Proceed with migration?\r\n            </p>\r\n          ),\r\n          buttons: [Dialog.cancelButton(), Dialog.okButton()]\r\n        }).then(async (result) => {\r\n          isDialogAlreadyShowing.current = false;\r\n          if (result.button.accept) {\r\n            // proceed with migration\r\n            console.log('migrating pipeline');\r\n            const pipelineJSON =\r\n              contextRef.current.model.toJSON() as GenericObjectType;\r\n            try {\r\n              const migratedPipeline = migrate(pipelineJSON, (pipeline) => {\r\n                // function for updating to relative paths in v2\r\n                // uses location of filename as expected in v1\r\n                for (const node of pipeline.nodes) {\r\n                  node.app_data.filename =\r\n                    PipelineService.getPipelineRelativeNodePath(\r\n                      contextRef.current.path,\r\n                      node.app_data.filename\r\n                    );\r\n                }\r\n                return pipeline;\r\n              });\r\n              contextRef.current.model.fromString(\r\n                JSON.stringify(migratedPipeline, null, 2)\r\n              );\r\n            } catch (migrationError) {\r\n              if (migrationError instanceof ComponentNotFoundError) {\r\n                showDialog({\r\n                  title: 'Pipeline migration aborted!',\r\n                  body: (\r\n                    <p>\r\n                      {' '}\r\n                      The pipeline you are trying to migrate uses example\r\n                      components, which are not <br />\r\n                      enabled in your environment. Complete the setup\r\n                      instructions in{' '}\r\n                      <a\r\n                        href=\"https://elyra.readthedocs.io/en/v4.0.0/user_guide/pipeline-components.html#example-custom-components\"\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                      >\r\n                        Example Custom Components\r\n                      </a>{' '}\r\n                      and try again.\r\n                    </p>\r\n                  ),\r\n                  buttons: [Dialog.okButton({ label: 'Close' })]\r\n                }).then(() => {\r\n                  shell.currentWidget?.close();\r\n                });\r\n              } else {\r\n                showDialog({\r\n                  title: 'Pipeline migration failed!',\r\n                  body: <p> {(migrationError as Error)?.message || ''} </p>,\r\n                  buttons: [Dialog.okButton()]\r\n                }).then(() => {\r\n                  shell.currentWidget?.close();\r\n                });\r\n              }\r\n            }\r\n          } else {\r\n            shell.currentWidget?.close();\r\n          }\r\n        });\r\n      } else {\r\n        showDialog({\r\n          title: 'Load pipeline failed!',\r\n          body: <p> {error?.message || ''} </p>,\r\n          buttons: [Dialog.okButton()]\r\n        }).then(() => {\r\n          isDialogAlreadyShowing.current = false;\r\n          shell.currentWidget?.close();\r\n        });\r\n      }\r\n    },\r\n    [shell.currentWidget]\r\n  );\r\n\r\n  const onFileRequested = async (args: {\r\n    filename?: string;\r\n    propertyID?: string;\r\n    filters?: { [key: string]: string[] };\r\n  }): Promise<string[] | undefined> => {\r\n    const pipelineFilePath = contextRef.current.path;\r\n    const contextFilePath = args.filename\r\n      ? PipelineService.getWorkspaceRelativeNodePath(\r\n          pipelineFilePath,\r\n          args.filename\r\n        )\r\n      : pipelineFilePath;\r\n    const contextFolderPath = PathExt.dirname(contextFilePath);\r\n\r\n    if (args.propertyID?.includes('dependencies')) {\r\n      const res = await showBrowseFileDialog({\r\n        manager: browserFactory.model.manager,\r\n        multiselect: true,\r\n        includeDir: true,\r\n        rootPath: contextFolderPath,\r\n        filter: (model) => {\r\n          return model.path !== pipelineFilePath ? {} : null;\r\n        }\r\n      });\r\n\r\n      if (res.button.accept && res.value?.length) {\r\n        return res.value;\r\n      }\r\n    } else {\r\n      const res = await showBrowseFileDialog({\r\n        manager: browserFactory.model.manager,\r\n        startPath: contextFolderPath,\r\n        filter: (model) => {\r\n          if (args.filters?.File === undefined || model.type === 'directory') {\r\n            return {};\r\n          }\r\n\r\n          const ext = PathExt.extname(model.path);\r\n          return args.filters.File.includes(ext) ? {} : null;\r\n        }\r\n      });\r\n\r\n      if (res.button.accept && res.value?.length) {\r\n        const file = PipelineService.getPipelineRelativeNodePath(\r\n          contextRef.current.path,\r\n          res.value[0]\r\n        );\r\n        return [file];\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n\r\n  const onPropertiesUpdateRequested = async (args: {\r\n    component_parameters?: IRuntimeComponentParameter;\r\n  }): Promise<{\r\n    component_parameters?: IRuntimeComponentParameter;\r\n  }> => {\r\n    if (!contextRef.current.path || !args.component_parameters?.filename) {\r\n      return args;\r\n    }\r\n    const path = PipelineService.getWorkspaceRelativeNodePath(\r\n      contextRef.current.path,\r\n      args.component_parameters.filename\r\n    );\r\n    const new_env_vars = await ContentParser.getEnvVars(path).then((response) =>\r\n      response.map((str: string) => {\r\n        return { env_var: str };\r\n      })\r\n    );\r\n\r\n    const env_vars = args.component_parameters?.env_vars ?? [];\r\n    const merged_env_vars = [\r\n      ...env_vars,\r\n      ...new_env_vars.filter(\r\n        (new_var) =>\r\n          !env_vars.some((old_var) => {\r\n            return old_var.env_var === new_var.env_var;\r\n          })\r\n      )\r\n    ];\r\n\r\n    return {\r\n      ...args,\r\n      component_parameters: {\r\n        ...args.component_parameters,\r\n        env_vars: merged_env_vars.filter(Boolean)\r\n      }\r\n    };\r\n  };\r\n\r\n  const handleOpenComponentDef = useCallback(\r\n    (componentId: string, componentSource: string) => {\r\n      // Show error dialog if the component does not exist\r\n      if (!componentId) {\r\n        const dialogBody: string[] = [];\r\n        try {\r\n          const componentSourceJson = JSON.parse(componentSource);\r\n          dialogBody.push(`catalog_type: ${componentSourceJson.catalog_type}`);\r\n          for (const [key, value] of Object.entries(\r\n            componentSourceJson.component_ref\r\n          )) {\r\n            dialogBody.push(`${key}: ${value}`);\r\n          }\r\n        } catch {\r\n          dialogBody.push(componentSource);\r\n        }\r\n        return showDialog({\r\n          title: 'Component not found',\r\n          body: (\r\n            <p>\r\n              This node uses a component that is not stored in your component\r\n              registry.\r\n              {dialogBody.map((line, i) => (\r\n                <span key={i}>\r\n                  <br />\r\n                  {line}\r\n                </span>\r\n              ))}\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://elyra.readthedocs.io/en/v4.0.0/user_guide/best-practices-custom-pipeline-components.html#troubleshooting-missing-pipeline-components\"\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                Learn more...\r\n              </a>\r\n            </p>\r\n          ),\r\n          buttons: [Dialog.okButton()]\r\n        });\r\n      }\r\n      return PipelineService.getComponentDef(type, componentId)\r\n        .then((res) => {\r\n          if (!res) {\r\n            return;\r\n          }\r\n          const nodeDef = getAllPaletteNodes(palette).find(\r\n            (n) => n.id === componentId\r\n          );\r\n          commands.execute(commandIDs.openViewer, {\r\n            content: res.content,\r\n            mimeType: res.mimeType,\r\n            label: nodeDef?.label ?? componentId\r\n          });\r\n        })\r\n        .catch(async (e) => await RequestErrors.serverError(e));\r\n    },\r\n    [commands, palette, type]\r\n  );\r\n\r\n  const onDoubleClick = (data: { selectedObjectIds: string[] }): void => {\r\n    for (let i = 0; i < data.selectedObjectIds.length; i++) {\r\n      const node = pipeline.pipelines[0].nodes.find(\r\n        (node: { id: string }) => node.id === data.selectedObjectIds[i]\r\n      );\r\n      const nodeDef = getAllPaletteNodes(palette).find(\r\n        (n) => n.op === node?.op\r\n      );\r\n      if (node?.app_data?.component_parameters?.filename) {\r\n        commands.execute(commandIDs.openDocManager, {\r\n          path: PipelineService.getWorkspaceRelativeNodePath(\r\n            contextRef.current.path,\r\n            node.app_data.component_parameters.filename\r\n          )\r\n        });\r\n      } else if (nodeDef && !nodeDef.app_data?.parameter_refs?.filehandler) {\r\n        handleOpenComponentDef(nodeDef.id, node?.app_data?.component_source);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmission = useCallback(\r\n    async (actionType: 'run' | 'export'): Promise<void> => {\r\n      const pipelineJson = context.model.toJSON() as GenericObjectType;\r\n      // Check that all nodes are valid\r\n      const errorMessages = validate(\r\n        JSON.stringify(pipelineJson),\r\n        getAllPaletteNodes(palette),\r\n        palette?.properties\r\n      );\r\n      if (errorMessages && errorMessages.length > 0) {\r\n        let errorMessage = '';\r\n        for (const error of errorMessages) {\r\n          errorMessage += (errorMessage ? '\\n' : '') + error.message;\r\n        }\r\n        toast.error(`Failed ${actionType}: ${errorMessage}`);\r\n        return;\r\n      }\r\n\r\n      if (contextRef.current.model.dirty) {\r\n        const dialogResult = await showDialog({\r\n          title:\r\n            'This pipeline contains unsaved changes. To submit the pipeline the changes need to be saved.',\r\n          buttons: [\r\n            Dialog.cancelButton(),\r\n            Dialog.okButton({ label: 'Save and Submit' })\r\n          ]\r\n        });\r\n        if (dialogResult.button && dialogResult.button.accept === true) {\r\n          await contextRef.current.save();\r\n        } else {\r\n          // Don't proceed if cancel button pressed\r\n          return;\r\n        }\r\n      }\r\n\r\n      const pipelineName = PathExt.basename(\r\n        contextRef.current.path,\r\n        PathExt.extname(contextRef.current.path)\r\n      );\r\n\r\n      // TODO: Parallelize this\r\n      const runtimeTypes = await PipelineService.getRuntimeTypes();\r\n      const runtimes = await PipelineService.getRuntimes()\r\n        .then((runtimeList) => {\r\n          return runtimeList?.filter((runtime) => {\r\n            return (\r\n              !runtime.metadata.runtime_enabled &&\r\n              !!runtimeTypes.find((r) => runtime.metadata.runtime_type === r.id)\r\n            );\r\n          });\r\n        })\r\n        .catch(async (error) => {\r\n          await RequestErrors.serverError(error);\r\n        });\r\n      const schema = await PipelineService.getRuntimesSchema().catch(\r\n        async (error) => {\r\n          await RequestErrors.serverError(error);\r\n        }\r\n      );\r\n\r\n      if (!runtimes) {\r\n        await RequestErrors.noMetadataError('runtime');\r\n        return;\r\n      }\r\n\r\n      if (!schema) {\r\n        await RequestErrors.noMetadataError('schema');\r\n        return;\r\n      }\r\n\r\n      const runtimeData = createRuntimeData({\r\n        schema,\r\n        runtimes,\r\n        allowLocal: actionType === 'run'\r\n      });\r\n\r\n      let title =\r\n        type !== undefined\r\n          ? `${actionType} pipeline for ${runtimeDisplayName}`\r\n          : `${actionType} pipeline`;\r\n\r\n      if (actionType === 'export' || type !== undefined) {\r\n        if (!isRuntimeTypeAvailable(runtimeData, type)) {\r\n          const res = await RequestErrors.noMetadataError(\r\n            'runtime',\r\n            `${actionType} pipeline.`,\r\n            type !== undefined ? runtimeDisplayName : undefined\r\n          );\r\n\r\n          if (res.button.label.includes(RUNTIMES_SCHEMASPACE)) {\r\n            // Open the runtimes widget\r\n            shell.activateById(`elyra-metadata:${RUNTIMES_SCHEMASPACE}`);\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      // Capitalize\r\n      title = title.charAt(0).toUpperCase() + title.slice(1);\r\n\r\n      let dialogOptions: Partial<Dialog.IOptions<GenericObjectType>>;\r\n\r\n      pipelineJson.pipelines[0].app_data.properties.pipeline_parameters =\r\n        pipelineJson.pipelines[0].app_data.properties.pipeline_parameters?.filter(\r\n          (param: { name: string }) => {\r\n            return !!pipelineJson.pipelines[0].nodes.find(\r\n              (node: {\r\n                app_data: {\r\n                  component_parameters?: {\r\n                    pipeline_parameters?: GenericObjectType;\r\n                  };\r\n                };\r\n              }) => {\r\n                return (\r\n                  param.name !== '' &&\r\n                  (node.app_data.component_parameters?.pipeline_parameters?.includes(\r\n                    param.name\r\n                  ) ||\r\n                    (node.app_data.component_parameters &&\r\n                      Object.values(node.app_data.component_parameters).find(\r\n                        (property) =>\r\n                          property.widget === 'parameter' &&\r\n                          property.value === param.name\r\n                      )))\r\n                );\r\n              }\r\n            );\r\n          }\r\n        );\r\n\r\n      const parameters =\r\n        pipelineJson?.pipelines[0].app_data.properties.pipeline_parameters;\r\n\r\n      switch (actionType) {\r\n        case 'run':\r\n          dialogOptions = {\r\n            title,\r\n            body: formDialogWidget(\r\n              <PipelineSubmissionDialog\r\n                name={pipelineName}\r\n                runtimeData={runtimeData}\r\n                pipelineType={type}\r\n                parameters={parameters}\r\n              />\r\n            ),\r\n            buttons: [Dialog.cancelButton(), Dialog.okButton()],\r\n            defaultButton: 1,\r\n            focusNodeSelector: '#pipeline_name'\r\n          };\r\n          break;\r\n        case 'export':\r\n          dialogOptions = {\r\n            title,\r\n            body: formDialogWidget(\r\n              <PipelineExportDialog\r\n                runtimeData={runtimeData}\r\n                runtimeTypeInfo={runtimeTypes}\r\n                pipelineType={type}\r\n                exportName={pipelineName}\r\n                parameters={parameters}\r\n              />\r\n            ),\r\n            buttons: [Dialog.cancelButton(), Dialog.okButton()],\r\n            defaultButton: 1,\r\n            focusNodeSelector: '#runtime_config'\r\n          };\r\n          break;\r\n      }\r\n\r\n      const dialogResult = await showFormDialog(dialogOptions);\r\n\r\n      if (dialogResult.value === null) {\r\n        // When Cancel is clicked on the dialog, just return\r\n        return;\r\n      }\r\n\r\n      // Clean null properties\r\n      for (const node of pipelineJson.pipelines[0].nodes) {\r\n        if (node.app_data.component_parameters.cpu === null) {\r\n          delete node.app_data.component_parameters.cpu;\r\n        }\r\n        if (node.app_data.component_parameters.cpu_limit === null) {\r\n          delete node.app_data.component_parameters.cpu_limit;\r\n        }\r\n        if (node.app_data.component_parameters.memory === null) {\r\n          delete node.app_data.component_parameters.memory;\r\n        }\r\n        if (node.app_data.component_parameters.memory_limit === null) {\r\n          delete node.app_data.component_parameters.memory_limit;\r\n        }\r\n        if (node.app_data.component_parameters.gpu === null) {\r\n          delete node.app_data.component_parameters.gpu;\r\n        }\r\n      }\r\n\r\n      const configDetails = getConfigDetails(\r\n        runtimeData,\r\n        dialogResult.value.runtime_config\r\n      );\r\n\r\n      PipelineService.setNodePathsRelativeToWorkspace(\r\n        pipelineJson.pipelines[0],\r\n        getAllPaletteNodes(palette),\r\n        contextRef.current.path\r\n      );\r\n\r\n      // Metadata\r\n      pipelineJson.pipelines[0].app_data.name =\r\n        dialogResult.value.pipeline_name ?? pipelineName;\r\n      pipelineJson.pipelines[0].app_data.source = PathExt.basename(\r\n        contextRef.current.path\r\n      );\r\n\r\n      // Pipeline parameter overrides\r\n      for (const paramIndex in parameters ?? []) {\r\n        const param = parameters[paramIndex];\r\n        if (param.name) {\r\n          let paramOverride = dialogResult.value[`${param.name}-paramInput`];\r\n          if (\r\n            (param.default_value?.type === 'Integer' ||\r\n              param.default_value?.type === 'Float') &&\r\n            paramOverride !== ''\r\n          ) {\r\n            paramOverride = Number(paramOverride);\r\n          }\r\n          pipelineJson.pipelines[0].app_data.properties.pipeline_parameters[\r\n            paramIndex\r\n          ].value =\r\n            paramOverride === '' ? param.default_value?.value : paramOverride;\r\n        }\r\n      }\r\n\r\n      // Pipeline name\r\n      pipelineJson.pipelines[0].app_data.name =\r\n        dialogResult.value.pipeline_name ?? pipelineName;\r\n\r\n      // Runtime info\r\n      pipelineJson.pipelines[0].app_data.runtime_config =\r\n        configDetails?.id ?? null;\r\n\r\n      // Export info\r\n      const pipeline_dir = PathExt.dirname(contextRef.current.path);\r\n      const basePath = pipeline_dir ? `${pipeline_dir}/` : '';\r\n      const exportType = dialogResult.value.pipeline_filetype;\r\n      const exportName = dialogResult.value.export_name;\r\n      const exportPath = `${basePath}${exportName}.${exportType}`;\r\n\r\n      switch (actionType) {\r\n        case 'run':\r\n          PipelineService.submitPipeline(\r\n            pipelineJson,\r\n            configDetails?.platform.displayName ?? ''\r\n          ).catch(async (error) => {\r\n            await RequestErrors.serverError(error);\r\n          });\r\n          break;\r\n        case 'export':\r\n          PipelineService.exportPipeline(\r\n            pipelineJson,\r\n            exportType,\r\n            exportPath,\r\n            dialogResult.value.overwrite\r\n          ).catch(async (error) => {\r\n            await RequestErrors.serverError(error);\r\n          });\r\n          break;\r\n      }\r\n    },\r\n    [context.model, palette, runtimeDisplayName, type, shell]\r\n  );\r\n\r\n  const handleClearPipeline = useCallback(async (): Promise<void> => {\r\n    return showDialog({\r\n      title: 'Clear Pipeline',\r\n      body: 'Are you sure you want to clear the pipeline?',\r\n      buttons: [\r\n        Dialog.cancelButton(),\r\n        Dialog.okButton({ label: 'Clear All' }),\r\n        Dialog.okButton({ label: 'Clear Canvas' })\r\n      ]\r\n    }).then((result) => {\r\n      if (result.button.accept) {\r\n        const newPipeline =\r\n          contextRef.current.model.toJSON() as GenericObjectType;\r\n        if (newPipeline?.pipelines?.[0]?.nodes?.length > 0) {\r\n          newPipeline.pipelines[0].nodes = [];\r\n        }\r\n        // remove supernode pipelines\r\n        newPipeline.pipelines = [newPipeline.pipelines[0]];\r\n        // only clear pipeline properties when \"Clear All\" is selected\r\n        if (result.button.label === 'Clear All') {\r\n          const pipelineProperties =\r\n            newPipeline?.pipelines?.[0]?.app_data?.properties;\r\n          if (pipelineProperties) {\r\n            // Remove all fields of pipeline properties except for the name/runtime (readonly)\r\n            newPipeline.pipelines[0].app_data.properties = {\r\n              name: pipelineProperties.name,\r\n              runtime: pipelineProperties.runtime\r\n            };\r\n          }\r\n        }\r\n        contextRef.current.model.fromJSON(newPipeline);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const onAction = useCallback(\r\n    (args: { type: string; payload?: GenericObjectType | string }) => {\r\n      switch (args.type) {\r\n        case 'save':\r\n          contextRef.current.save();\r\n          break;\r\n        case 'run':\r\n        case 'export':\r\n          handleSubmission(args.type);\r\n          break;\r\n        case 'clear':\r\n          handleClearPipeline();\r\n          break;\r\n        case 'toggleOpenPanel':\r\n          setPanelOpen(!panelOpen);\r\n          break;\r\n        case 'properties':\r\n          setPanelOpen(true);\r\n          break;\r\n        case 'openRuntimes':\r\n          shell.activateById(`elyra-metadata:${RUNTIMES_SCHEMASPACE}`);\r\n          break;\r\n        case 'openRuntimeImages':\r\n          shell.activateById(`elyra-metadata:${RUNTIME_IMAGES_SCHEMASPACE}`);\r\n          break;\r\n        case 'openComponentCatalogs':\r\n          shell.activateById(\r\n            `elyra-metadata:${COMPONENT_CATALOGS_SCHEMASPACE}`\r\n          );\r\n          break;\r\n        case 'openFile':\r\n          if (typeof args.payload !== 'string') {\r\n            return;\r\n          }\r\n          commands.execute(commandIDs.openDocManager, {\r\n            path: PipelineService.getWorkspaceRelativeNodePath(\r\n              contextRef.current.path,\r\n              args.payload\r\n            )\r\n          });\r\n          break;\r\n        case 'openComponentDef':\r\n          if (!args.payload || typeof args.payload !== 'object') {\r\n            return;\r\n          }\r\n          handleOpenComponentDef(\r\n            args.payload.componentId,\r\n            args.payload.componentSource\r\n          );\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    [\r\n      handleSubmission,\r\n      handleClearPipeline,\r\n      panelOpen,\r\n      shell,\r\n      commands,\r\n      handleOpenComponentDef\r\n    ]\r\n  );\r\n\r\n  const toolbar = {\r\n    leftBar: [\r\n      {\r\n        action: 'run',\r\n        label: 'Run Pipeline',\r\n        enable: true\r\n      },\r\n      {\r\n        action: 'save',\r\n        label: 'Save Pipeline',\r\n        enable: true,\r\n        iconEnabled: IconUtil.encode(savePipelineIcon),\r\n        iconDisabled: IconUtil.encode(savePipelineIcon)\r\n      },\r\n      {\r\n        action: 'export',\r\n        label: 'Export Pipeline',\r\n        enable: true,\r\n        iconEnabled: IconUtil.encode(exportPipelineIcon),\r\n        iconDisabled: IconUtil.encode(exportPipelineIcon)\r\n      },\r\n      {\r\n        action: 'clear',\r\n        label: 'Clear Pipeline',\r\n        enable: true,\r\n        iconEnabled: IconUtil.encode(clearPipelineIcon),\r\n        iconDisabled: IconUtil.encode(clearPipelineIcon)\r\n      },\r\n      {\r\n        action: 'openRuntimes',\r\n        label: 'Open Runtimes',\r\n        enable: true,\r\n        iconEnabled: IconUtil.encode(runtimesIcon),\r\n        iconDisabled: IconUtil.encode(runtimesIcon)\r\n      },\r\n      {\r\n        action: 'openRuntimeImages',\r\n        label: 'Open Runtime Images',\r\n        enable: true,\r\n        iconEnabled: IconUtil.encode(containerIcon),\r\n        iconDisabled: IconUtil.encode(containerIcon)\r\n      },\r\n      {\r\n        action: 'openComponentCatalogs',\r\n        label: 'Open Component Catalogs',\r\n        enable: true,\r\n        iconEnabled: IconUtil.encode(componentCatalogIcon),\r\n        iconDisabled: IconUtil.encode(componentCatalogIcon)\r\n      },\r\n      { action: 'undo', label: 'Undo' },\r\n      { action: 'redo', label: 'Redo' },\r\n      { action: 'cut', label: 'Cut' },\r\n      { action: 'copy', label: 'Copy' },\r\n      { action: 'paste', label: 'Paste' },\r\n      { action: 'createAutoComment', label: 'Add Comment', enable: true },\r\n      { action: 'deleteSelectedObjects', label: 'Delete' },\r\n      {\r\n        action: 'arrangeHorizontally',\r\n        label: 'Arrange Horizontally',\r\n        enable: true\r\n      },\r\n      {\r\n        action: 'arrangeVertically',\r\n        label: 'Arrange Vertically',\r\n        enable: true\r\n      }\r\n    ],\r\n    rightBar: [\r\n      {\r\n        action: '',\r\n        label: `Runtime: ${runtimeDisplayName}`,\r\n        incLabelWithIcon: 'before',\r\n        enable: false,\r\n        kind: 'tertiary'\r\n        // TODO: re-add icon\r\n        // iconEnabled: IconUtil.encode(ICON_MAP[type ?? ''] ?? pipelineIcon)\r\n      },\r\n      {\r\n        action: 'toggleOpenPanel',\r\n        label: panelOpen ? 'Close Panel' : 'Open Panel',\r\n        enable: true,\r\n        iconTypeOverride: panelOpen ? 'paletteOpen' : 'paletteClose'\r\n      }\r\n    ]\r\n  };\r\n\r\n  const [defaultPosition, setDefaultPosition] = useState(10);\r\n\r\n  const handleAddFileToPipeline = useCallback(\r\n    (location?: { x: number; y: number }) => {\r\n      const fileBrowser = browserFactory;\r\n      // Only add file to pipeline if it is currently in focus\r\n      if (shell.currentWidget?.id !== widgetId) {\r\n        return;\r\n      }\r\n\r\n      let failedAdd = 0;\r\n      let position = 0;\r\n      const missingXY = !location;\r\n\r\n      // if either x or y is undefined use the default coordinates\r\n      if (missingXY) {\r\n        position = defaultPosition;\r\n        location = {\r\n          x: 75,\r\n          y: 85\r\n        };\r\n      }\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any -- PipelineEditor API not typed\r\n      toArray(fileBrowser.selectedItems()).map((item: any): void => {\r\n        if (PipelineService.isSupportedNode(item)) {\r\n          item.op = PipelineService.getNodeType(item.path);\r\n          item.path = PipelineService.getPipelineRelativeNodePath(\r\n            contextRef.current.path,\r\n            item.path\r\n          );\r\n          item.x = (location?.x ?? 0) + position;\r\n          item.y = (location?.y ?? 0) + position;\r\n\r\n          const success = ref.current?.addFile({\r\n            nodeTemplate: {\r\n              op: item.op\r\n            },\r\n            offsetX: item.x,\r\n            offsetY: item.y,\r\n            path: item.path\r\n          });\r\n\r\n          if (success) {\r\n            position += 20;\r\n          } else {\r\n            // handle error\r\n          }\r\n        } else {\r\n          failedAdd++;\r\n        }\r\n      });\r\n      // update position if the default coordinates were used\r\n      if (missingXY) {\r\n        setDefaultPosition(position);\r\n      }\r\n\r\n      if (failedAdd) {\r\n        return showDialog({\r\n          title: 'Unsupported File(s)',\r\n          body: 'Only supported files (Notebooks, Python scripts, and R scripts) can be added to a pipeline.',\r\n          buttons: [Dialog.okButton()]\r\n        });\r\n      }\r\n\r\n      return;\r\n    },\r\n    [browserFactory, defaultPosition, shell, widgetId]\r\n  );\r\n\r\n  const handleDrop = async (e: IDragEvent): Promise<void> => {\r\n    handleAddFileToPipeline({ x: e.offsetX, y: e.offsetY });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleSignal = (): void => {\r\n      handleAddFileToPipeline();\r\n    };\r\n    addFileToPipelineSignal.connect(handleSignal);\r\n    return (): void => {\r\n      addFileToPipelineSignal.disconnect(handleSignal);\r\n    };\r\n  }, [addFileToPipelineSignal, handleAddFileToPipeline]);\r\n\r\n  if (loading || palette === undefined) {\r\n    return <div className=\"elyra-loader\"></div>;\r\n  }\r\n\r\n  const handleOpenCatalog = (): void => {\r\n    shell.activateById(`elyra-metadata:${COMPONENT_CATALOGS_SCHEMASPACE}`);\r\n  };\r\n\r\n  const handleOpenSettings = (): void => {\r\n    commands.execute('settingeditor:open', { query: 'Pipeline Editor' });\r\n  };\r\n\r\n  return (\r\n    <ExtendedThemeProvider theme={theme}>\r\n      <ToastContainer\r\n        position=\"bottom-center\"\r\n        autoClose={30000}\r\n        hideProgressBar\r\n        closeOnClick={false}\r\n        className=\"elyra-PipelineEditor-toast\"\r\n        draggable={false}\r\n        theme=\"colored\"\r\n      />\r\n      <Dropzone onDrop={handleDrop}>\r\n        <PipelineEditor\r\n          ref={ref}\r\n          palette={palette}\r\n          pipelineProperties={palette.properties}\r\n          pipelineParameters={palette.parameters}\r\n          toolbar={toolbar}\r\n          pipeline={pipeline}\r\n          onAction={onAction}\r\n          onChange={onChange}\r\n          onDoubleClickNode={\r\n            doubleClickToOpenProperties ? undefined : onDoubleClick\r\n          }\r\n          onError={onError}\r\n          onFileRequested={onFileRequested}\r\n          onPropertiesUpdateRequested={onPropertiesUpdateRequested}\r\n          leftPalette={true}\r\n        >\r\n          {type === undefined ? (\r\n            <EmptyGenericPipeline onOpenSettings={handleOpenSettings} />\r\n          ) : (\r\n            <EmptyPlatformSpecificPipeline\r\n              onOpenCatalog={handleOpenCatalog}\r\n              onOpenSettings={handleOpenSettings}\r\n            />\r\n          )}\r\n        </PipelineEditor>\r\n      </Dropzone>\r\n    </ExtendedThemeProvider>\r\n  );\r\n};\r\n\r\nexport class PipelineEditorFactory extends ABCWidgetFactory<DocumentWidget> {\r\n  browserFactory: IDefaultFileBrowser;\r\n  shell: JupyterFrontEnd.IShell;\r\n  commands: CommandRegistry;\r\n  serviceManager: ServiceManager.IManager;\r\n  settings: ISettingRegistry.ISettings | undefined;\r\n  defaultRuntimeType: string;\r\n  content?: PipelineEditorWidget;\r\n\r\n  constructor(\r\n    options: Pick<\r\n      IPipelineEditorWidgetProps,\r\n      | 'shell'\r\n      | 'commands'\r\n      | 'browserFactory'\r\n      | 'serviceManager'\r\n      | 'settings'\r\n      | 'defaultRuntimeType'\r\n    > &\r\n      Pick<\r\n        DocumentRegistry.IWidgetFactoryOptions<DocumentWidget>,\r\n        'name' | 'fileTypes' | 'defaultFor'\r\n      >\r\n  ) {\r\n    super(options);\r\n    this.browserFactory = options.browserFactory;\r\n    this.shell = options.shell;\r\n    this.commands = options.commands;\r\n    this.settings = options.settings;\r\n    this.serviceManager = options.serviceManager;\r\n    this.defaultRuntimeType = options.defaultRuntimeType;\r\n  }\r\n\r\n  get addFileToPipelineSignal() {\r\n    return this.content?.addFileToPipelineSignal;\r\n  }\r\n\r\n  get refreshPaletteSignal() {\r\n    return this.content?.refreshPaletteSignal;\r\n  }\r\n\r\n  protected createNewWidget(context: DocumentRegistry.Context): DocumentWidget {\r\n    // Creates a blank widget with a DocumentWidget wrapper\r\n    const props: IPipelineEditorWidgetProps = {\r\n      shell: this.shell,\r\n      commands: this.commands,\r\n      browserFactory: this.browserFactory,\r\n      context: context,\r\n      settings: this.settings,\r\n      defaultRuntimeType: this.defaultRuntimeType,\r\n      serviceManager: this.serviceManager\r\n    };\r\n    this.content = new PipelineEditorWidget(props);\r\n\r\n    const widget = new DocumentWidget({ content: this.content, context });\r\n    widget.addClass(PIPELINE_CLASS);\r\n    widget.title.icon = pipelineIcon;\r\n    return widget;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nimport { IParameterProps, ParameterInputForm } from './ParameterInputForm';\r\n\r\nimport { IRuntimeType } from './PipelineService';\r\nimport { IRuntimeData } from './runtime-utils';\r\nimport RuntimeConfigSelect from './RuntimeConfigSelect';\r\n\r\ninterface IFileTypeSelectProps {\r\n  fileTypes: { display_name: string; id: string }[];\r\n}\r\n\r\nconst FileTypeSelect: React.FC<IFileTypeSelectProps> = ({ fileTypes }) => {\r\n  return (\r\n    <>\r\n      <label htmlFor=\"pipeline_filetype\">Export Pipeline as:</label>\r\n      <br />\r\n      <select\r\n        id=\"pipeline_filetype\"\r\n        name=\"pipeline_filetype\"\r\n        className=\"elyra-form-export-filetype\"\r\n        data-form-required\r\n      >\r\n        {fileTypes.map((f) => (\r\n          <option key={f.id} value={f.id}>\r\n            {f.display_name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </>\r\n  );\r\n};\r\n\r\ninterface IProps extends IParameterProps {\r\n  runtimeData: IRuntimeData;\r\n  runtimeTypeInfo: IRuntimeType[];\r\n  pipelineType?: string;\r\n  exportName: string;\r\n}\r\n\r\nexport const PipelineExportDialog: React.FC<IProps> = ({\r\n  runtimeData,\r\n  runtimeTypeInfo,\r\n  pipelineType,\r\n  exportName,\r\n  parameters\r\n}) => {\r\n  return (\r\n    <form className=\"elyra-dialog-form\">\r\n      <RuntimeConfigSelect\r\n        runtimeData={runtimeData}\r\n        pipelineType={pipelineType}\r\n      >\r\n        {(platform): JSX.Element => {\r\n          const info = runtimeTypeInfo.find((i) => i.id === platform);\r\n          return <FileTypeSelect fileTypes={info?.export_file_types ?? []} />;\r\n        }}\r\n      </RuntimeConfigSelect>\r\n      <label htmlFor=\"export_name\">Export Filename:</label>\r\n      <br />\r\n      <input\r\n        type=\"text\"\r\n        id=\"export_name\"\r\n        name=\"export_name\"\r\n        defaultValue={exportName}\r\n        data-form-required\r\n      />\r\n      <br />\r\n      <br />\r\n      <input\r\n        type=\"checkbox\"\r\n        className=\"elyra-Dialog-checkbox\"\r\n        id=\"overwrite\"\r\n        name=\"overwrite\"\r\n      />\r\n      <label htmlFor=\"overwrite\">Replace if file already exists</label>\r\n      <br />\r\n      <br />\r\n      <ParameterInputForm parameters={parameters} />\r\n    </form>\r\n  );\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {\r\n  IDictionary,\r\n  IElyraResource,\r\n  IMetadataResource,\r\n  ISchemaResource,\r\n  MetadataService,\r\n  RequestHandler\r\n} from '@elyra/services';\r\nimport { GenericObjectType, RequestErrors } from '@elyra/ui-components';\r\n\r\nimport { Dialog, showDialog } from '@jupyterlab/apputils';\r\nimport { PathExt } from '@jupyterlab/coreutils';\r\n\r\nimport * as React from 'react';\r\n\r\nimport { IRuntimeComponentNodeType } from './pipeline-hooks';\r\n\r\nexport const KFP_SCHEMA = 'kfp';\r\nexport const RUNTIMES_SCHEMASPACE = 'runtimes';\r\nexport const RUNTIME_IMAGES_SCHEMASPACE = 'runtime-images';\r\nexport const COMPONENT_CATALOGS_SCHEMASPACE = 'component-catalogs';\r\n\r\nexport interface IPipelineExportBody {\r\n  pipeline: IPipelineResource;\r\n  export_format: string;\r\n  export_path: string;\r\n  overwrite: boolean;\r\n}\r\n\r\nexport interface IPipelineResource extends IElyraResource {\r\n  primary_pipeline: string;\r\n  pipelines: Array<{\r\n    id: string;\r\n    name?: string;\r\n    nodes?: Array<IDictionary<unknown>>;\r\n    runtime?: string;\r\n    runtime_config?: IDictionary<unknown>;\r\n  }>;\r\n}\r\n\r\nexport interface IPipelineScheduleResponse {\r\n  run_url: string;\r\n  git_url: string;\r\n  platform: string;\r\n  object_storage_url: string;\r\n  object_storage_path: string;\r\n}\r\n\r\nexport interface IRuntimeSchema extends ISchemaResource {\r\n  runtime_type: string;\r\n}\r\n\r\ninterface IComponentDef {\r\n  content: string;\r\n  mimeType: string;\r\n}\r\n\r\nenum ContentType {\r\n  notebook = 'execute-notebook-node',\r\n  python = 'execute-python-node',\r\n  r = 'execute-r-node',\r\n  other = 'other'\r\n}\r\n\r\nconst CONTENT_TYPE_MAPPER: Map<string, ContentType> = new Map([\r\n  ['.py', ContentType.python],\r\n  ['.ipynb', ContentType.notebook],\r\n  ['.r', ContentType.r]\r\n]);\r\n\r\nexport interface IRuntimeType extends IElyraResource {\r\n  runtime_enabled: boolean;\r\n  id: string;\r\n  display_name: string;\r\n  icon: string;\r\n  export_file_types: { id: string; display_name: string }[];\r\n}\r\n\r\nexport interface IRuntimesTypesResponse extends IElyraResource {\r\n  runtime_types: IRuntimeType[];\r\n}\r\n\r\nexport class PipelineService {\r\n  /**\r\n   * Returns a list of resources corresponding to each active runtime-type.\r\n   */\r\n  static async getRuntimeTypes(): Promise<IRuntimeType[]> {\r\n    const res = await RequestHandler.makeGetRequest<IRuntimesTypesResponse>(\r\n      'elyra/pipeline/runtimes/types'\r\n    );\r\n    if (!res) {\r\n      return [];\r\n    }\r\n    return res.runtime_types.sort((a, b) => a.id.localeCompare(b.id));\r\n  }\r\n\r\n  /**\r\n   * Returns a list of external runtime configurations available as\r\n   * `runtimes metadata`. This is used to submit the pipeline to be\r\n   * executed on these runtimes.\r\n   */\r\n  static async getRuntimes(): Promise<IMetadataResource[] | undefined> {\r\n    return MetadataService.getMetadata(RUNTIMES_SCHEMASPACE);\r\n  }\r\n\r\n  /**\r\n   * Returns a list of runtime schema\r\n   */\r\n  static async getRuntimesSchema(): Promise<IRuntimeSchema[] | undefined> {\r\n    return MetadataService.getSchema(RUNTIMES_SCHEMASPACE).then((schema) => {\r\n      if (!schema) {\r\n        return;\r\n      }\r\n\r\n      return schema as IRuntimeSchema[];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Return a list of configured container images that are used as runtimes environments\r\n   * to run the pipeline nodes.\r\n   */\r\n  static async getRuntimeImages(): Promise<IDictionary<string> | undefined> {\r\n    try {\r\n      let runtimeImages = await MetadataService.getMetadata('runtime-images');\r\n\r\n      if (!runtimeImages?.length) {\r\n        await RequestErrors.noMetadataError('runtime image');\r\n        return;\r\n      }\r\n\r\n      runtimeImages = runtimeImages?.sort(\r\n        (a, b) => 0 - (a.name > b.name ? -1 : 1)\r\n      );\r\n\r\n      const images: IDictionary<string> = {};\r\n      for (const image in runtimeImages) {\r\n        const imageName = (\r\n          runtimeImages[image].metadata as { image_name: string }\r\n        ).image_name;\r\n        images[imageName] = runtimeImages[image].display_name;\r\n      }\r\n      return images;\r\n    } catch (error) {\r\n      Promise.reject(error);\r\n      return;\r\n    }\r\n  }\r\n\r\n  static async getComponentDef(\r\n    type = 'local',\r\n    componentID: string\r\n  ): Promise<IComponentDef | undefined> {\r\n    return await RequestHandler.makeGetRequest<IComponentDef>(\r\n      `elyra/pipeline/components/${type}/${componentID}`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Submit a request to refresh the component cache. If catalogName is given\r\n   * only refreshes the given catalog\r\n   *\r\n   * @param catalogName\r\n   */\r\n  static async refreshComponentsCache(catalogName?: string): Promise<void> {\r\n    return await RequestHandler.makePutRequest(\r\n      `elyra/pipeline/components/cache${catalogName ? '/' + catalogName : ''}`,\r\n      JSON.stringify({ action: 'refresh' })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Creates a Dialog for passing to makeServerRequest\r\n   */\r\n  static getWaitDialog(\r\n    title = 'Making server request...',\r\n    body = 'This may take some time'\r\n  ): Dialog<void> {\r\n    return new Dialog({\r\n      title: title,\r\n      body: body,\r\n      buttons: [Dialog.okButton()]\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Submit the pipeline to be executed on an external runtime (e.g. Kbeflow Pipelines)\r\n   *\r\n   * @param pipeline\r\n   * @param runtimeName\r\n   */\r\n  static async submitPipeline(\r\n    pipeline: GenericObjectType,\r\n    runtimeName: string\r\n  ): Promise<void> {\r\n    return RequestHandler.makePostRequest<IPipelineScheduleResponse>(\r\n      'elyra/pipeline/schedule',\r\n      JSON.stringify(pipeline),\r\n      this.getWaitDialog('Packaging and submitting pipeline ...')\r\n    ).then(async (response) => {\r\n      if (!response) {\r\n        return;\r\n      }\r\n      let dialogTitle;\r\n      let dialogBody;\r\n      if (response['run_url']) {\r\n        // pipeline executed remotely in a runtime of choice\r\n        dialogTitle = 'Job submission to ' + runtimeName + ' succeeded';\r\n        dialogBody = (\r\n          <p>\r\n            {response['platform'] === 'APACHE_AIRFLOW' ? (\r\n              <p>\r\n                Apache Airflow DAG has been pushed to the{' '}\r\n                <a\r\n                  href={response['git_url']}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  Git repository.\r\n                </a>\r\n                <br />\r\n              </p>\r\n            ) : null}\r\n            Check the status of your job at{' '}\r\n            <a\r\n              href={response['run_url']}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Run Details.\r\n            </a>\r\n            {response['object_storage_path'] !== null ? (\r\n              <p>\r\n                The results and outputs are in the{' '}\r\n                {response['object_storage_path']} working directory in{' '}\r\n                <a\r\n                  href={response['object_storage_url']}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  object storage\r\n                </a>\r\n                .\r\n              </p>\r\n            ) : null}\r\n            <br />\r\n          </p>\r\n        );\r\n      } else {\r\n        // pipeline executed in-place locally\r\n        dialogTitle = 'Job execution succeeded';\r\n        dialogBody = (\r\n          <p>Your job has been executed in-place in your local environment.</p>\r\n        );\r\n      }\r\n\r\n      await showDialog({\r\n        title: dialogTitle,\r\n        body: dialogBody,\r\n        buttons: [Dialog.okButton()]\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Export a pipeline to different formats (e.g. DSL, YAML, etc). These formats\r\n   * are understood by a given runtime.\r\n   *\r\n   * @param pipeline\r\n   * @param pipeline_export_format\r\n   * @param pipeline_export_path\r\n   * @param overwrite\r\n   */\r\n  static async exportPipeline(\r\n    pipeline: GenericObjectType,\r\n    pipeline_export_format: string,\r\n    pipeline_export_path: string,\r\n    overwrite: boolean\r\n  ): Promise<void> {\r\n    console.log(\r\n      'Exporting pipeline to [' + pipeline_export_format + '] format'\r\n    );\r\n\r\n    console.log('Overwriting existing file: ' + overwrite);\r\n\r\n    const body = {\r\n      pipeline: pipeline,\r\n      export_format: pipeline_export_format,\r\n      export_path: pipeline_export_path,\r\n      overwrite: overwrite\r\n    };\r\n\r\n    return RequestHandler.makePostRequest<IPipelineExportBody>(\r\n      'elyra/pipeline/export',\r\n      JSON.stringify(body),\r\n      this.getWaitDialog('Generating pipeline artifacts ...')\r\n    ).then(async (response) => {\r\n      if (!response) {\r\n        return;\r\n      }\r\n      await showDialog({\r\n        title: 'Pipeline export succeeded',\r\n        body: <p>Exported file: {response.export_path} </p>,\r\n        buttons: [Dialog.okButton()]\r\n      });\r\n    });\r\n  }\r\n\r\n  static getNodeType(filepath: string): string {\r\n    const extension: string = PathExt.extname(filepath);\r\n    const type: string = CONTENT_TYPE_MAPPER.get(extension)!;\r\n\r\n    // TODO: throw error when file extension is not supported?\r\n    return type;\r\n  }\r\n\r\n  /**\r\n   * Check if a given file is allowed to be added to the pipeline\r\n   * @param item\r\n   */\r\n  static isSupportedNode(file: { path: string }): boolean {\r\n    if (PipelineService.getNodeType(file.path)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  static getPipelineRelativeNodePath(\r\n    pipelinePath: string,\r\n    nodePath: string\r\n  ): string {\r\n    const relativePath: string = PathExt.relative(\r\n      PathExt.dirname(pipelinePath),\r\n      nodePath\r\n    );\r\n    return relativePath;\r\n  }\r\n\r\n  static getWorkspaceRelativeNodePath(\r\n    pipelinePath: string,\r\n    nodePath: string\r\n  ): string {\r\n    // since resolve returns an \"absolute\" path we need to strip off the leading '/'\r\n    const workspacePath: string = PathExt.resolve(\r\n      PathExt.dirname(pipelinePath),\r\n      nodePath\r\n    );\r\n    return workspacePath;\r\n  }\r\n\r\n  static setNodePathsRelativeToWorkspace(\r\n    pipeline: GenericObjectType,\r\n    paletteNodes: IRuntimeComponentNodeType[],\r\n    pipelinePath: string\r\n  ): GenericObjectType {\r\n    for (const node of pipeline.nodes) {\r\n      const nodeDef = paletteNodes.find((n) => {\r\n        return n.op === node.op;\r\n      });\r\n      const parameters =\r\n        nodeDef?.app_data.properties?.properties.component_parameters\r\n          .properties;\r\n      for (const param in parameters) {\r\n        if (parameters[param].uihints?.['ui:widget'] === 'file') {\r\n          node.app_data.component_parameters[param] =\r\n            this.getWorkspaceRelativeNodePath(\r\n              pipelinePath,\r\n              node.app_data.component_parameters[param]\r\n            );\r\n        } else if (\r\n          node.app_data.component_parameters[param]?.widget === 'file'\r\n        ) {\r\n          node.app_data.component_parameters[param].value =\r\n            this.getWorkspaceRelativeNodePath(\r\n              pipelinePath,\r\n              node.app_data.component_parameters[param].value\r\n            );\r\n        }\r\n      }\r\n    }\r\n    return pipeline;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nimport { IParameterProps, ParameterInputForm } from './ParameterInputForm';\r\n\r\nimport { IRuntimeData } from './runtime-utils';\r\nimport RuntimeConfigSelect from './RuntimeConfigSelect';\r\n\r\ninterface IProps extends IParameterProps {\r\n  name: string;\r\n  runtimeData: IRuntimeData;\r\n  pipelineType?: string;\r\n}\r\n\r\nexport const PipelineSubmissionDialog: React.FC<IProps> = ({\r\n  name,\r\n  runtimeData,\r\n  pipelineType,\r\n  parameters\r\n}) => {\r\n  return (\r\n    <form className=\"elyra-dialog-form\">\r\n      <label htmlFor=\"pipeline_name\">Pipeline Name:</label>\r\n      <br />\r\n      <input\r\n        type=\"text\"\r\n        id=\"pipeline_name\"\r\n        name=\"pipeline_name\"\r\n        defaultValue={name}\r\n        data-form-required\r\n      />\r\n      <br />\r\n      <br />\r\n      <RuntimeConfigSelect\r\n        runtimeData={runtimeData}\r\n        pipelineType={pipelineType}\r\n      />\r\n      <ParameterInputForm parameters={parameters} />\r\n    </form>\r\n  );\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nimport { IRuntimeData } from './runtime-utils';\r\n\r\nconst RUN_LOCALLY_ID = '__elyra_local__';\r\n\r\ninterface IProps {\r\n  runtimeData: IRuntimeData;\r\n  pipelineType?: string;\r\n  children?(platform: string): JSX.Element;\r\n}\r\n\r\nconst RuntimeConfigSelect: React.FC<IProps> = ({\r\n  runtimeData: { platforms, allowLocal },\r\n  pipelineType,\r\n  children\r\n}) => {\r\n  const filteredPlatforms = platforms.filter((p) => p.configs.length > 0);\r\n  if (allowLocal) {\r\n    filteredPlatforms.unshift({\r\n      id: RUN_LOCALLY_ID,\r\n      displayName: 'Run in-place locally',\r\n      configs: []\r\n    });\r\n  }\r\n\r\n  // NOTE: platform is only selectable if pipelineType is undefined\r\n  const [platform, setPlatform] = React.useState(\r\n    pipelineType ?? filteredPlatforms[0]?.id\r\n  );\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLSelectElement>): void => {\r\n    setPlatform(e.target.value);\r\n  };\r\n\r\n  const configs =\r\n    filteredPlatforms.find((p) => p.id === platform)?.configs ?? [];\r\n  configs.sort((a, b) => a.displayName.localeCompare(b.displayName));\r\n\r\n  return (\r\n    <>\r\n      {!pipelineType && (\r\n        <div>\r\n          <label htmlFor=\"runtime_platform\">Runtime Platform:</label>\r\n          <br />\r\n          <select\r\n            id=\"runtime_platform\"\r\n            name=\"runtime_platform\"\r\n            className=\"elyra-form-runtime-platform\"\r\n            value={platform}\r\n            onChange={handleChange}\r\n          >\r\n            {filteredPlatforms.map((p) => (\r\n              <option key={p.id} value={p.id}>\r\n                {p.displayName}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      )}\r\n\r\n      {/* must be present in dom at initial render */}\r\n      <div style={{ display: platform === RUN_LOCALLY_ID ? 'none' : 'block' }}>\r\n        <label htmlFor=\"runtime_config\">Runtime Configuration:</label>\r\n        <br />\r\n        <select\r\n          id=\"runtime_config\"\r\n          name=\"runtime_config\"\r\n          className=\"elyra-form-runtime-config\"\r\n        >\r\n          {configs.map((c) => (\r\n            <option key={c.id} value={c.id}>\r\n              {c.displayName}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      {children?.(platform)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RuntimeConfigSelect;\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {\r\n  MetadataWidget,\r\n  IMetadataWidgetProps,\r\n  MetadataDisplay,\r\n  IMetadataDisplayProps\r\n} from '@elyra/metadata-common';\r\nimport { IMetadataResource } from '@elyra/services';\r\n\r\nimport React from 'react';\r\n\r\nexport const RUNTIME_IMAGES_SCHEMASPACE = 'runtime-images';\r\n\r\nconst RUNTIME_IMAGES_CLASS = 'elyra-metadata-runtime-images';\r\n\r\nconst getLinkFromImageName = (imageName: string): string => {\r\n  let hostname = '';\r\n  const fqinParts = imageName.split('/');\r\n\r\n  if (\r\n    fqinParts[0].includes('.') ||\r\n    fqinParts[0].includes(':') ||\r\n    fqinParts[0].includes('localhost')\r\n  ) {\r\n    hostname = fqinParts[0];\r\n    imageName = fqinParts.slice(1).join('/');\r\n  }\r\n\r\n  if (!hostname || hostname.includes('docker.io')) {\r\n    hostname = 'hub.docker.com/r';\r\n  }\r\n\r\n  const imageRepo = imageName.split(':')[0];\r\n\r\n  return `https://${hostname}/${imageRepo}`;\r\n};\r\n\r\n/**\r\n * A React Component for displaying the runtime images list.\r\n */\r\nclass RuntimeImagesDisplay extends MetadataDisplay<IMetadataDisplayProps> {\r\n  renderExpandableContent(metadata: IMetadataResource): JSX.Element {\r\n    const imageName = metadata.metadata.image_name as string;\r\n    return (\r\n      <div>\r\n        <h6>Container Image</h6>\r\n        <a\r\n          href={getLinkFromImageName(imageName)}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer noopener\"\r\n        >\r\n          {imageName}\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * A widget for displaying runtime images.\r\n */\r\nexport class RuntimeImagesWidget extends MetadataWidget {\r\n  constructor(props: IMetadataWidgetProps) {\r\n    super(props);\r\n  }\r\n\r\n  renderDisplay(metadata: IMetadataResource[]): React.ReactElement {\r\n    if (Array.isArray(metadata) && !metadata.length) {\r\n      // Empty metadata\r\n      return (\r\n        <div>\r\n          <br />\r\n          <h6 className=\"elyra-no-metadata-msg\">\r\n            Click the + button to add {this.props.display_name.toLowerCase()}\r\n          </h6>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <RuntimeImagesDisplay\r\n        metadata={metadata}\r\n        updateMetadata={this.updateMetadata}\r\n        openMetadataEditor={this.openMetadataEditor}\r\n        schemaspace={RUNTIME_IMAGES_SCHEMASPACE}\r\n        sortMetadata={true}\r\n        className={RUNTIME_IMAGES_CLASS}\r\n        labelName={(): string => {\r\n          return 'runtime image';\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport {\r\n  MetadataWidget,\r\n  IMetadataWidgetProps,\r\n  MetadataDisplay,\r\n  IMetadataDisplayProps,\r\n  IOpenMetadataEditorArgs\r\n} from '@elyra/metadata-common';\r\nimport {\r\n  IMetadataResource,\r\n  ISchemaResource,\r\n  MetadataService\r\n} from '@elyra/services';\r\nimport {\r\n  GenericObjectType,\r\n  IErrorResponse,\r\n  RequestErrors\r\n} from '@elyra/ui-components';\r\nimport React from 'react';\r\n\r\nimport {\r\n  IRuntimeType,\r\n  PipelineService,\r\n  RUNTIMES_SCHEMASPACE\r\n} from './PipelineService';\r\n\r\nconst RUNTIMES_METADATA_CLASS = 'elyra-metadata-runtimes';\r\n\r\ninterface IRuntimeSchema extends ISchemaResource {\r\n  runtime_type: string;\r\n}\r\n\r\nconst addTrailingSlash = (url: string): string => {\r\n  return url.endsWith('/') ? url : url + '/';\r\n};\r\n\r\nconst getGithubURLFromAPI = (apiEndpoint: string): string => {\r\n  // For Enterprise Server the api is located at <hostname>/api/\r\n  let baseURL = new URL(apiEndpoint).origin;\r\n\r\n  // For Github.com and Github AE the api is located at api.<hostname>\r\n  baseURL = baseURL.replace('api.', '');\r\n\r\n  return addTrailingSlash(baseURL);\r\n};\r\n\r\nexport interface IRuntimesDisplayProps extends IMetadataDisplayProps {\r\n  metadata: IMetadataResource[];\r\n  openMetadataEditor: (args: IOpenMetadataEditorArgs) => void;\r\n  updateMetadata: () => void;\r\n  schemaspace: string;\r\n  sortMetadata: boolean;\r\n  className: string;\r\n  schemas?: ISchemaResource[];\r\n  titleContext?: string;\r\n  appendToTitle?: boolean;\r\n}\r\n\r\n/**\r\n * A React Component for displaying the runtimes list.\r\n */\r\n\r\nclass RuntimesDisplay extends MetadataDisplay<IRuntimesDisplayProps> {\r\n  renderExpandableContent(metadata: IMetadataResource): JSX.Element {\r\n    let apiEndpoint = addTrailingSlash(\r\n      metadata.metadata.api_endpoint as string\r\n    );\r\n    let cosEndpoint = addTrailingSlash(\r\n      metadata.metadata.cos_endpoint as string\r\n    );\r\n\r\n    let githubRepoElement: JSX.Element | null = null;\r\n    let metadata_props: GenericObjectType | null = null;\r\n\r\n    for (const schema of this.props.schemas ?? []) {\r\n      if (schema.name === metadata.schema_name) {\r\n        const metadata = schema.properties?.metadata as\r\n          | GenericObjectType\r\n          | undefined;\r\n        metadata_props = metadata?.properties;\r\n      }\r\n    }\r\n\r\n    if (metadata.schema_name === 'airflow' && metadata_props) {\r\n      const githubRepoUrl =\r\n        getGithubURLFromAPI(metadata.metadata.github_api_endpoint as string) +\r\n        metadata.metadata.github_repo +\r\n        '/tree/' +\r\n        metadata.metadata.github_branch +\r\n        '/';\r\n      githubRepoElement = (\r\n        <span>\r\n          <h6>{metadata_props.github_repo.title}</h6>\r\n          <a href={githubRepoUrl} target=\"_blank\" rel=\"noreferrer noopener\">\r\n            {githubRepoUrl}\r\n          </a>\r\n          <br />\r\n          <br />\r\n        </span>\r\n      );\r\n    }\r\n    if (metadata.schema_name === 'kfp') {\r\n      if (metadata.metadata.public_api_endpoint) {\r\n        // user specified a public API endpoint. use it instead of the API endpoint\r\n        apiEndpoint = addTrailingSlash(\r\n          metadata.metadata.public_api_endpoint as string\r\n        );\r\n      }\r\n    }\r\n\r\n    if (metadata.metadata.public_cos_endpoint) {\r\n      // user specified a public COS endpoint. use it instead of the API endpoint\r\n      cosEndpoint = addTrailingSlash(\r\n        metadata.metadata.public_cos_endpoint as string\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <h6>\r\n          {metadata_props ? metadata_props.api_endpoint.title : 'API Endpoint'}\r\n        </h6>\r\n        <a href={apiEndpoint} target=\"_blank\" rel=\"noreferrer noopener\">\r\n          {apiEndpoint}\r\n        </a>\r\n        <br />\r\n        <br />\r\n        {githubRepoElement}\r\n        <h6>\r\n          {metadata_props\r\n            ? metadata_props.cos_endpoint.title\r\n            : 'Cloud Object Storage'}\r\n        </h6>\r\n        <a href={cosEndpoint} target=\"_blank\" rel=\"noreferrer noopener\">\r\n          {cosEndpoint}\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * A widget for displaying runtimes.\r\n */\r\nexport class RuntimesWidget extends MetadataWidget {\r\n  runtimeTypes: IRuntimeType[] = [];\r\n\r\n  constructor(props: IMetadataWidgetProps) {\r\n    super(props);\r\n  }\r\n\r\n  async fetchMetadata(): Promise<IMetadataResource[] | undefined> {\r\n    return await PipelineService.getRuntimes().catch(async (error) => {\r\n      await RequestErrors.serverError(error);\r\n      return [];\r\n    });\r\n  }\r\n\r\n  async getSchemas(): Promise<void> {\r\n    try {\r\n      const schemas = await MetadataService.getSchema(this.props.schemaspace);\r\n      if (!schemas) {\r\n        return;\r\n      }\r\n      this.runtimeTypes = await PipelineService.getRuntimeTypes();\r\n      const sortedSchema = schemas.sort((a, b) =>\r\n        (a.title ?? '').localeCompare(b.title ?? '')\r\n      );\r\n      this.schemas = sortedSchema.filter((schema) => {\r\n        const runtimeSchema = schema as IRuntimeSchema;\r\n        return !!this.runtimeTypes.find(\r\n          (r) => r.id === runtimeSchema.runtime_type && r.runtime_enabled\r\n        );\r\n      });\r\n      if (this.schemas?.length ?? 0 > 1) {\r\n        for (const schema of this.schemas ?? []) {\r\n          this.props.app.contextMenu.addItem({\r\n            selector: `#${this.props.schemaspace} .elyra-metadataHeader-addButton`,\r\n            command: 'elyra-metadata-editor:open',\r\n            args: {\r\n              onSave: this.updateMetadata,\r\n              schemaspace: this.props.schemaspace,\r\n              schema: schema.name,\r\n              title: schema.title,\r\n              titleContext: this.props.titleContext,\r\n              appendToTitle: this.props.appendToTitle\r\n            } as GenericObjectType\r\n          });\r\n        }\r\n      }\r\n      this.update();\r\n    } catch (error) {\r\n      await RequestErrors.serverError(error as IErrorResponse);\r\n    }\r\n  }\r\n\r\n  private getSchemaTitle = (metadata: IMetadataResource): string => {\r\n    if (this.schemas) {\r\n      for (const schema of this.schemas) {\r\n        if (schema.name === metadata.schema_name) {\r\n          return schema.title ?? '';\r\n        }\r\n      }\r\n    }\r\n\r\n    return 'runtime configuration';\r\n  };\r\n\r\n  addMetadata(schema: string, titleContext?: string): void {\r\n    this.openMetadataEditor({\r\n      onSave: this.updateMetadata,\r\n      schemaspace: this.props.schemaspace,\r\n      schema: schema,\r\n      titleContext: titleContext\r\n    });\r\n  }\r\n\r\n  renderDisplay(metadata: IMetadataResource[]): React.ReactElement {\r\n    if (Array.isArray(metadata) && !metadata.length) {\r\n      // Empty metadata\r\n      return (\r\n        <div>\r\n          <br />\r\n          <h6 className=\"elyra-no-metadata-msg\">\r\n            Click the + button to add {this.props.display_name.toLowerCase()}\r\n          </h6>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const filteredMetadata = metadata.filter((m) => {\r\n      return !!this.runtimeTypes.find((r) => m.metadata?.runtime_type === r.id);\r\n    });\r\n\r\n    return (\r\n      <RuntimesDisplay\r\n        metadata={filteredMetadata}\r\n        updateMetadata={this.updateMetadata}\r\n        openMetadataEditor={this.openMetadataEditor}\r\n        schemaspace={RUNTIMES_SCHEMASPACE}\r\n        sortMetadata={true}\r\n        schemas={this.schemas}\r\n        className={RUNTIMES_METADATA_CLASS}\r\n        labelName={this.getSchemaTitle}\r\n        titleContext={this.props.titleContext}\r\n        appendToTitle={this.props.appendToTitle}\r\n      />\r\n    );\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { ContentParser } from '@elyra/services';\r\nimport {\r\n  GenericObjectType,\r\n  IErrorResponse,\r\n  RequestErrors,\r\n  showFormDialog\r\n} from '@elyra/ui-components';\r\nimport { Dialog, showDialog } from '@jupyterlab/apputils';\r\nimport { PathExt } from '@jupyterlab/coreutils';\r\nimport { DocumentRegistry, DocumentWidget } from '@jupyterlab/docregistry';\r\nimport { ToolbarButton } from '@jupyterlab/ui-components';\r\nimport { IDisposable } from '@lumino/disposable';\r\nimport * as React from 'react';\r\n\r\nimport { FileSubmissionDialog } from './FileSubmissionDialog';\r\nimport { formDialogWidget } from './formDialogWidget';\r\nimport { PipelineService, RUNTIMES_SCHEMASPACE } from './PipelineService';\r\nimport { createRuntimeData, getConfigDetails } from './runtime-utils';\r\nimport Utils from './utils';\r\n\r\n/**\r\n * Submit file button extension\r\n *  - Attach button to editor toolbar and launch a dialog requesting\r\n *  information about the remote location to where submit the file\r\n *  for execution\r\n */\r\n\r\nexport class SubmitFileButtonExtension<\r\n  T extends DocumentWidget,\r\n  U extends DocumentRegistry.IModel\r\n> implements DocumentRegistry.IWidgetExtension<T, U>\r\n{\r\n  showWidget = async (document: T): Promise<void> => {\r\n    const { context } = document;\r\n    if (context.model.dirty) {\r\n      const dialogResult = await showDialog({\r\n        title:\r\n          'This file contains unsaved changes. To run the file as pipeline the changes need to be saved.',\r\n        buttons: [\r\n          Dialog.cancelButton(),\r\n          Dialog.okButton({ label: 'Save and Submit' })\r\n        ]\r\n      });\r\n      if (dialogResult.button.accept === false) {\r\n        return;\r\n      }\r\n      await context.save();\r\n    }\r\n\r\n    try {\r\n      const env = await ContentParser.getEnvVars(context.path);\r\n\r\n      const runtimeTypes = await PipelineService.getRuntimeTypes();\r\n      const runtimes = await PipelineService.getRuntimes().then(\r\n        (runtimeList) => {\r\n          return runtimeList?.filter((runtime) => {\r\n            return (\r\n              !runtime.metadata.runtime_enabled &&\r\n              !!runtimeTypes.find((r) => runtime.metadata.runtime_type === r.id)\r\n            );\r\n          });\r\n        }\r\n      );\r\n\r\n      if (!runtimes) {\r\n        await RequestErrors.noMetadataError('runtime');\r\n        return;\r\n      }\r\n\r\n      const images = await PipelineService.getRuntimeImages();\r\n      const schema = await PipelineService.getRuntimesSchema();\r\n\r\n      if (!schema) {\r\n        await RequestErrors.noMetadataError('schema');\r\n        return;\r\n      }\r\n\r\n      if (!images) {\r\n        await RequestErrors.noMetadataError('runtime images');\r\n        return;\r\n      }\r\n\r\n      const runtimeData = createRuntimeData({ schema, runtimes });\r\n\r\n      if (!runtimeData.platforms.find((p) => p.configs.length > 0)) {\r\n        const res = await RequestErrors.noMetadataError(\r\n          'runtime',\r\n          `run file as pipeline.`\r\n        );\r\n\r\n        if (res.button.label.includes(RUNTIMES_SCHEMASPACE)) {\r\n          // Open the runtimes widget\r\n          Utils.getLabShell(document)?.activateById(\r\n            `elyra-metadata:${RUNTIMES_SCHEMASPACE}`\r\n          );\r\n        }\r\n        return;\r\n      }\r\n\r\n      let dependencyFileExtension = PathExt.extname(context.path);\r\n      if (dependencyFileExtension === '.ipynb') {\r\n        dependencyFileExtension = '.py';\r\n      }\r\n\r\n      const dialogOptions: Partial<Dialog.IOptions<GenericObjectType>> = {\r\n        title: 'Run file as pipeline',\r\n        body: formDialogWidget(\r\n          <FileSubmissionDialog\r\n            env={env}\r\n            dependencyFileExtension={dependencyFileExtension}\r\n            images={images}\r\n            runtimeData={runtimeData}\r\n          />\r\n        ),\r\n        buttons: [Dialog.cancelButton(), Dialog.okButton()]\r\n      };\r\n\r\n      const dialogResult = await showFormDialog(dialogOptions);\r\n\r\n      if (dialogResult.value === null) {\r\n        // When Cancel is clicked on the dialog, just return\r\n        return;\r\n      }\r\n\r\n      const {\r\n        runtime_config,\r\n        framework,\r\n        cpu,\r\n        cpu_limit,\r\n        gpu,\r\n        memory,\r\n        memory_limit,\r\n        dependency_include,\r\n        dependencies,\r\n        ...envObject\r\n      } = dialogResult.value;\r\n\r\n      const configDetails = getConfigDetails(runtimeData, runtime_config);\r\n\r\n      // prepare file submission details\r\n      const pipeline = Utils.generateSingleFilePipeline(\r\n        context.path,\r\n        configDetails,\r\n        framework,\r\n        dependency_include ? dependencies.split(',') : undefined,\r\n        envObject,\r\n        cpu,\r\n        cpu_limit,\r\n        gpu,\r\n        memory,\r\n        memory_limit\r\n      );\r\n\r\n      PipelineService.submitPipeline(\r\n        pipeline,\r\n        configDetails?.platform.displayName ?? ''\r\n      );\r\n    } catch (error) {\r\n      await RequestErrors.serverError(error as IErrorResponse);\r\n    }\r\n  };\r\n\r\n  createNew(editor: T): IDisposable {\r\n    // Create the toolbar button\r\n    const submitFileButton = new ToolbarButton({\r\n      label: 'Run as Pipeline',\r\n      onClick: () => this.showWidget(editor),\r\n      tooltip: 'Run file as batch'\r\n    });\r\n\r\n    // Add the toolbar button to the editor\r\n    editor.toolbar.insertItem(10, 'submitFile', submitFileButton);\r\n\r\n    // The ToolbarButton class implements `IDisposable`, so the\r\n    // button *is* the extension for the purposes of this method.\r\n    return submitFileButton;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { GenericObjectType } from '@elyra/ui-components';\r\nimport { ReactWidget, Dialog } from '@jupyterlab/apputils';\r\nimport { MessageLoop } from '@lumino/messaging';\r\nimport { Widget } from '@lumino/widgets';\r\n\r\nexport const formDialogWidget = (\r\n  dialogComponent: JSX.Element\r\n): Dialog.IBodyWidget<GenericObjectType> => {\r\n  const widget = ReactWidget.create(\r\n    dialogComponent\r\n  ) as Dialog.IBodyWidget<GenericObjectType>;\r\n\r\n  // Immediately update the body even though it has not yet attached in\r\n  // order to trigger a render of the DOM nodes from the React element.\r\n  MessageLoop.sendMessage(widget, Widget.Msg.UpdateRequest);\r\n\r\n  widget.getValue = (): GenericObjectType => {\r\n    const form = widget.node.querySelector('form');\r\n    const formValues: GenericObjectType = {};\r\n    for (const element of Object.values(\r\n      form?.elements ?? []\r\n    ) as HTMLInputElement[]) {\r\n      switch (element.type) {\r\n        case 'checkbox':\r\n          formValues[element.name] = element.checked;\r\n          break;\r\n        default:\r\n          formValues[element.name] = element.value;\r\n          break;\r\n      }\r\n    }\r\n    return formValues;\r\n  };\r\n\r\n  return widget;\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { PIPELINE_CURRENT_VERSION } from '@elyra/pipeline-editor';\r\nimport { RequestHandler } from '@elyra/services';\r\nimport {\r\n  containerIcon,\r\n  pipelineIcon,\r\n  RequestErrors,\r\n  runtimesIcon,\r\n  componentCatalogIcon\r\n} from '@elyra/ui-components';\r\n\r\nimport {\r\n  JupyterFrontEnd,\r\n  JupyterFrontEndPlugin,\r\n  ILayoutRestorer\r\n} from '@jupyterlab/application';\r\nimport { ICommandPalette, WidgetTracker } from '@jupyterlab/apputils';\r\nimport { DocumentWidget } from '@jupyterlab/docregistry';\r\nimport { IDefaultFileBrowser } from '@jupyterlab/filebrowser';\r\nimport { ILauncher } from '@jupyterlab/launcher';\r\nimport { IMainMenu } from '@jupyterlab/mainmenu';\r\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\r\nimport {\r\n  addIcon,\r\n  IRankedMenu,\r\n  LabIcon,\r\n  refreshIcon\r\n} from '@jupyterlab/ui-components';\r\n\r\nimport { ReadonlyJSONValue } from '@lumino/coreutils';\r\n\r\nimport {\r\n  COMPONENT_CATALOGS_SCHEMASPACE,\r\n  ComponentCatalogsWidget\r\n} from './ComponentCatalogsWidget';\r\nimport { PipelineEditorFactory, commandIDs } from './PipelineEditorWidget';\r\nimport {\r\n  IRuntimeType,\r\n  PipelineService,\r\n  RUNTIMES_SCHEMASPACE\r\n} from './PipelineService';\r\nimport {\r\n  RUNTIME_IMAGES_SCHEMASPACE,\r\n  RuntimeImagesWidget\r\n} from './RuntimeImagesWidget';\r\nimport { RuntimesWidget } from './RuntimesWidget';\r\nimport { SubmitFileButtonExtension } from './SubmitFileButtonExtension';\r\n\r\nimport '../style/index.css';\r\n\r\nconst PIPELINE_EDITOR = 'Pipeline Editor';\r\nconst PIPELINE = 'pipeline';\r\nconst PIPELINE_EDITOR_NAMESPACE = 'elyra-pipeline-editor-extension';\r\nconst PLUGIN_ID = '@elyra/pipeline-editor-extension:plugin';\r\n\r\nconst createRemoteIcon = async ({\r\n  name,\r\n  url\r\n}: {\r\n  name: string;\r\n  url: string;\r\n}): Promise<LabIcon> => {\r\n  const svgstr = await RequestHandler.makeServerRequest<string>(url, {\r\n    method: 'GET',\r\n    type: 'text'\r\n  });\r\n  if (!svgstr) {\r\n    throw new Error(`Failed to fetch icon from ${url}`);\r\n  }\r\n  return new LabIcon({ name, svgstr });\r\n};\r\n\r\nexport type ResolvedRuntimeType = IRuntimeType & { icon: LabIcon };\r\n\r\ninterface ICommandArgs {\r\n  isMenu?: string;\r\n  isPalette?: string;\r\n  isContextMenu?: string;\r\n  runtimeType?: ResolvedRuntimeType;\r\n}\r\n\r\nexport const getEmptyPipelineJson = (runtime_type: string | undefined) => {\r\n  return {\r\n    doc_type: 'pipeline',\r\n    version: '3.0',\r\n    json_schema:\r\n      'http://api.dataplatform.ibm.com/schemas/common-pipeline/pipeline-flow/pipeline-flow-v3-schema.json',\r\n    id: 'elyra-auto-generated-pipeline',\r\n    primary_pipeline: 'primary',\r\n    pipelines: [\r\n      {\r\n        id: 'primary',\r\n        nodes: [],\r\n        app_data: {\r\n          ui_data: {\r\n            comments: []\r\n          },\r\n          version: PIPELINE_CURRENT_VERSION,\r\n          runtime_type\r\n        },\r\n        runtime_ref: ''\r\n      }\r\n    ],\r\n    schemas: []\r\n  };\r\n};\r\n\r\n/**\r\n * Initialization data for the pipeline-editor-extension extension.\r\n */\r\nconst extension: JupyterFrontEndPlugin<void> = {\r\n  id: PIPELINE,\r\n  autoStart: true,\r\n  requires: [\r\n    ICommandPalette,\r\n    ILauncher,\r\n    IDefaultFileBrowser,\r\n    ILayoutRestorer,\r\n    IMainMenu,\r\n    ISettingRegistry\r\n  ],\r\n  activate: async (\r\n    app: JupyterFrontEnd,\r\n    palette: ICommandPalette,\r\n    launcher: ILauncher,\r\n    browserFactory: IDefaultFileBrowser,\r\n    restorer: ILayoutRestorer,\r\n    menu: IMainMenu,\r\n    registry: ISettingRegistry\r\n  ) => {\r\n    console.log('Elyra - pipeline-editor extension is activated!');\r\n\r\n    // Fetch the initial state of the settings.\r\n    const settings = await registry.load(PLUGIN_ID).catch((error) => {\r\n      console.log(error);\r\n      return undefined;\r\n    });\r\n\r\n    PipelineService.getRuntimeTypes()\r\n      .then(async (types) => {\r\n        const filteredTypes = types.filter((t) => t.runtime_enabled);\r\n        const promises = filteredTypes.map(async (t) => {\r\n          return {\r\n            ...t,\r\n            icon: await createRemoteIcon({\r\n              name: `elyra:platform:${t.id}`,\r\n              url: t.icon\r\n            })\r\n          };\r\n        });\r\n\r\n        const resolvedTypes = (await Promise.all(\r\n          promises\r\n        )) as ResolvedRuntimeType[];\r\n\r\n        // Set up new widget Factory for .pipeline files\r\n        const pipelineEditorFactory = new PipelineEditorFactory({\r\n          name: PIPELINE_EDITOR,\r\n          fileTypes: [PIPELINE],\r\n          defaultFor: [PIPELINE],\r\n          shell: app.shell,\r\n          commands: app.commands,\r\n          browserFactory: browserFactory,\r\n          serviceManager: app.serviceManager,\r\n          settings: settings,\r\n          defaultRuntimeType: resolvedTypes[0]?.id\r\n        });\r\n\r\n        // Add the default behavior of opening the widget for .pipeline files\r\n        app.docRegistry.addFileType(\r\n          {\r\n            name: PIPELINE,\r\n            displayName: 'Pipeline',\r\n            extensions: ['.pipeline'],\r\n            icon: pipelineIcon\r\n          },\r\n          ['JSON']\r\n        );\r\n        app.docRegistry.addWidgetFactory(pipelineEditorFactory);\r\n\r\n        const tracker = new WidgetTracker<DocumentWidget>({\r\n          namespace: PIPELINE_EDITOR_NAMESPACE\r\n        });\r\n\r\n        pipelineEditorFactory.widgetCreated.connect((_sender, widget) => {\r\n          void tracker.add(widget);\r\n\r\n          // Notify the widget tracker if restore data needs to update\r\n          widget.context.pathChanged.connect(() => {\r\n            void tracker.save(widget);\r\n          });\r\n        });\r\n\r\n        // Handle state restoration\r\n        void restorer.restore(tracker, {\r\n          command: commandIDs.openDocManager,\r\n          args: (widget) => ({\r\n            path: widget.context.path,\r\n            factory: PIPELINE_EDITOR\r\n          }),\r\n          name: (widget) => widget.context.path\r\n        });\r\n\r\n        // Add command to add file to pipeline\r\n        const addFileToPipelineCommand: string = commandIDs.addFileToPipeline;\r\n        app.commands.addCommand(addFileToPipelineCommand, {\r\n          label: 'Add File to Pipeline',\r\n          icon: addIcon,\r\n          execute: (args) => {\r\n            pipelineEditorFactory.addFileToPipelineSignal?.emit(args);\r\n          }\r\n        });\r\n        const refreshPaletteCommand: string = commandIDs.refreshPalette;\r\n        app.commands.addCommand(refreshPaletteCommand, {\r\n          label: 'Refresh Pipeline Palette',\r\n          icon: refreshIcon,\r\n          execute: (args) => {\r\n            pipelineEditorFactory.refreshPaletteSignal?.emit(args);\r\n          }\r\n        });\r\n        app.contextMenu.addItem({\r\n          selector: '[data-file-type=\"notebook\"]',\r\n          command: addFileToPipelineCommand\r\n        });\r\n        app.contextMenu.addItem({\r\n          selector: '[data-file-type=\"python\"]',\r\n          command: addFileToPipelineCommand\r\n        });\r\n        app.contextMenu.addItem({\r\n          selector: '[data-file-type=\"r\"]',\r\n          command: addFileToPipelineCommand\r\n        });\r\n\r\n        // Add an application command\r\n        const openPipelineEditorCommand: string = commandIDs.openPipelineEditor;\r\n        app.commands.addCommand(openPipelineEditorCommand, {\r\n          label: (args) => {\r\n            const commandArgs = args as ICommandArgs;\r\n            if (commandArgs.isPalette) {\r\n              return `New ${PIPELINE_EDITOR}`;\r\n            }\r\n            if (commandArgs.runtimeType?.id === 'LOCAL') {\r\n              const contextMenuPrefix = commandArgs.isContextMenu ? 'New ' : '';\r\n              return `${contextMenuPrefix}Generic ${PIPELINE_EDITOR}`;\r\n            }\r\n            if (commandArgs.isMenu) {\r\n              return `${commandArgs.runtimeType?.display_name} ${PIPELINE_EDITOR}`;\r\n            }\r\n            if (commandArgs.isContextMenu) {\r\n              return `New ${commandArgs.runtimeType?.display_name} ${PIPELINE_EDITOR}`;\r\n            }\r\n            return PIPELINE_EDITOR;\r\n          },\r\n          caption: (args) => {\r\n            const commandArgs = args as ICommandArgs;\r\n            if (commandArgs.runtimeType?.id === 'LOCAL') {\r\n              return `Generic ${PIPELINE_EDITOR}`;\r\n            }\r\n            return `${commandArgs.runtimeType?.display_name} ${PIPELINE_EDITOR}`;\r\n          },\r\n          iconLabel: (args) => {\r\n            const commandArgs = args as ICommandArgs;\r\n            if (commandArgs.isPalette) {\r\n              return '';\r\n            }\r\n            if (commandArgs.runtimeType?.id === 'LOCAL') {\r\n              return `Generic ${PIPELINE_EDITOR}`;\r\n            }\r\n            return `${commandArgs.runtimeType?.display_name} ${PIPELINE_EDITOR}`;\r\n          },\r\n          icon: (args) => {\r\n            const commandArgs = args as ICommandArgs;\r\n            if (commandArgs.isPalette) {\r\n              return undefined;\r\n            }\r\n            return commandArgs.runtimeType?.icon;\r\n          },\r\n          execute: (args) => {\r\n            const commandArgs = args as ICommandArgs;\r\n            // Creates blank file, then opens it in a new window\r\n            app.commands\r\n              .execute(commandIDs.newDocManager, {\r\n                type: 'file',\r\n                path: browserFactory.model.path,\r\n                ext: '.pipeline'\r\n              })\r\n              .then(async (model) => {\r\n                const platformId = commandArgs.runtimeType?.id;\r\n                const runtime_type =\r\n                  platformId === 'LOCAL' ? undefined : platformId;\r\n\r\n                const pipelineJson = getEmptyPipelineJson(runtime_type);\r\n                const newWidget = await app.commands.execute(\r\n                  commandIDs.openDocManager,\r\n                  {\r\n                    path: model.path,\r\n                    factory: PIPELINE_EDITOR\r\n                  }\r\n                );\r\n                newWidget.context.ready.then(() => {\r\n                  newWidget.context.model.fromJSON(pipelineJson);\r\n                  app.commands.execute(commandIDs.saveDocManager, {\r\n                    path: model.path\r\n                  });\r\n                });\r\n              });\r\n          }\r\n        });\r\n        // Add the command to the palette.\r\n        palette.addItem({\r\n          command: openPipelineEditorCommand,\r\n          args: { isPalette: true },\r\n          category: 'Elyra'\r\n        });\r\n\r\n        // Add the command to the launcher\r\n        if (launcher) {\r\n          const fileMenuItems: IRankedMenu.IItemOptions[] = [];\r\n\r\n          let contextMenuRank = 100;\r\n\r\n          app.contextMenu.addItem({\r\n            command: openPipelineEditorCommand,\r\n            type: 'separator',\r\n            selector: '.jp-DirListing-content',\r\n            rank: ++contextMenuRank\r\n          });\r\n\r\n          for (const t of resolvedTypes) {\r\n            launcher.add({\r\n              command: openPipelineEditorCommand,\r\n              category: 'Elyra',\r\n              args: { runtimeType: t as unknown as ReadonlyJSONValue },\r\n              rank: t.id === 'LOCAL' ? 1 : 2\r\n            });\r\n\r\n            fileMenuItems.push({\r\n              command: openPipelineEditorCommand,\r\n              args: {\r\n                runtimeType: t as unknown as ReadonlyJSONValue,\r\n                isMenu: true\r\n              },\r\n              rank: t.id === 'LOCAL' ? 90 : 91\r\n            });\r\n\r\n            app.contextMenu.addItem({\r\n              command: openPipelineEditorCommand,\r\n              args: {\r\n                runtimeType: t as unknown as ReadonlyJSONValue,\r\n                isContextMenu: true\r\n              },\r\n              selector: '.jp-DirListing-content',\r\n              rank: ++contextMenuRank\r\n            });\r\n          }\r\n\r\n          app.contextMenu.addItem({\r\n            command: openPipelineEditorCommand,\r\n            type: 'separator',\r\n            selector: '.jp-DirListing-content',\r\n            rank: ++contextMenuRank\r\n          });\r\n\r\n          menu.fileMenu.newMenu.addGroup(fileMenuItems);\r\n        }\r\n      })\r\n      .catch(async (error) => {\r\n        await RequestErrors.serverError(error);\r\n      });\r\n\r\n    // SubmitNotebookButtonExtension initialization code\r\n    const notebookButtonExtension = new SubmitFileButtonExtension();\r\n    app.docRegistry.addWidgetExtension('Notebook', notebookButtonExtension);\r\n    app.contextMenu.addItem({\r\n      selector: '.jp-Notebook',\r\n      command: commandIDs.submitNotebook,\r\n      rank: -0.5\r\n    });\r\n\r\n    // SubmitScriptButtonExtension initialization code\r\n    const scriptButtonExtension = new SubmitFileButtonExtension();\r\n    app.docRegistry.addWidgetExtension('Python Editor', scriptButtonExtension);\r\n    app.contextMenu.addItem({\r\n      selector: '.elyra-ScriptEditor',\r\n      command: commandIDs.submitScript,\r\n      rank: -0.5\r\n    });\r\n\r\n    app.docRegistry.addWidgetExtension('R Editor', scriptButtonExtension);\r\n    app.contextMenu.addItem({\r\n      selector: '.elyra-ScriptEditor',\r\n      command: commandIDs.submitScript,\r\n      rank: -0.5\r\n    });\r\n\r\n    const runtimesWidget = new RuntimesWidget({\r\n      app,\r\n      display_name: 'Runtimes',\r\n      schemaspace: RUNTIMES_SCHEMASPACE,\r\n      icon: runtimesIcon,\r\n      titleContext: 'runtime configuration',\r\n      addLabel: 'runtime configuration',\r\n      appendToTitle: true\r\n    });\r\n    const runtimesWidgetID = `elyra-metadata:${RUNTIMES_SCHEMASPACE}`;\r\n    runtimesWidget.id = runtimesWidgetID;\r\n    runtimesWidget.title.icon = runtimesIcon;\r\n    runtimesWidget.title.caption = 'Runtimes';\r\n\r\n    restorer.add(runtimesWidget, runtimesWidgetID);\r\n    app.shell.add(runtimesWidget, 'left', { rank: 950 });\r\n\r\n    const runtimeImagesWidget = new RuntimeImagesWidget({\r\n      app,\r\n      display_name: 'Runtime Images',\r\n      schemaspace: RUNTIME_IMAGES_SCHEMASPACE,\r\n      icon: containerIcon,\r\n      titleContext: '',\r\n      addLabel: 'runtime image'\r\n    });\r\n    const runtimeImagesWidgetID = `elyra-metadata:${RUNTIME_IMAGES_SCHEMASPACE}`;\r\n    runtimeImagesWidget.id = runtimeImagesWidgetID;\r\n    runtimeImagesWidget.title.icon = containerIcon;\r\n    runtimeImagesWidget.title.caption = 'Runtime Images';\r\n\r\n    restorer.add(runtimeImagesWidget, runtimeImagesWidgetID);\r\n    app.shell.add(runtimeImagesWidget, 'left', { rank: 951 });\r\n\r\n    const componentCatalogWidget = new ComponentCatalogsWidget({\r\n      app,\r\n      display_name: 'Component Catalogs', // TODO: This info should come from the server for all schemaspaces\r\n      schemaspace: COMPONENT_CATALOGS_SCHEMASPACE,\r\n      icon: componentCatalogIcon,\r\n      titleContext: '',\r\n      addLabel: 'component catalog',\r\n      refreshCallback: (): void => {\r\n        app.commands.execute(commandIDs.refreshPalette);\r\n      }\r\n    });\r\n    const componentCatalogWidgetID = `elyra-metadata:${COMPONENT_CATALOGS_SCHEMASPACE}`;\r\n    componentCatalogWidget.id = componentCatalogWidgetID;\r\n    componentCatalogWidget.title.icon = componentCatalogIcon;\r\n    componentCatalogWidget.title.caption = 'Component Catalogs';\r\n\r\n    restorer.add(componentCatalogWidget, componentCatalogWidgetID);\r\n    app.shell.add(componentCatalogWidget, 'left', { rank: 961 });\r\n  }\r\n};\r\nexport default extension;\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {\r\n  IMetadataResource,\r\n  MetadataService,\r\n  RequestHandler\r\n} from '@elyra/services';\r\nimport { GenericObjectType } from '@elyra/ui-components';\r\nimport { URLExt } from '@jupyterlab/coreutils';\r\nimport { ServerConnection } from '@jupyterlab/services';\r\nimport produce from 'immer';\r\nimport useSWR, { SWRResponse } from 'swr';\r\n\r\nimport { IRuntimeSchema, PipelineService } from './PipelineService';\r\n\r\nexport const GENERIC_CATEGORY_ID = 'Elyra';\r\n\r\ninterface IReturn<T> {\r\n  data?: T | undefined;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- SWR API\r\n  error?: SWRResponse<T, any>['error'];\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- SWR API\r\n  mutate?: SWRResponse<T, any>['mutate'];\r\n}\r\n\r\ntype IRuntimeImagesResponse = IRuntimeImage[];\r\n\r\nexport interface IRuntimeImage extends IMetadataResource {\r\n  metadata: {\r\n    image_name: string;\r\n  };\r\n}\r\n\r\nconst metadataFetcher = async <T extends IMetadataResource[]>(\r\n  key: string\r\n): Promise<T> => {\r\n  return (await MetadataService.getMetadata(key)) as T;\r\n};\r\n\r\nexport const useRuntimeImages = (\r\n  additionalRuntimeImages?: IRuntimeImage[]\r\n): IReturn<IRuntimeImagesResponse> => {\r\n  const { data, error } = useSWR<IRuntimeImagesResponse>(\r\n    'runtime-images',\r\n    metadataFetcher\r\n  );\r\n\r\n  let result: IRuntimeImage[] | undefined = data;\r\n\r\n  if (result && additionalRuntimeImages) {\r\n    // Sort and remove duplicates from additionalRuntimeImages\r\n    additionalRuntimeImages.sort((a, b) => 0 - (a.name > b.name ? -1 : 1));\r\n    additionalRuntimeImages = additionalRuntimeImages.filter(\r\n      (image, index, self) =>\r\n        index ===\r\n        self.findIndex(\r\n          (otherImage) =>\r\n            image.name === otherImage.name &&\r\n            image.display_name === otherImage.display_name &&\r\n            image.metadata.image_name === otherImage.metadata.image_name\r\n        )\r\n    );\r\n\r\n    // Remove previously added additionalRuntimeImages from result\r\n    result = result.filter(\r\n      (runtimeImage) =>\r\n        !additionalRuntimeImages ||\r\n        additionalRuntimeImages.findIndex(\r\n          (additionalRuntimeImage) =>\r\n            runtimeImage.name === additionalRuntimeImage.name &&\r\n            runtimeImage.display_name === additionalRuntimeImage.display_name &&\r\n            runtimeImage.metadata.image_name ===\r\n              additionalRuntimeImage.metadata.image_name\r\n        ) < 0\r\n    );\r\n\r\n    // Find out which additionalRuntimeImages are not yet in result\r\n    const existingImageNames = result.map(\r\n      (runtimeImage) => runtimeImage.metadata.image_name\r\n    );\r\n    const runtimeImagesToAdd = additionalRuntimeImages.filter(\r\n      (additionalRuntimeImage) =>\r\n        !existingImageNames.includes(additionalRuntimeImage.metadata.image_name)\r\n    );\r\n\r\n    // Sort and add missing images to result (at the end)\r\n    result.sort((a, b) => 0 - (a.name > b.name ? -1 : 1));\r\n    Array.prototype.push.apply(result, runtimeImagesToAdd);\r\n  }\r\n\r\n  return { data: result, error };\r\n};\r\n\r\nconst schemaFetcher = async <T>(key: string): Promise<T> => {\r\n  return (await MetadataService.getSchema(key)) as T;\r\n};\r\n\r\nexport const useRuntimesSchema = (): IReturn<IRuntimeSchema[]> => {\r\n  const { data, error } = useSWR<IRuntimeSchema[]>('runtimes', schemaFetcher);\r\n\r\n  return { data, error };\r\n};\r\n\r\nexport interface IRuntimeComponentsResponse {\r\n  version: string;\r\n  categories: IRuntimeComponent[];\r\n  properties: IComponentPropertiesResponse;\r\n  parameters: IComponentPropertiesResponse;\r\n}\r\n\r\n// Types come from `elyra/templates/components/canvas_palette_template.jinja2`\r\n// Example: `elyra/tests/pipeline/resources/palette.json`\r\n\r\nexport interface IRuntimeComponentInputOutputData {\r\n  id: string;\r\n  app_data: {\r\n    ui_data: {\r\n      label: string;\r\n      cardinality: {\r\n        min: number;\r\n        max: number;\r\n      };\r\n    };\r\n  };\r\n}\r\n\r\nexport interface IRuntimeComponentParameter {\r\n  filename?: string;\r\n  env_vars?: { env_var: string }[];\r\n}\r\n\r\nexport interface IRuntimeComponentNodeType {\r\n  op: string;\r\n  id: string;\r\n  label: string;\r\n  image: string;\r\n  runtime_type?: string;\r\n  type: 'execution_node';\r\n  inputs: { app_data: IRuntimeComponentInputOutputData }[];\r\n  outputs: { app_data: IRuntimeComponentInputOutputData }[];\r\n  app_data: {\r\n    parameter_refs?: {\r\n      filehandler: string;\r\n    };\r\n    properties?: IComponentPropertiesResponse;\r\n    image: string;\r\n    ui_data: {\r\n      image: string;\r\n    };\r\n  };\r\n}\r\n\r\nexport interface IRuntimeComponent {\r\n  label: string;\r\n  image: string;\r\n  id: string;\r\n  description: string;\r\n  runtime?: string;\r\n  node_types: IRuntimeComponentNodeType[];\r\n  extensions?: string[];\r\n}\r\n\r\ninterface IComponentPropertiesResponse {\r\n  current_parameters: GenericObjectType;\r\n  properties: GenericObjectType;\r\n  parameters: { id: string }[];\r\n  uihints: {\r\n    parameter_info: {\r\n      parameter_ref: string;\r\n      control: 'custom';\r\n      custom_control_id: string;\r\n      label: { default: string };\r\n      description: {\r\n        default: string;\r\n        placement: 'on_panel';\r\n      };\r\n      data: GenericObjectType;\r\n    }[];\r\n  };\r\n  group_info: {\r\n    group_info: {\r\n      id: string;\r\n      parameter_refs: string[];\r\n    }[];\r\n  }[];\r\n}\r\n\r\n/**\r\n * Sort palette in place. Takes a list of categories each containing a list of\r\n * components.\r\n * - Categories: alphabetically by \"label\" (exception: \"generic\" always first)\r\n * - Components: alphabetically by \"op\" (where is component label stored?)\r\n */\r\nexport const sortPalette = (palette: {\r\n  categories: IRuntimeComponent[];\r\n}): void => {\r\n  palette.categories.sort((a, b) => {\r\n    if (a.id === GENERIC_CATEGORY_ID) {\r\n      return -1;\r\n    }\r\n    if (b.id === GENERIC_CATEGORY_ID) {\r\n      return 1;\r\n    }\r\n    return a.label.localeCompare(b.label, undefined, { numeric: true });\r\n  });\r\n\r\n  for (const components of palette.categories) {\r\n    components.node_types.sort((a, b) =>\r\n      a.label.localeCompare(b.label, undefined, {\r\n        numeric: true\r\n      })\r\n    );\r\n  }\r\n};\r\n\r\n// TODO: This should be enabled through `extensions`\r\nconst NodeIcons: Map<string, string> = new Map([\r\n  ['execute-notebook-node', 'static/elyra/notebook.svg'],\r\n  ['execute-python-node', 'static/elyra/python.svg'],\r\n  ['execute-r-node', 'static/elyra/r-logo.svg']\r\n]);\r\n\r\n// TODO: We should decouple components and properties to support lazy loading.\r\nexport const componentFetcher = async (\r\n  type: string\r\n): Promise<IRuntimeComponentsResponse> => {\r\n  const palettePromise =\r\n    RequestHandler.makeGetRequest<IRuntimeComponentsResponse>(\r\n      `elyra/pipeline/components/${type}`\r\n    );\r\n\r\n  const pipelinePropertiesPromise =\r\n    RequestHandler.makeGetRequest<IComponentPropertiesResponse>(\r\n      `elyra/pipeline/${type}/properties`\r\n    );\r\n\r\n  const pipelineParametersPromise =\r\n    RequestHandler.makeGetRequest<IComponentPropertiesResponse>(\r\n      `elyra/pipeline/${type}/parameters`\r\n    );\r\n\r\n  const typesPromise = PipelineService.getRuntimeTypes();\r\n\r\n  const [palette, pipelineProperties, pipelineParameters, types] =\r\n    await Promise.all([\r\n      palettePromise,\r\n      pipelinePropertiesPromise,\r\n      pipelineParametersPromise,\r\n      typesPromise\r\n    ]);\r\n\r\n  if (!palette || !pipelineProperties || !types) {\r\n    throw new Error('Failed to fetch palette data');\r\n  }\r\n\r\n  palette.properties = pipelineProperties;\r\n\r\n  if (pipelineParameters) {\r\n    palette.parameters = pipelineParameters;\r\n  }\r\n\r\n  // Gather list of component IDs to fetch properties for.\r\n  const componentList: string[] = [];\r\n  for (const category of palette.categories) {\r\n    for (const node of category.node_types) {\r\n      componentList.push(node.id);\r\n    }\r\n  }\r\n\r\n  const propertiesPromises = componentList.map(async (componentID) => {\r\n    const res =\r\n      await RequestHandler.makeGetRequest<IComponentPropertiesResponse>(\r\n        `elyra/pipeline/components/${type}/${componentID}/properties`\r\n      );\r\n    return {\r\n      id: componentID,\r\n      properties: res\r\n    };\r\n  });\r\n\r\n  // load all of the properties in parallel instead of serially\r\n  const properties = await Promise.all(propertiesPromises);\r\n\r\n  // inject properties\r\n  for (const category of palette.categories) {\r\n    // Use the runtime_type from the first node of the category to determine category\r\n    // icon.\r\n    // TODO: Ideally, this would be included in the category.\r\n    const category_runtime_type =\r\n      category.node_types?.[0]?.runtime_type ?? 'LOCAL';\r\n\r\n    const type = types.find((t) => t.id === category_runtime_type);\r\n    const baseUrl = ServerConnection.makeSettings().baseUrl;\r\n    const defaultIcon = URLExt.parse(\r\n      URLExt.join(baseUrl, type?.icon || '')\r\n    ).pathname;\r\n\r\n    category.image = defaultIcon;\r\n\r\n    for (const node of category.node_types) {\r\n      // update icon\r\n      const genericNodeIcon = NodeIcons.get(node.op);\r\n      const nodeIcon = genericNodeIcon\r\n        ? URLExt.parse(URLExt.join(baseUrl, genericNodeIcon)).pathname\r\n        : defaultIcon;\r\n\r\n      // Not sure which is needed...\r\n      node.image = nodeIcon;\r\n      node.app_data.image = nodeIcon;\r\n      node.app_data.ui_data.image = nodeIcon;\r\n\r\n      const prop = properties.find((p) => p.id === node.id);\r\n      node.app_data.properties = prop?.properties;\r\n    }\r\n  }\r\n\r\n  sortPalette(palette);\r\n\r\n  return palette;\r\n};\r\n\r\nconst updateRuntimeImages = (\r\n  properties: IComponentPropertiesResponse | undefined,\r\n  runtimeImages: IRuntimeImage[] | undefined\r\n): void => {\r\n  const runtimeImageProperties =\r\n    properties?.properties?.component_parameters?.properties?.runtime_image ??\r\n    properties?.properties?.pipeline_defaults?.properties?.runtime_image;\r\n\r\n  const imageNames = (runtimeImages ?? []).map((i) => i.metadata.image_name);\r\n\r\n  const displayNames: { [key: string]: string } = {};\r\n\r\n  (runtimeImages ?? []).forEach((i: IRuntimeImage) => {\r\n    displayNames[i.metadata.image_name] = i.display_name;\r\n  });\r\n\r\n  if (runtimeImageProperties) {\r\n    runtimeImageProperties.enumNames = (runtimeImages ?? []).map(\r\n      (i) => i.display_name\r\n    );\r\n    runtimeImageProperties.enum = imageNames;\r\n  }\r\n};\r\n\r\nexport const usePalette = (\r\n  type = 'local',\r\n  additionalRuntimeImages?: IRuntimeImage[]\r\n): IReturn<IRuntimeComponentsResponse> => {\r\n  const { data: runtimeImages, error: runtimeError } = useRuntimeImages(\r\n    additionalRuntimeImages\r\n  );\r\n\r\n  const {\r\n    data: palette,\r\n    error: paletteError,\r\n    mutate: mutate\r\n  } = useSWR(type, componentFetcher);\r\n\r\n  let updatedPalette;\r\n  if (palette !== undefined) {\r\n    updatedPalette = produce(palette, (draft: IRuntimeComponentsResponse) => {\r\n      for (const category of draft.categories) {\r\n        for (const node of category.node_types) {\r\n          // update runtime images\r\n          updateRuntimeImages(node.app_data.properties, runtimeImages);\r\n        }\r\n      }\r\n      updateRuntimeImages(draft.properties, runtimeImages);\r\n    });\r\n  }\r\n\r\n  return {\r\n    data: updatedPalette,\r\n    error: runtimeError ?? paletteError,\r\n    mutate: mutate\r\n  };\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { IMetadataResource } from '@elyra/services';\r\n\r\nimport { IRuntimeSchema } from './PipelineService';\r\n\r\nexport interface IRuntimeData {\r\n  platforms: {\r\n    id: string;\r\n    displayName: string;\r\n    configs: {\r\n      id: string;\r\n      displayName: string;\r\n      processor: {\r\n        id: string;\r\n      };\r\n    }[];\r\n  }[];\r\n  allowLocal: boolean;\r\n}\r\n\r\nexport const createRuntimeData = ({\r\n  runtimes,\r\n  schema,\r\n  allowLocal\r\n}: {\r\n  runtimes: IMetadataResource[];\r\n  schema: IRuntimeSchema[];\r\n  allowLocal?: boolean;\r\n}): IRuntimeData => {\r\n  const platforms: IRuntimeData['platforms'] = [];\r\n  for (const s of schema) {\r\n    const found = platforms.find((p) => p.id === s.runtime_type);\r\n    if (found) {\r\n      continue;\r\n    }\r\n    platforms.push({\r\n      id: s.runtime_type,\r\n      displayName: s.title ?? '',\r\n      configs: runtimes\r\n        .filter((r) => r.metadata.runtime_type === s.runtime_type)\r\n        .map((r) => ({\r\n          id: r.name,\r\n          displayName: r.display_name,\r\n          processor: {\r\n            id: r.schema_name\r\n          }\r\n        }))\r\n    });\r\n  }\r\n  return { platforms, allowLocal: !!allowLocal };\r\n};\r\n\r\nexport interface IConfigDetails {\r\n  id: string;\r\n  displayName: string;\r\n  platform: {\r\n    id: string;\r\n    displayName: string;\r\n  };\r\n  processor: {\r\n    id: string;\r\n  };\r\n}\r\n\r\nexport const getConfigDetails = (\r\n  runtimeData: IRuntimeData,\r\n  configId: string\r\n): IConfigDetails | undefined => {\r\n  for (const platform of runtimeData.platforms) {\r\n    for (const config of platform.configs) {\r\n      if (config.id === configId) {\r\n        return {\r\n          id: config.id,\r\n          displayName: config.displayName,\r\n          platform: {\r\n            id: platform.id,\r\n            displayName: platform.displayName\r\n          },\r\n          processor: {\r\n            id: config.processor.id\r\n          }\r\n        };\r\n      }\r\n    }\r\n  }\r\n  return undefined;\r\n};\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { Theme } from '@elyra/pipeline-editor/dist/types';\r\nimport { trashIcon } from '@elyra/ui-components';\r\nimport {\r\n  closeIcon,\r\n  caretDownEmptyIcon,\r\n  editIcon,\r\n  folderIcon,\r\n  LabIcon,\r\n  paletteIcon\r\n} from '@jupyterlab/ui-components';\r\nimport * as React from 'react';\r\nimport { DeepPartial } from 'redux';\r\n\r\ninterface ISvgIconProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst SvgIcon: React.FC<ISvgIconProps> = ({ children }) => {\r\n  return (\r\n    <svg\r\n      width=\"16\"\r\n      height=\"16\"\r\n      viewBox=\"0 0 16 16\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      fill=\"currentColor\"\r\n    >\r\n      {children}\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst theme: DeepPartial<Theme> = {\r\n  palette: {\r\n    focus: 'var(--jp-brand-color0)',\r\n    border: 'var(--jp-border-color0)',\r\n    divider: 'var(--jp-border-color0)',\r\n    hover: 'var(--jp-border-color1)',\r\n    active: 'rgba(255, 255, 255, 0.18)',\r\n    inputBorder: 'var(--jp-border-color0)',\r\n    primary: {\r\n      main: 'var(--jp-inverse-layout-color4)',\r\n      hover: 'transparent',\r\n      contrastText: 'var(--jp-layout-color1)'\r\n    },\r\n    secondary: {\r\n      main: 'transparent',\r\n      contrastText: 'var(--jp-content-font-color1)'\r\n    },\r\n    error: {\r\n      main: 'var(--jp-error-color0)',\r\n      contrastText: 'var(--jp-icon-contrast-color3)'\r\n    },\r\n    errorMessage: {\r\n      main: 'var(--jp-error-color1)',\r\n      contrastText: 'rgba(255, 255, 255, 0.9)',\r\n      errorBorder: 'var(--jp-error-color0)'\r\n    },\r\n    text: {\r\n      primary: 'var(--jp-content-font-color0)',\r\n      secondary: 'var(--jp-ui-font-color1)',\r\n      bold: 'var(--jp-inverse-layout-color2)',\r\n      inactive: 'var(--jp-inverse-layout-color4)',\r\n      disabled: 'var(--jp-content-font-color3)',\r\n      link: 'var(--jp-content-link-color)',\r\n      error: 'var(--jp-error-color0)',\r\n      icon: 'var(--jp-inverse-layout-color2)'\r\n    },\r\n    background: {\r\n      default: 'var(--jp-layout-color1)',\r\n      secondary: 'var(--jp-border-color2)',\r\n      input: 'transparent'\r\n    },\r\n    highlight: {\r\n      border: 'transparent',\r\n      hover: 'var(--jp-content-font-color0)',\r\n      focus: 'transparent'\r\n    }\r\n  },\r\n  shape: {\r\n    borderRadius: '4px'\r\n  },\r\n  typography: {\r\n    fontFamily: 'var(--jp-ui-font-family)',\r\n    fontWeight: 'normal',\r\n    fontSize: 'var(--jp-content-font-size1)'\r\n  },\r\n  overrides: {\r\n    deleteIcon: LabIcon.resolveReact({ icon: trashIcon }),\r\n    editIcon: LabIcon.resolveReact({ icon: editIcon }),\r\n    folderIcon: LabIcon.resolveReact({ icon: folderIcon }),\r\n    closeIcon: LabIcon.resolveReact({ icon: closeIcon }),\r\n    propertiesIcon: (\r\n      <SvgIcon>\r\n        <path d=\"M3.5 2h-1v5h1V2zm6.1 5H6.4L6 6.45v-1L6.4 5h3.2l.4.5v1l-.4.5zm-5 3H1.4L1 9.5v-1l.4-.5h3.2l.4.5v1l-.4.5zm3.9-8h-1v2h1V2zm-1 6h1v6h-1V8zm-4 3h-1v3h1v-3zm7.9 0h3.19l.4-.5v-.95l-.4-.5H11.4l-.4.5v.95l.4.5zm2.1-9h-1v6h1V2zm-1 10h1v2h-1v-2z\" />\r\n      </SvgIcon>\r\n    ),\r\n    paletteIcon: LabIcon.resolveReact({ icon: paletteIcon }),\r\n    checkIcon: (\r\n      <SvgIcon>\r\n        <path d=\"M14.431 3.323l-8.47 10-.79-.036-3.35-4.77.818-.574 2.978 4.24 8.051-9.506.764.646z\" />\r\n      </SvgIcon>\r\n    ),\r\n    chevronDownIcon: LabIcon.resolveReact({ icon: caretDownEmptyIcon })\r\n  }\r\n};\r\n\r\nexport { theme };\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { PIPELINE_CURRENT_VERSION } from '@elyra/pipeline-editor';\r\n\r\nimport { GenericObjectType } from '@elyra/ui-components';\r\n\r\nimport { LabShell } from '@jupyterlab/application';\r\nimport { PathExt } from '@jupyterlab/coreutils';\r\nimport { Widget } from '@lumino/widgets';\r\n\r\nimport uuid4 from 'uuid/v4';\r\n\r\nimport { IConfigDetails } from './runtime-utils';\r\n\r\n/**\r\n * A utilities class for static functions.\r\n */\r\nexport default class Utils {\r\n  /**\r\n   * Utility to create a one node pipeline to submit a single file as a pipeline\r\n   */\r\n  static generateSingleFilePipeline(\r\n    filename: string,\r\n    configDetails: IConfigDetails | undefined,\r\n    runtimeImage: string,\r\n    dependencies: string[] | undefined,\r\n    envObject: { [key: string]: string },\r\n    cpu?: number,\r\n    cpu_limit?: number,\r\n    gpu?: number,\r\n    memory?: number,\r\n    memory_limit?: number\r\n  ): GenericObjectType {\r\n    const generated_uuid = uuid4();\r\n\r\n    const artifactName = PathExt.basename(filename, PathExt.extname(filename));\r\n\r\n    const envVars = Object.entries(envObject).map(\r\n      ([key, val]) => `${key}=${val}`\r\n    );\r\n\r\n    return {\r\n      doc_type: 'pipeline',\r\n      version: '3.0',\r\n      json_schema:\r\n        'http://api.dataplatform.ibm.com/schemas/common-pipeline/pipeline-flow/pipeline-flow-v3-schema.json',\r\n      id: generated_uuid,\r\n      primary_pipeline: generated_uuid,\r\n      pipelines: [\r\n        {\r\n          id: generated_uuid,\r\n          nodes: [\r\n            {\r\n              id: generated_uuid,\r\n              type: 'execution_node',\r\n              op: 'execute-notebook-node',\r\n              app_data: {\r\n                component_parameters: {\r\n                  filename,\r\n                  runtime_image: runtimeImage,\r\n                  outputs: [],\r\n                  env_vars: envVars,\r\n                  dependencies,\r\n                  cpu,\r\n                  cpu_limit,\r\n                  gpu,\r\n                  memory,\r\n                  memory_limit,\r\n                  include_subdirectories: false\r\n                },\r\n                ui_data: {\r\n                  label: PathExt.basename(filename)\r\n                }\r\n              }\r\n            }\r\n          ],\r\n          app_data: {\r\n            name: artifactName,\r\n            runtime_config: configDetails?.id,\r\n            version: PIPELINE_CURRENT_VERSION,\r\n            source: PathExt.basename(filename),\r\n            properties: {\r\n              name: 'generic'\r\n            },\r\n            ui_data: {\r\n              comments: []\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      schemas: []\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Break an array into an array of \"chunks\", each \"chunk\" having \"n\" elements.\r\n   * The final \"chuck\" may have less than \"n\" elements.\r\n   * Example:\r\n   * chunkArray(['a', 'b', 'c', 'd', 'e', 'f', 'g'], 4)\r\n   * -> [['a', 'b', 'c', 'd'], ['e', 'f', 'g']]\r\n   */\r\n  static chunkArray<T>(arr: T[], n: number): T[][] {\r\n    return Array.from(Array(Math.ceil(arr.length / n)), (_, i) =>\r\n      arr.slice(i * n, i * n + n)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * From a given widget, find the application shell and return it\r\n   */\r\n  static getLabShell = (widget: Widget | null): LabShell | null => {\r\n    while (widget !== null && !(widget instanceof LabShell)) {\r\n      widget = widget.parent;\r\n    }\r\n\r\n    return widget;\r\n  };\r\n}\r\n"],"names":[],"sourceRoot":""}