{"version":3,"file":"lib_index_js.b3ad3701469dd4486250.js","mappings":"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","sources":["webpack://@elyra/r-editor-extension/./src/REditor.tsx","webpack://@elyra/r-editor-extension/./src/index.ts"],"sourcesContent":["/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { ScriptEditor } from '@elyra/script-editor';\r\nimport { rIcon } from '@elyra/ui-components';\r\n\r\nimport { DocumentRegistry, DocumentWidget } from '@jupyterlab/docregistry';\r\nimport { FileEditor } from '@jupyterlab/fileeditor';\r\nimport { LabIcon } from '@jupyterlab/ui-components';\r\n\r\nexport class REditor extends ScriptEditor {\r\n  /**\r\n   * Construct a new R Editor widget.\r\n   */\r\n  constructor(\r\n    options: DocumentWidget.IOptions<FileEditor, DocumentRegistry.ICodeModel>\r\n  ) {\r\n    super(options);\r\n  }\r\n  getLanguage(): string {\r\n    return 'R';\r\n  }\r\n\r\n  getIcon(): LabIcon {\r\n    return rIcon;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { ScriptEditorWidgetFactory, ScriptEditor } from '@elyra/script-editor';\r\nimport { rIcon } from '@elyra/ui-components';\r\n\r\nimport {\r\n  JupyterFrontEnd,\r\n  JupyterFrontEndPlugin,\r\n  ILayoutRestorer\r\n} from '@jupyterlab/application';\r\nimport { WidgetTracker, ICommandPalette } from '@jupyterlab/apputils';\r\nimport { CodeEditor, IEditorServices } from '@jupyterlab/codeeditor';\r\nimport {\r\n  IDocumentWidget,\r\n  DocumentRegistry,\r\n  DocumentWidget\r\n} from '@jupyterlab/docregistry';\r\nimport { IFileBrowserFactory } from '@jupyterlab/filebrowser';\r\nimport { FileEditor, IEditorTracker } from '@jupyterlab/fileeditor';\r\nimport { ILauncher } from '@jupyterlab/launcher';\r\nimport { IMainMenu } from '@jupyterlab/mainmenu';\r\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\r\n\r\nimport { JSONObject } from '@lumino/coreutils';\r\n\r\nimport { REditor } from './REditor';\r\n\r\nconst R_FACTORY = 'R Editor';\r\nconst R = 'r';\r\nconst R_EDITOR_NAMESPACE = 'elyra-r-script-editor-extension';\r\n\r\nconst commandIDs = {\r\n  createNewREditor: 'script-editor:create-new-r-editor',\r\n  openDocManager: 'docmanager:open',\r\n  newDocManager: 'docmanager:new-untitled'\r\n};\r\n\r\n/**\r\n * Initialization data for the r-editor-extension extension.\r\n */\r\nconst extension: JupyterFrontEndPlugin<void> = {\r\n  id: R_EDITOR_NAMESPACE,\r\n  autoStart: true,\r\n  requires: [\r\n    IEditorServices,\r\n    IEditorTracker,\r\n    ICommandPalette,\r\n    ISettingRegistry,\r\n    IFileBrowserFactory\r\n  ],\r\n  optional: [ILayoutRestorer, IMainMenu, ILauncher],\r\n  activate: (\r\n    app: JupyterFrontEnd,\r\n    editorServices: IEditorServices,\r\n    editorTracker: IEditorTracker,\r\n    palette: ICommandPalette,\r\n    settingRegistry: ISettingRegistry,\r\n    browserFactory: IFileBrowserFactory,\r\n    restorer: ILayoutRestorer | null,\r\n    menu: IMainMenu | null,\r\n    launcher: ILauncher | null\r\n  ) => {\r\n    console.log('Elyra - r-editor extension is activated!');\r\n\r\n    const factory = new ScriptEditorWidgetFactory({\r\n      editorServices,\r\n      factoryOptions: {\r\n        name: R_FACTORY,\r\n        fileTypes: [R],\r\n        defaultFor: [R]\r\n      },\r\n      instanceCreator: (\r\n        options: DocumentWidget.IOptions<\r\n          FileEditor,\r\n          DocumentRegistry.ICodeModel\r\n        >\r\n      ): ScriptEditor => new REditor(options)\r\n    });\r\n\r\n    app.docRegistry.addFileType({\r\n      name: R,\r\n      displayName: 'R File',\r\n      extensions: ['.r'],\r\n      pattern: '.*\\\\.r$',\r\n      mimeTypes: ['text/x-rsrc'],\r\n      icon: rIcon\r\n    });\r\n\r\n    const { restored } = app;\r\n\r\n    /**\r\n     * Track REditor widget on page refresh\r\n     */\r\n    const tracker = new WidgetTracker<ScriptEditor>({\r\n      namespace: R_EDITOR_NAMESPACE\r\n    });\r\n\r\n    let config: CodeEditor.IOptions['config'] = {};\r\n\r\n    if (restorer) {\r\n      // Handle state restoration\r\n      void restorer.restore(tracker, {\r\n        command: commandIDs.openDocManager,\r\n        args: (widget) => ({\r\n          path: widget.context.path,\r\n          factory: R_FACTORY\r\n        }),\r\n        name: (widget) => widget.context.path\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Update the setting values. Adapted from fileeditor-extension.\r\n     */\r\n    const updateSettings = (settings: ISettingRegistry.ISettings): void => {\r\n      config = {\r\n        ...(settings.get('editorConfig').composite as JSONObject)\r\n      };\r\n      app.commands.notifyCommandChanged();\r\n    };\r\n\r\n    /**\r\n     * Update the settings of the current tracker instances. Adapted from fileeditor-extension.\r\n     */\r\n    const updateTracker = (): void => {\r\n      tracker.forEach((widget) => {\r\n        updateWidget(widget);\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Update the settings of a widget. Adapted from fileeditor-extension.\r\n     */\r\n    const updateWidget = (widget: ScriptEditor): void => {\r\n      if (!editorTracker.has(widget)) {\r\n        (editorTracker as WidgetTracker<IDocumentWidget<FileEditor>>).add(\r\n          widget\r\n        );\r\n      }\r\n\r\n      const editor = widget.content.editor;\r\n      const editorConfigOptions = config || {};\r\n\r\n      Object.keys(editorConfigOptions).forEach((key) => {\r\n        const optionValue = editorConfigOptions[key];\r\n        if (optionValue !== undefined) {\r\n          editor.setOption(key, optionValue);\r\n        }\r\n      });\r\n    };\r\n\r\n    // Fetch the initial state of the settings. Adapted from fileeditor-extension.\r\n    Promise.all([\r\n      settingRegistry.load('@jupyterlab/fileeditor-extension:plugin'),\r\n      restored\r\n    ])\r\n      .then(([settings]) => {\r\n        updateSettings(settings);\r\n        updateTracker();\r\n        settings.changed.connect(() => {\r\n          updateSettings(settings);\r\n          updateTracker();\r\n        });\r\n      })\r\n      .catch((reason: Error) => {\r\n        console.error(reason.message);\r\n        updateTracker();\r\n      });\r\n\r\n    app.docRegistry.addWidgetFactory(factory);\r\n\r\n    factory.widgetCreated.connect((sender, widget) => {\r\n      void tracker.add(widget);\r\n\r\n      // Notify the widget tracker if restore data needs to update\r\n      widget.context.pathChanged.connect(() => {\r\n        void tracker.save(widget);\r\n      });\r\n      updateWidget(widget);\r\n    });\r\n\r\n    // Handle the settings of new widgets. Adapted from fileeditor-extension.\r\n    tracker.widgetAdded.connect((sender, widget) => {\r\n      updateWidget(widget);\r\n    });\r\n\r\n    /**\r\n     * Create new r editor from launcher and file menu\r\n     */\r\n\r\n    // Add a r launcher\r\n    if (launcher) {\r\n      launcher.add({\r\n        command: commandIDs.createNewREditor,\r\n        category: 'Elyra',\r\n        rank: 5\r\n      });\r\n    }\r\n\r\n    if (menu) {\r\n      // Add new r file creation to the file menu\r\n      menu.fileMenu.newMenu.addGroup(\r\n        [{ command: commandIDs.createNewREditor, args: { isMenu: true } }],\r\n        93\r\n      );\r\n    }\r\n\r\n    // Function to create a new untitled r file, given the current working directory\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- `app.commands.execute` returns a Promise<any>\r\n    const createNew = (cwd: string): Promise<any> => {\r\n      return app.commands\r\n        .execute(commandIDs.newDocManager, {\r\n          path: cwd,\r\n          type: 'file',\r\n          ext: '.r'\r\n        })\r\n        .then((model) => {\r\n          return app.commands.execute(commandIDs.openDocManager, {\r\n            path: model.path,\r\n            factory: R_FACTORY\r\n          });\r\n        });\r\n    };\r\n\r\n    // Add a command to create new R editor\r\n    app.commands.addCommand(commandIDs.createNewREditor, {\r\n      label: (args) => (args['isPalette'] ? 'New R Editor' : 'R Editor'),\r\n      caption: 'Create a new R Editor',\r\n      icon: (args) => (args['isPalette'] ? undefined : rIcon),\r\n      execute: (args) => {\r\n        //Use file browser's current path instead of defaultBrowser.model.path\r\n        const fileBrowser = browserFactory.createFileBrowser('myFileBrowser');\r\n        const cwd = args['cwd'] ? String(args['cwd']) : fileBrowser.model.path;\r\n        return createNew(cwd);\r\n      }\r\n    });\r\n\r\n    palette.addItem({\r\n      command: commandIDs.createNewREditor,\r\n      args: { isPalette: true },\r\n      category: 'Elyra'\r\n    });\r\n  }\r\n};\r\n\r\nexport default extension;\r\n"],"names":[],"sourceRoot":""}