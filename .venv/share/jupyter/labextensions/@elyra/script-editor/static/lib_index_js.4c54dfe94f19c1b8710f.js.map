{"version":3,"file":"lib_index_js.4c54dfe94f19c1b8710f.js","mappings":";;;;;;;;;;AAAA;;;;;;;;;;;;;;GAcG;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,2HAAmD;AAEnD,0IAAuD;AAEvD,wGAMe;AAYf;;GAEG;AACH,8CAA8C;AAC9C,MAAM,QAAQ,GAAG,sBAAU,EACzB,CAAC,EAAE,KAAK,EAAE,aAAa,EAAE,QAAQ,EAAE,EAAE,MAAM,EAAE,EAAE;IAC7C,MAAM,WAAW,GAAG,mBAAO,EAAC,GAAG,EAAE,CAAC,mBAAM,KAAK,CAAC,WAAW,EAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IACvE,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,oBAAQ,EAAC,aAAa,IAAI,EAAE,CAAC,CAAC;IAEhE,4EAA4E;IAC5E,+EAA+E;IAC/E,yEAAyE;IACzE,qBAAqB;IACrB,+BAAmB,EAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;QACjC,YAAY,EAAE,GAAW,EAAE,CAAC,SAAS;KACtC,CAAC,CAAC,CAAC;IAEJ,MAAM,aAAa,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CACvD,0CAAQ,GAAG,EAAC,WAAW,EAAC,KAAK,EAAC,WAAW,gBAEhC,CACV,CAAC,CAAC,CAAC,CACF,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE;;QAAC,QAC9C,0CAAQ,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,IACzB,SAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,YAAY,mCAAI,GAAG,CAClB,CACV;KAAA,CAAC,CACH,CAAC;IAEF,MAAM,eAAe,GAAG,CAAC,CAAgC,EAAQ,EAAE;QACjE,MAAM,SAAS,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;QACjC,YAAY,CAAC,SAAS,CAAC,CAAC;QACxB,QAAQ,CAAC,SAAS,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,OAAO,CACL,8BAAC,0BAAU,IAAC,QAAQ,EAAE,eAAe,EAAE,KAAK,EAAE,SAAS,IACpD,aAAa,CACH,CACd,CAAC;AACJ,CAAC,CACF,CAAC;AAEF;;GAEG;AACH,MAAa,cAAe,SAAQ,sBAAW;IAG7C;;OAEG;IACH,YACU,KAA6B,EAC7B,aAA4B,EAC5B,GAAuB,EAC/B,QAA0C;QAE1C,KAAK,EAAE,CAAC;QALA,UAAK,GAAL,KAAK,CAAwB;QAC7B,kBAAa,GAAb,aAAa,CAAe;QAC5B,QAAG,GAAH,GAAG,CAAoB;QAI/B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACrC,CAAC;IAED,MAAM;QACJ,OAAO,CACL,8BAAC,QAAQ,IACP,GAAG,EAAE,IAAI,CAAC,GAAG,EACb,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,aAAa,EAAE,IAAI,CAAC,aAAa,EACjC,QAAQ,EAAE,IAAI,CAAC,QAAQ,GACvB,CACH,CAAC;IACJ,CAAC;CACF;AA3BD,wCA2BC;;;;;;;;;;;;AC/GD;;;;;;;;;;;;;;GAcG;;;;;;;;;;;;;;;AAEH,2HAA0D;AAE1D,oIAA2E;AAE3E,iIAAyD;AACzD,iIAIgC;AAChC,iIAGgC;AAChC,0IAA0D;AAC1D,0IAQmC;AAEnC,sHAAoD;AACpD,gHAAiE;AAEjE,2GAAyC;AAEzC,gGAA2D;AAC3D,wHAAkE;AAClE,0FAA8D;AAE9D;;GAEG;AACH,MAAM,mBAAmB,GAAG,oBAAoB,CAAC;AACjD,MAAM,iBAAiB,GAAG,+BAA+B,CAAC;AAC1D,MAAM,uBAAuB,GAAG,qCAAqC,CAAC;AACtE,MAAM,uBAAuB,GAAG,qCAAqC,CAAC;AACtE,MAAM,wBAAwB,GAAG,sCAAsC,CAAC;AACxE,MAAM,wBAAwB,GAAG,sCAAsC,CAAC;AACxE,MAAM,gBAAgB,GAAG,wBAAwB,CAAC;AAClD,MAAM,aAAa,GAAG,4BAA4B,CAAC;AAEnD;;GAEG;AACH,MAAsB,YAAa,SAAQ,4BAG1C;IAiBC;;OAEG;IACH,YACE,OAAyE;QAEzE,KAAK,CAAC,OAAO,CAAC,CAAC;QA2DV,sBAAiB,GAAG,CAAO,UAAkB,EAAoB,EAAE,gDACxE,aAAM,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,UAAU,CAAC,KAAC;QAEtD;;;WAGG;QACO,0BAAqB,GAAG,GAAwB,EAAE;YAC1D,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACpC,MAAM,WAAW,GACf,MAAM,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;YAC3D,IAAI,CAAC,aAAa,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;YACtE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC;YACrC,IAAI,CAAC,iBAAiB,GAAG,eAAK,CAAC,SAAS,EAAW,CAAC;YAEpD,IAAI,WAAW,KAAK,IAAI,EAAE,CAAC;gBACzB,IAAI,CAAC,OAAO,CAAC,UAAU,CACrB,CAAC,EACD,QAAQ,EACR,IAAI,+BAAc,CAChB,WAAW,EACX,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,iBAAiB,EACtB,IAAI,CAAC,2BAA2B,CACjC,CACF,CAAC;YACJ,CAAC;YACD,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC1D,CAAC,EAAC;QAEM,gCAA2B,GAAG,CACpC,cAAsB,EACP,EAAE;YACjB,IAAI,cAAc,KAAK,IAAI,CAAC,UAAU,EAAE,CAAC;gBACvC,OAAO;YACT,CAAC;YACD,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;YACjC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACpD,CAAC,EAAC;QAEF;;WAEG;QACK,2BAAsB,GAAG,GAAS,EAAE;YAC1C,wCAAwC;YACxC,IAAI,CAAC,SAAS,GAAG,IAAI,4BAAY,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;YAC1D,gBAAM,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC7C,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,GAAG,EAAE;;gBACrC,UAAI,CAAC,SAAS,0CAAE,GAAG,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;YAEH,4BAA4B;YAC5B,MAAM,KAAK,GAAoB,IAAI,4BAAe,EAAE,CAAC;YACrD,MAAM,kBAAkB,GAAG,IAAI,+BAAkB,CAAC,EAAE,gBAAgB,EAAhB,sCAAgB,EAAE,CAAC,CAAC;YACxE,IAAI,CAAC,gBAAgB,GAAG,IAAI,uBAAU,CAAC;gBACrC,UAAU,EAAE,kBAAkB;gBAC9B,KAAK;aACN,CAAC,CAAC;YACH,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;YAElD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAmB,CAAC;YACxC,wFAAwF;YACxF,6CAA6C;YAC7C,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACnC,CAAC,CAAC;QAEF;;;WAGG;QACK,cAAS,GAAG,GAAwB,EAAE;YAC5C,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;gBACtB,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CACzB,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,OAAO,CAAC,IAAI,EACjB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,EAClC,IAAI,CAAC,eAAe,CACrB,CAAC;YACJ,CAAC;QACH,CAAC,EAAC;QAEM,iBAAY,GAAG,GAAwB,EAAE;;YAC/C,MAAM,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;YACpC,IAAI,CAAC,WAAI,CAAC,SAAS,0CAAE,OAAO,GAAE,CAAC;gBAC7B,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC,EAAC;QAEM,qBAAgB,GAAG,CAAC,QAAiB,EAAQ,EAAE;YACrD,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,CAAC,QAAQ,CAAC;YACnC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC9B,CAAC,CAAC;QAEF;;WAEG;QACK,oBAAe,GAAG,GAAS,EAAE;;YACnC,mDAAmD;YACnD,UAAI,CAAC,SAAS,0CAAE,IAAI,EAAE,CAAC;YACvB,UAAI,CAAC,gBAAgB,0CAAE,KAAK,CAAC,KAAK,EAAE,CAAC;YACrC,UAAI,CAAC,gBAAgB,0CAAE,WAAW,CAAC,uBAAuB,CAAC,CAAC,CAAC,iDAAiD;QAChH,CAAC,CAAC;QAEF;;WAEG;QACK,oBAAe,GAAG,CAAC,GAAmB,EAAQ,EAAE;YACtD,IAAI,MAAM,GAAG,EAAE,CAAC;YAEhB,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;gBACf,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACrC,OAAO;YACT,CAAC;iBAAM,IAAI,GAAG,CAAC,KAAK,EAAE,CAAC;gBACrB,MAAM,GAAG,UAAU,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC;gBAChE,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBAC3B,IAAI,CAAC,wBAAwB,EAAE,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;gBAClE,OAAO;YACT,CAAC;iBAAM,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;gBACtB,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;YACtB,CAAC;YACD,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC7B,CAAC,CAAC;QAEM,wBAAmB,GAAG,CAC5B,eAA4C,EACtC,EAAE;;YACR,MAAM,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACxD,MAAM,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAC1D,cAAc,CAAC,SAAS,GAAG,8BAA8B,CAAC;YAC1D,gBAAgB,CAAC,SAAS,GAAG,iCAAiC,CAAC;YAC/D,cAAc,CAAC,OAAO,GAAG;gBACvB,eAAe,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;YACrC,CAAC,CAAC;YACF,gBAAgB,CAAC,OAAO,GAAG;gBACzB,eAAe,CAAC,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC;YACrE,CAAC,CAAC;YACF,oCAAoB,CAAC,OAAO,CAAC;gBAC3B,SAAS,EAAE,cAAc;gBACzB,eAAe,EAAE,QAAQ;gBACzB,KAAK,EAAE,KAAK;aACb,CAAC,CAAC;YACH,sCAAsB,CAAC,OAAO,CAAC;gBAC7B,SAAS,EAAE,gBAAgB;gBAC3B,eAAe,EAAE,QAAQ;gBACzB,KAAK,EAAE,QAAQ;aAChB,CAAC,CAAC;YACH,UAAI,CAAC,SAAS,0CAAE,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;YACjD,UAAI,CAAC,SAAS,0CAAE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;QACrD,CAAC,CAAC;QAEF;;WAEG;QACK,sBAAiB,GAAG,GAAS,EAAE;;YACrC,IACE,IAAI,CAAC,gBAAgB,KAAK,SAAS;gBACnC,CAAC,iBAAI,CAAC,iBAAiB,0CAAE,OAAO,0CAAE,YAAY,EAAE,GAChD,CAAC;gBACD,OAAO;YACT,CAAC;YAED,UAAI,CAAC,SAAS,0CAAE,IAAI,EAAE,CAAC;YAEvB,yCAAyC;YACzC,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,EAAE,CAAC;gBACjC,mBAAS,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAC1C,CAAC;YAED,IAAI,UAAI,CAAC,SAAS,0CAAE,OAAO,EAAE,CAAC;gBAC5B,yBAAyB;gBACzB,IAAI,CAAC,eAAe,GAAG,IAAI,4BAAe,CAAC;oBACzC,OAAO,EAAE,IAAI,CAAC,gBAAgB;iBAC/B,CAAC,CAAC;gBACH,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;gBAC/C,UAAI,CAAC,SAAS,0CAAE,SAAS,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC;gBAE1E,MAAM,SAAS,GAAG,UAAI,CAAC,SAAS,0CAAE,OAAO,GAAG,IAAI,GAAG,KAAK,CAAC;gBACzD,IAAI,SAAS,KAAK,SAAS,EAAE,CAAC;oBAC5B,SAAS,CAAC,EAAE,GAAG,yBAAyB,CAAC;oBACzC,IAAI,SAAS,CAAC,YAAY,KAAK,IAAI,EAAE,CAAC;wBACpC,SAAS,CAAC,YAAY,CAAC,KAAK,GAAG,gBAAgB,CAAC;wBAChD,SAAS,CAAC,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC;oBACzC,CAAC;oBACD,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE;wBAC9B,IAAI,CAAC,YAAY,EAAE,CAAC;wBACpB,IAAI,CAAC,eAAe,EAAE,CAAC;oBACzB,CAAC,EAAE,IAAI,CAAC,CAAC;gBACX,CAAC;YACH,CAAC;YAED,MAAM,OAAO,GAAG;gBACd,IAAI,EAAE,QAAQ;gBACd,WAAW,EAAE,QAAQ;gBACrB,IAAI,EAAE,CAAC,gCAAgC,CAAC;aACzC,CAAC;YACF,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACzC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YAC3B,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC9B,CAAC,CAAC;QAEF;;WAEG;QACK,wBAAmB,GAAG,CAAC,MAAc,EAAQ,EAAE;YACrD,IAAI,MAAM,KAAK,MAAM,EAAE,CAAC;gBACtB,+EAA+E;gBAC/E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;gBACxB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YAC7B,CAAC;iBAAM,IAAI,MAAM,KAAK,MAAM,EAAE,CAAC;gBAC7B,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC,CAAC;QAEF;;WAEG;QACK,kBAAa,GAAG,CAAC,MAAc,EAAQ,EAAE;;YAC/C,IAAI,MAAM,EAAE,CAAC;gBACX,MAAM,OAAO,GAAG;oBACd,IAAI,EAAE,QAAQ;oBACd,WAAW,EAAE,QAAQ;oBACrB,IAAI,EAAE,CAAC,MAAM,CAAC;iBACf,CAAC;gBACF,+EAA+E;gBAC/E,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;oBACrB,sDAAsD;oBACtD,UAAI,CAAC,gBAAgB,0CAAE,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAC1C,UAAI,CAAC,gBAAgB,0CAAE,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBAC1C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBACzB,qFAAqF;oBACrF,UAAI,CAAC,gBAAgB,0CAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBAC3C,CAAC;qBAAM,CAAC;oBACN,UAAI,CAAC,gBAAgB,0CAAE,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAC5C,CAAC;gBACD,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;gBAC3B,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC9B,CAAC;QACH,CAAC,CAAC;QAEM,yBAAoB,GAAG,GAAS,EAAE;YACxC,IAAI,CAAC,wBAAwB,EAAE,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;YAClE,IAAI,CAAC,yBAAyB,EAAE,CAAC,QAAQ,CAAC,wBAAwB,CAAC,CAAC;YACpE,IAAI,CAAC,yBAAyB,EAAE,CAAC,QAAQ,CAAC,wBAAwB,CAAC,CAAC;QACtE,CAAC,CAAC;QAEF;;WAEG;QACK,6BAAwB,GAAG,GAAW,EAAE;;YAC9C,MAAM,qBAAqB,GAAG,UAAI,CAAC,gBAAgB,0CAAE,MAAqB,CAAC;YAC3E,OAAO,qBAAqB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC1C,CAAC,CAAC;QAEF;;WAEG;QACK,8BAAyB,GAAG,GAAW,EAAE;YAC/C,MAAM,qBAAqB,GAAG,IAAI,CAAC,wBAAwB,EAAE;iBAC1D,MAAqB,CAAC;YACzB,OAAO,qBAAqB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC1C,CAAC,CAAC;QAEF;;WAEG;QACK,8BAAyB,GAAG,GAAiB,EAAE;YACrD,MAAM,qBAAqB,GAAG,IAAI,CAAC,wBAAwB,EAAE;iBAC1D,MAAqB,CAAC;YACzB,OAAO,qBAAqB,CAAC,OAAO,CAAC,CAAC,CAAiB,CAAC;QAC1D,CAAC,CAAC;QAEF;;WAEG;QACK,qBAAgB,GAAG,CAAC,gBAAwB,EAAQ,EAAE;YAC5D,IAAI,CAAC,yBAAyB,EAAE,CAAC,IAAI,CAAC,SAAS;gBAC7C,GAAG,GAAG,gBAAgB,GAAG,IAAI,CAAC;QAClC,CAAC,CAAC;QAEF;;WAEG;QACK,aAAQ,GAAG,GAAwB,EAAE;YAC3C,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;gBAChC,MAAM,yBAAU,EAAC;oBACf,KAAK,EAAE,aAAa;oBACpB,IAAI,EAAE,uBAAuB;oBAC7B,OAAO,EAAE,CAAC,iBAAM,CAAC,QAAQ,EAAE,CAAC;iBAC7B,CAAC,CAAC;gBACH,OAAO;YACT,CAAC;YACD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,GAAS,EAAE;gBAClC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;oBACrB,MAAM,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC;gBACxC,CAAC;YACH,CAAC,EAAC,CAAC;QACL,CAAC,EAAC;QArWA,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;QACnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;QAChC,IAAI,CAAC,MAAM,GAAG,IAAI,2BAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACtD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,IAAI,+CAAsB,EAAE,CAAC;QAC/C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,uBAAuB,GAAG,IAAI,kBAAM,CAAe,IAAI,CAAC,CAAC;QAE9D,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAEjC,sBAAsB;QACtB,MAAM,UAAU,GAAG,IAAI,6BAAa,CAAC;YACnC,IAAI,EAAE,wBAAQ;YACd,OAAO,EAAE,IAAI,CAAC,QAAQ;YACtB,OAAO,EAAE,oBAAoB;SAC9B,CAAC,CAAC;QAEH,MAAM,SAAS,GAAG,IAAI,6BAAa,CAAC;YAClC,SAAS,EAAE,gBAAgB;YAC3B,IAAI,EAAE,uBAAO;YACb,OAAO,EAAE,IAAI,CAAC,SAAS;YACvB,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,CAAC,IAAI,CAAC,WAAW;SAC3B,CAAC,CAAC;QAEH,MAAM,eAAe,GAAG,IAAI,6BAAa,CAAC;YACxC,IAAI,EAAE,wBAAQ;YACd,OAAO,EAAE,IAAI,CAAC,YAAY;YAC1B,OAAO,EAAE,sBAAsB;SAChC,CAAC,CAAC;QAEH,uCAAuC;QACvC,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QACpC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAClC,OAAO,CAAC,OAAO,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;QAE9C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAErC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAE3B,4BAA4B;QAC5B,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAE9B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;IAC9D,CAAC;IAED,IAAW,sBAAsB;QAC/B,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACtC,CAAC;IAED,IAAW,eAAe;;QACxB,OAAO,gBAAI,CAAC,UAAU,mCAAI,IAAI,CAAC,aAAa,mCAAI,EAAE,CAAC;IACrD,CAAC;CA8SF;AAjYD,oCAiYC;;;;;;;;;;;;;;;;;;;;;;;AClcD;;;;;;;;;;;;;;GAcG;AACH,2HAAqE;AAErE,MAAa,sBAAsB;IAGjC;QAIA;;WAEG;QACH,mBAAc,GAAG,GAAiD,EAAE;YAClE,MAAM,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;YACnC,MAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;YAE3C,gEAAgE;YAChE,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAiB,CAAC;QAC3D,CAAC,EAAC;QAEF;;WAEG;QACH,6BAAwB,GAAG,CACzB,QAAgB,EACwB,EAAE;;YAC1C,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC1C,MAAM,CAAC,OAAO,CAAC,WAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,WAAW,mCAAI,EAAE,CAAC;iBACrC,MAAM,CAAC,CAAC,KAAK,EAAE,EAAE,WAAC,mBAAK,CAAC,CAAC,CAAC,0CAAE,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAK,KAAK,IAAC;iBAClE,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE,CAAQ,KAAK,aAAL,KAAK,4BAAL,KAAK,CAAE,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAE3D,OAAO,KAAK,CAAC;QACf,CAAC,EAAC;QAEF;;WAEG;QACH,yBAAoB,GAAG,CACrB,UAAkB,EACsB,EAAE;;YAC1C,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC1C,MAAM,CAAC,OAAO,CAAC,WAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,WAAW,mCAAI,EAAE,CAAC;iBACrC,MAAM,CAAC,CAAC,KAAK,EAAE,EAAE,eAAC,yBAAK,CAAC,CAAC,CAAC,0CAAE,IAAI,0CAAE,QAAQ,CAAC,UAAU,CAAC,MAAK,KAAK,IAAC;iBACjE,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE,CAAQ,KAAK,aAAL,KAAK,4BAAL,KAAK,CAAE,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAE3D,OAAO,KAAK,CAAC;QACf,CAAC,EAAC;QAEF;;;WAGG;QACH,qBAAgB,GAAG,CAAO,QAAgB,EAAmB,EAAE;;YAC7D,MAAM,WAAW,GACf,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC9B,IAAI,CAAC,WAAW,EAAE,CAAC;gBACjB,OAAO,EAAE,CAAC;YACZ,CAAC;YAED,IAAI,iBAAW,CAAC,OAAO,0CAAE,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC;gBAC5C,OAAO,WAAW,CAAC,OAAO,CAAC;YAC7B,CAAC;YAED,OAAO,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QAC3C,CAAC,EAAC;QAEF,uBAAkB,GAAG,CAAO,QAAgB,EAAmB,EAAE;;YAC/D,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;YAElE,MAAM,KAAK,GAAG,EAAE,CAAC;YACjB,IAAI,WAAW,IAAI,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACrE,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChE,OAAO,WAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,IAAI,mCAAI,GAAG,CAAC;YAC5B,CAAC;YACD,OAAO,KAAK,CAAC;QACf,CAAC,EAAC;QAEF;;WAEG;QACH,sBAAiB,GAAG,CAAO,UAAuB,EAAoB,EAAE;;YACtE,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;YAC1D,OAAO,CAAC,CAAC,CAAC,uBAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,WAAW,CAAC,UAAU,CAAC,0CAAE,QAAQ,0CAAG,UAAU,CAAC,mCAAI,KAAK,CAAC,CAAC;QAC7E,CAAC,EAAC;QA7EA,IAAI,CAAC,iBAAiB,GAAG,IAAI,4BAAiB,EAAE,CAAC;IACnD,CAAC;CA6EF;AAlFD,wDAkFC;;;;;;;;;;;;ACnGD;;;;;;;;;;;;;;GAcG;;;AAGH,oIAIiC;AACjC,iIAAoD;AAIpD;;GAEG;AACH,MAAa,yBAA0B,SAAQ,8BAG9C;IAEC;;OAEG;IACH,YAAY,OAA2C;QACrD,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,cAAc,CAAC;QACxC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAED;;OAEG;IACO,eAAe,CACvB,OAAqC;QAErC,MAAM,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,iBAAiB,CAAC;QAC1E,MAAM,OAAO,GAAuB,CAAC,OAAO,EAAE,EAAE;YAC9C,OAAO,iBAAiB,CAAC,OAAO,CAAC,CAAC;QACpC,CAAC,CAAC;QACF,MAAM,OAAO,GAAG,IAAI,uBAAU,CAAC;YAC7B,OAAO;YACP,OAAO;YACP,eAAe,EAAE,IAAI,CAAC,SAAS,CAAC,eAAe;SAChD,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;IAC5D,CAAC;CAGF;AAlCD,8DAkCC;;;;;;;;;;;;AC/DD;;;;;;;;;;;;;;GAcG;;;;;;;;;;;;AAEH,2HAA0D;AAC1D,2HAM8B;AAU9B,MAAM,gBAAgB,GACpB,+DAA+D,CAAC;AAClE,MAAM,iBAAiB,GAAG,4CAA4C,CAAC;AAWvE;;GAEG;AACH,MAAa,YAAY;IAOvB;;OAEG;IACH,YAAY,aAA0C;QAW9C,gBAAW,GAAG,CAAC,QAAgB,EAAmC,EAAE;YAC1E,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC1B,OAAO,yBAAU,EAAC;gBAChB,KAAK,EAAE,OAAO;gBACd,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,CAAC,iBAAM,CAAC,QAAQ,EAAE,CAAC;aAC7B,CAAC,CAAC;QACL,CAAC,CAAC;QAEF;;WAEG;QACH,cAAS,GAAG,CACV,UAAyB,EACzB,WAAmB,EACnB,IAAY,EACZ,eAAoD,EACrC,EAAE;;YACjB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAEzB,IAAI,CAAC,UAAU,EAAE,CAAC;gBAChB,MAAM,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;gBACzC,OAAO;YACT,CAAC;YAED,IAAI,CAAC;gBACH,MAAM,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,WAAW,CAAC,CAAC;YACnD,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACX,MAAM,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;gBAC1C,OAAO;YACT,CAAC;YAED,IAAI,CAAC,WAAI,CAAC,iBAAiB,0CAAE,MAAM,GAAE,CAAC;gBACpC,6BAA6B;gBAC7B,MAAM,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;gBAC1C,OAAO;YACT,CAAC;YAED,MAAM,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YAEtE,MAAM,CAAC,OAAO,GAAG,CAAC,GAAkB,EAAQ,EAAE;gBAC5C,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACpC,MAAM,SAAS,GAAmB,EAAE,CAAC;gBAErC,IAAI,OAAO,KAAK,OAAO,EAAE,CAAC;oBACxB,MAAM,QAAQ,GAAG,GAAgB,CAAC;oBAClC,SAAS,CAAC,KAAK,GAAG;wBAChB,IAAI,EAAE,QAAQ,CAAC,OAAO,CAAC,KAAK;wBAC5B,MAAM,EAAE,QAAQ,CAAC,OAAO,CAAC,MAAM;qBAChC,CAAC;gBACJ,CAAC;qBAAM,IAAI,OAAO,KAAK,gBAAgB,IAAI,OAAO,KAAK,cAAc,EAAE,CAAC;oBACtE,MAAM,SAAS,GAAG,GAA0C,CAAC;oBAC7D,IAAI,YAAY,IAAI,SAAS,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;wBAC3C,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAW,CAAC;oBACpE,CAAC;yBAAM,CAAC;wBACN,OAAO,CAAC,GAAG,CAAC,4BAA4B,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;oBAClE,CAAC;gBACH,CAAC;qBAAM,IAAI,OAAO,KAAK,QAAQ,EAAE,CAAC;oBAChC,MAAM,SAAS,GAAG,GAAiB,CAAC;oBACpC,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC;gBAC5C,CAAC;qBAAM,IAAI,OAAO,KAAK,QAAQ,EAAE,CAAC;oBAChC,MAAM,SAAS,GAAG,GAAiB,CAAC;oBACpC,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,eAAe,CAAC;gBACvD,CAAC;qBAAM,CAAC;oBACN,6BAA6B;gBAC/B,CAAC;gBAED,YAAY;gBACZ,eAAe,CAAC,SAAS,CAAC,CAAC;YAC7B,CAAC,CAAC;YAEF,IAAI,CAAC;gBACH,MAAM,MAAM,CAAC,IAAI,CAAC;gBAClB,gDAAgD;gBAChD,kEAAkE;gBAClE,oEAAoE;gBACpE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC5B,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACX,OAAO,CAAC,GAAG,CAAC,oBAAoB,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YACxD,CAAC;QACH,CAAC,EAAC;QAEF;;WAEG;QACH,iBAAY,GAAG,CACb,UAAkB,EAClB,WAAmB,EACJ,EAAE;YACjB,MAAM,OAAO,GAA4B;gBACvC,MAAM,EAAE;oBACN,IAAI,EAAE,UAAU;iBACjB;gBACD,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,WAAW;aAClB,CAAC;YAEF,IAAI,CAAC,IAAI,CAAC,iBAAiB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;gBAC9D,IAAI,CAAC;oBACH,IAAI,CAAC,iBAAiB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACrE,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;gBAC9C,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACX,OAAO,CAAC,GAAG,CAAC,4BAA4B,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChE,CAAC;YACH,CAAC;QACH,CAAC,EAAC;QAEF;;WAEG;QACH,oBAAe,GAAG,GAAwB,EAAE;;YAC1C,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,MAAM,IAAI,GAAG,UAAI,CAAC,iBAAiB,CAAC,MAAM,0CAAE,IAAI,CAAC;gBAEjD,IAAI,CAAC;oBACH,MAAM,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;oBACxC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;oBAC9B,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,mBAAmB,CAAC,CAAC;gBAC1C,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACX,OAAO,CAAC,GAAG,CAAC,gCAAgC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpE,CAAC;YACH,CAAC;QACH,CAAC,EAAC;QAEF;;WAEG;QACH,mBAAc,GAAG,GAAwB,EAAE;YACzC,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,MAAM,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gBAC7C,IAAI,CAAC;oBACH,MAAM,IAAI,CAAC,MAAM,oBAAS,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;oBACtD,OAAO,CAAC,GAAG,CAAC,OAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,IAAI,IAAG,kBAAkB,CAAC,CAAC;gBACjD,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACX,OAAO,CAAC,GAAG,CAAC,+BAA+B,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnE,CAAC;YACH,CAAC;QACH,CAAC,EAAC;QAEF;;;WAGG;QACH,oBAAe,GAAG,GAAwB,EAAE;YAC1C,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBAC3B,MAAM,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;gBAC7C,IAAI,CAAC;oBACH,MAAM;wBACJ,CAAC,MAAM,oBAAS,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;oBACtE,OAAO,CAAC,GAAG,CAAC,OAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,IAAI,IAAG,sBAAsB,CAAC,CAAC;oBACnD,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC5B,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACX,OAAO,CAAC,GAAG,CAAC,gCAAgC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpE,CAAC;YACH,CAAC;QACH,CAAC,EAAC;QAtKA,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QAEnC,IAAI,CAAC,iBAAiB,GAAG,IAAI,4BAAiB,EAAE,CAAC;QACjD,IAAI,CAAC,aAAa,GAAG,IAAI,wBAAa,EAAE,CAAC;QACzC,IAAI,CAAC,cAAc,GAAG,IAAI,yBAAc,CAAC;YACvC,aAAa,EAAE,IAAI,CAAC,aAAa;SAClC,CAAC,CAAC;QACH,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAChC,CAAC;CA+JF;AAlLD,oCAkLC;;;;;;;;;;;;ACnOD;;;;;;;;;;;;;;GAcG;;;;;;;;;;;;;;;;AAEH,8FAAiC;AACjC,0FAA+B;AAC/B,8GAAyC;AACzC,0FAA+B;AAC/B,oHAA4C","sources":["webpack://@elyra/script-editor/./src/KernelDropdown.tsx","webpack://@elyra/script-editor/./src/ScriptEditor.tsx","webpack://@elyra/script-editor/./src/ScriptEditorController.ts","webpack://@elyra/script-editor/./src/ScriptEditorWidgetFactory.tsx","webpack://@elyra/script-editor/./src/ScriptRunner.ts","webpack://@elyra/script-editor/./src/index.ts"],"sourcesContent":["/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { ReactWidget } from '@jupyterlab/apputils';\r\nimport { KernelSpec } from '@jupyterlab/services';\r\nimport { HTMLSelect } from '@jupyterlab/ui-components';\r\n\r\nimport React, {\r\n  forwardRef,\r\n  useImperativeHandle,\r\n  useState,\r\n  useMemo,\r\n  RefObject\r\n} from 'react';\r\n\r\nexport interface ISelect {\r\n  getSelection: () => string;\r\n}\r\n\r\ninterface IProps {\r\n  specs: KernelSpec.ISpecModels;\r\n  defaultKernel: string | null;\r\n  callback: (selectedKernel: string) => void;\r\n}\r\n\r\n/**\r\n * A toolbar dropdown component populated with available kernel specs.\r\n */\r\n// eslint-disable-next-line react/display-name\r\nconst DropDown = forwardRef<ISelect, IProps>(\r\n  ({ specs, defaultKernel, callback }, select) => {\r\n    const kernelspecs = useMemo(() => ({ ...specs.kernelspecs }), [specs]);\r\n    const [selection, setSelection] = useState(defaultKernel || '');\r\n\r\n    // Note: It's normally best to avoid using an imperative handle if possible.\r\n    // The better option would be to track state in the parent component and handle\r\n    // the change events there as well, but I know this isn't always possible\r\n    // alongside jupyter.\r\n    useImperativeHandle(select, () => ({\r\n      getSelection: (): string => selection\r\n    }));\r\n\r\n    const kernelOptions = !Object.keys(kernelspecs).length ? (\r\n      <option key=\"no-kernel\" value=\"no-kernel\">\r\n        No Kernel\r\n      </option>\r\n    ) : (\r\n      Object.entries(kernelspecs).map(([key, val]) => (\r\n        <option key={key} value={key}>\r\n          {val?.display_name ?? key}\r\n        </option>\r\n      ))\r\n    );\r\n\r\n    const handleSelection = (e: { target: HTMLSelectElement }): void => {\r\n      const selection = e.target.value;\r\n      setSelection(selection);\r\n      callback(selection);\r\n    };\r\n\r\n    return (\r\n      <HTMLSelect onChange={handleSelection} value={selection}>\r\n        {kernelOptions}\r\n      </HTMLSelect>\r\n    );\r\n  }\r\n);\r\n\r\n/**\r\n * Wrap the dropDown into a React Widget in order to insert it into a Lab Toolbar Widget\r\n */\r\nexport class KernelDropdown extends ReactWidget {\r\n  callback: (selectedKernel: string) => void;\r\n\r\n  /**\r\n   * Construct a new CellTypeSwitcher widget.\r\n   */\r\n  constructor(\r\n    private specs: KernelSpec.ISpecModels,\r\n    private defaultKernel: string | null,\r\n    private ref: RefObject<ISelect>,\r\n    callback: (selectedKernel: string) => void\r\n  ) {\r\n    super();\r\n    this.callback = callback;\r\n    this.defaultKernel = defaultKernel;\r\n  }\r\n\r\n  render(): React.ReactElement {\r\n    return (\r\n      <DropDown\r\n        ref={this.ref}\r\n        specs={this.specs}\r\n        defaultKernel={this.defaultKernel}\r\n        callback={this.callback}\r\n      />\r\n    );\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { Dialog, showDialog } from '@jupyterlab/apputils';\r\nimport { CodeEditor } from '@jupyterlab/codeeditor';\r\nimport { DocumentRegistry, DocumentWidget } from '@jupyterlab/docregistry';\r\nimport { FileEditor } from '@jupyterlab/fileeditor';\r\nimport { ScrollingWidget } from '@jupyterlab/logconsole';\r\nimport {\r\n  OutputArea,\r\n  OutputAreaModel,\r\n  OutputPrompt\r\n} from '@jupyterlab/outputarea';\r\nimport {\r\n  RenderMimeRegistry,\r\n  standardRendererFactories as initialFactories\r\n} from '@jupyterlab/rendermime';\r\nimport { ToolbarButton } from '@jupyterlab/ui-components';\r\nimport {\r\n  DockPanelSvg,\r\n  LabIcon,\r\n  caretDownEmptyThinIcon,\r\n  caretUpEmptyThinIcon,\r\n  runIcon,\r\n  saveIcon,\r\n  stopIcon\r\n} from '@jupyterlab/ui-components';\r\n\r\nimport { ISignal, Signal } from '@lumino/signaling';\r\nimport { BoxLayout, PanelLayout, Widget } from '@lumino/widgets';\r\n\r\nimport React, { RefObject } from 'react';\r\n\r\nimport { ISelect, KernelDropdown } from './KernelDropdown';\r\nimport { ScriptEditorController } from './ScriptEditorController';\r\nimport { IMessageOutput, ScriptRunner } from './ScriptRunner';\r\n\r\n/**\r\n * ScriptEditor widget CSS classes.\r\n */\r\nconst SCRIPT_EDITOR_CLASS = 'elyra-ScriptEditor';\r\nconst OUTPUT_AREA_CLASS = 'elyra-ScriptEditor-OutputArea';\r\nconst OUTPUT_AREA_ERROR_CLASS = 'elyra-ScriptEditor-OutputArea-error';\r\nconst OUTPUT_AREA_CHILD_CLASS = 'elyra-ScriptEditor-OutputArea-child';\r\nconst OUTPUT_AREA_OUTPUT_CLASS = 'elyra-ScriptEditor-OutputArea-output';\r\nconst OUTPUT_AREA_PROMPT_CLASS = 'elyra-ScriptEditor-OutputArea-prompt';\r\nconst RUN_BUTTON_CLASS = 'elyra-ScriptEditor-Run';\r\nconst TOOLBAR_CLASS = 'elyra-ScriptEditor-Toolbar';\r\n\r\n/**\r\n * A widget for script editors.\r\n */\r\nexport abstract class ScriptEditor extends DocumentWidget<\r\n  FileEditor,\r\n  DocumentRegistry.ICodeModel\r\n> {\r\n  private runner: ScriptRunner;\r\n  private dockPanel?: DockPanelSvg;\r\n  private outputAreaWidget?: OutputArea;\r\n  private scrollingWidget?: ScrollingWidget<OutputArea>;\r\n  private model: CodeEditor.IModel;\r\n  private emptyOutput: boolean;\r\n  private kernelSelectorRef: RefObject<ISelect> | null;\r\n  private controller: ScriptEditorController;\r\n  private runDisabled: boolean;\r\n  private _kernelSelectionChanged: Signal<this, string>;\r\n  private kernelName: string | null;\r\n  protected runButton: ToolbarButton;\r\n  protected defaultKernel: string | null;\r\n  abstract getLanguage(): string;\r\n  abstract getIcon(): LabIcon;\r\n\r\n  /**\r\n   * Construct a new editor widget.\r\n   */\r\n  constructor(\r\n    options: DocumentWidget.IOptions<FileEditor, DocumentRegistry.ICodeModel>\r\n  ) {\r\n    super(options);\r\n    this.addClass(SCRIPT_EDITOR_CLASS);\r\n    this.model = this.content.model;\r\n    this.runner = new ScriptRunner(this.disableRunButton);\r\n    this.kernelSelectorRef = null;\r\n    this.emptyOutput = true;\r\n    this.controller = new ScriptEditorController();\r\n    this.runDisabled = false;\r\n    this.defaultKernel = null;\r\n    this.kernelName = null;\r\n    this._kernelSelectionChanged = new Signal<this, string>(this);\r\n\r\n    this.title.icon = this.getIcon();\r\n\r\n    // Add toolbar widgets\r\n    const saveButton = new ToolbarButton({\r\n      icon: saveIcon,\r\n      onClick: this.saveFile,\r\n      tooltip: 'Save file contents'\r\n    });\r\n\r\n    const runButton = new ToolbarButton({\r\n      className: RUN_BUTTON_CLASS,\r\n      icon: runIcon,\r\n      onClick: this.runScript,\r\n      tooltip: 'Run',\r\n      enabled: !this.runDisabled\r\n    });\r\n\r\n    const interruptButton = new ToolbarButton({\r\n      icon: stopIcon,\r\n      onClick: this.interruptRun,\r\n      tooltip: 'Interrupt the kernel'\r\n    });\r\n\r\n    // Populate toolbar with button widgets\r\n    const toolbar = this.toolbar;\r\n    toolbar.addItem('save', saveButton);\r\n    toolbar.addItem('run', runButton);\r\n    toolbar.addItem('interrupt', interruptButton);\r\n\r\n    this.toolbar.addClass(TOOLBAR_CLASS);\r\n\r\n    this.runButton = runButton;\r\n\r\n    // Create output area widget\r\n    this.createOutputAreaWidget();\r\n\r\n    this.context.ready.then(() => this.initializeKernelSpecs());\r\n  }\r\n\r\n  public get kernelSelectionChanged(): ISignal<this, string> {\r\n    return this._kernelSelectionChanged;\r\n  }\r\n\r\n  public get kernelSelection(): string {\r\n    return this.kernelName ?? this.defaultKernel ?? '';\r\n  }\r\n\r\n  public debuggerAvailable = async (kernelName: string): Promise<boolean> =>\r\n    await this.controller.debuggerAvailable(kernelName);\r\n\r\n  /**\r\n   * Function: Fetches kernel specs filtered by editor language\r\n   * and populates toolbar kernel selector.\r\n   */\r\n  protected initializeKernelSpecs = async (): Promise<void> => {\r\n    const language = this.getLanguage();\r\n    const kernelSpecs =\r\n      await this.controller.getKernelSpecsByLanguage(language);\r\n    this.defaultKernel = await this.controller.getDefaultKernel(language);\r\n    this.kernelName = this.defaultKernel;\r\n    this.kernelSelectorRef = React.createRef<ISelect>();\r\n\r\n    if (kernelSpecs !== null) {\r\n      this.toolbar.insertItem(\r\n        4,\r\n        'select',\r\n        new KernelDropdown(\r\n          kernelSpecs,\r\n          this.defaultKernel,\r\n          this.kernelSelectorRef,\r\n          this.handleKernelSelectionUpdate\r\n        )\r\n      );\r\n    }\r\n    this._kernelSelectionChanged.emit(this.kernelSelection);\r\n  };\r\n\r\n  private handleKernelSelectionUpdate = async (\r\n    selectedKernel: string\r\n  ): Promise<void> => {\r\n    if (selectedKernel === this.kernelName) {\r\n      return;\r\n    }\r\n    this.kernelName = selectedKernel;\r\n    this._kernelSelectionChanged.emit(selectedKernel);\r\n  };\r\n\r\n  /**\r\n   * Function: Creates an OutputArea widget wrapped in a DockPanel.\r\n   */\r\n  private createOutputAreaWidget = (): void => {\r\n    // Add dockpanel wrapper for output area\r\n    this.dockPanel = new DockPanelSvg({ tabsMovable: false });\r\n    Widget.attach(this.dockPanel, document.body);\r\n    window.addEventListener('resize', () => {\r\n      this.dockPanel?.fit();\r\n    });\r\n\r\n    // Create output area widget\r\n    const model: OutputAreaModel = new OutputAreaModel();\r\n    const renderMimeRegistry = new RenderMimeRegistry({ initialFactories });\r\n    this.outputAreaWidget = new OutputArea({\r\n      rendermime: renderMimeRegistry,\r\n      model\r\n    });\r\n    this.outputAreaWidget.addClass(OUTPUT_AREA_CLASS);\r\n\r\n    const layout = this.layout as BoxLayout;\r\n    // TODO: Investigate SplitLayout instead of BoxLayout, for layout resizing functionality\r\n    // const layout = this.layout as SplitLayout;\r\n    layout.addWidget(this.dockPanel);\r\n  };\r\n\r\n  /**\r\n   * Function: Clears existing output area and runs script\r\n   * code from file editor in the selected kernel context.\r\n   */\r\n  private runScript = async (): Promise<void> => {\r\n    if (!this.runDisabled) {\r\n      this.clearOutputArea();\r\n      this.displayOutputArea();\r\n      await this.runner.runScript(\r\n        this.kernelName,\r\n        this.context.path,\r\n        this.model.sharedModel.getSource(),\r\n        this.handleKernelMsg\r\n      );\r\n    }\r\n  };\r\n\r\n  private interruptRun = async (): Promise<void> => {\r\n    await this.runner.interruptKernel();\r\n    if (!this.dockPanel?.isEmpty) {\r\n      this.updatePromptText(' ');\r\n    }\r\n  };\r\n\r\n  private disableRunButton = (disabled: boolean): void => {\r\n    this.runButton.enabled = !disabled;\r\n    this.runDisabled = disabled;\r\n  };\r\n\r\n  /**\r\n   * Function: Clears existing output area.\r\n   */\r\n  private clearOutputArea = (): void => {\r\n    // TODO: hide this.layout(), or set its height to 0\r\n    this.dockPanel?.hide();\r\n    this.outputAreaWidget?.model.clear();\r\n    this.outputAreaWidget?.removeClass(OUTPUT_AREA_ERROR_CLASS); // if no error class is found, command is ignored\r\n  };\r\n\r\n  /**\r\n   * Function: Call back function passed to runner, that handles messages coming from the kernel.\r\n   */\r\n  private handleKernelMsg = (msg: IMessageOutput): void => {\r\n    let output = '';\r\n\r\n    if (msg.status) {\r\n      this.displayKernelStatus(msg.status);\r\n      return;\r\n    } else if (msg.error) {\r\n      output = 'Error : ' + msg.error.type + ' - ' + msg.error.output;\r\n      this.displayOutput(output);\r\n      this.getOutputAreaChildWidget().addClass(OUTPUT_AREA_ERROR_CLASS);\r\n      return;\r\n    } else if (msg.output) {\r\n      output = msg.output;\r\n    }\r\n    this.displayOutput(output);\r\n  };\r\n\r\n  private createScrollButtons = (\r\n    scrollingWidget: ScrollingWidget<OutputArea>\r\n  ): void => {\r\n    const scrollUpButton = document.createElement('button');\r\n    const scrollDownButton = document.createElement('button');\r\n    scrollUpButton.className = 'elyra-ScriptEditor-scrollTop';\r\n    scrollDownButton.className = 'elyra-ScriptEditor-scrollBottom';\r\n    scrollUpButton.onclick = function (): void {\r\n      scrollingWidget.node.scrollTop = 0;\r\n    };\r\n    scrollDownButton.onclick = function (): void {\r\n      scrollingWidget.node.scrollTop = scrollingWidget.node.scrollHeight;\r\n    };\r\n    caretUpEmptyThinIcon.element({\r\n      container: scrollUpButton,\r\n      elementPosition: 'center',\r\n      title: 'Top'\r\n    });\r\n    caretDownEmptyThinIcon.element({\r\n      container: scrollDownButton,\r\n      elementPosition: 'center',\r\n      title: 'Bottom'\r\n    });\r\n    this.dockPanel?.node.appendChild(scrollUpButton);\r\n    this.dockPanel?.node.appendChild(scrollDownButton);\r\n  };\r\n\r\n  /**\r\n   * Function: Displays output area widget.\r\n   */\r\n  private displayOutputArea = (): void => {\r\n    if (\r\n      this.outputAreaWidget === undefined ||\r\n      !this.kernelSelectorRef?.current?.getSelection()\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.dockPanel?.show();\r\n\r\n    // TODO: Set layout height to be flexible\r\n    if (this.dockPanel !== undefined) {\r\n      BoxLayout.setStretch(this.dockPanel, 1);\r\n    }\r\n\r\n    if (this.dockPanel?.isEmpty) {\r\n      // Add a tab to dockPanel\r\n      this.scrollingWidget = new ScrollingWidget({\r\n        content: this.outputAreaWidget\r\n      });\r\n      this.createScrollButtons(this.scrollingWidget);\r\n      this.dockPanel?.addWidget(this.scrollingWidget, { mode: 'split-bottom' });\r\n\r\n      const outputTab = this.dockPanel?.tabBars().next().value;\r\n      if (outputTab !== undefined) {\r\n        outputTab.id = 'tab-ScriptEditor-output';\r\n        if (outputTab.currentTitle !== null) {\r\n          outputTab.currentTitle.label = 'Console Output';\r\n          outputTab.currentTitle.closable = true;\r\n        }\r\n        outputTab.disposed.connect(() => {\r\n          this.interruptRun();\r\n          this.clearOutputArea();\r\n        }, this);\r\n      }\r\n    }\r\n\r\n    const options = {\r\n      name: 'stdout',\r\n      output_type: 'stream',\r\n      text: ['Waiting for kernel to start...']\r\n    };\r\n    this.outputAreaWidget.model.add(options);\r\n    this.updatePromptText(' ');\r\n    this.setOutputAreaClasses();\r\n  };\r\n\r\n  /**\r\n   * Function: Displays kernel status, similar to notebook.\r\n   */\r\n  private displayKernelStatus = (status: string): void => {\r\n    if (status === 'busy') {\r\n      // TODO: Use a character that does not take any space, also not an empty string\r\n      this.emptyOutput = true;\r\n      this.displayOutput(' ');\r\n      this.updatePromptText('*');\r\n    } else if (status === 'idle') {\r\n      this.updatePromptText(' ');\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function: Displays code in OutputArea widget.\r\n   */\r\n  private displayOutput = (output: string): void => {\r\n    if (output) {\r\n      const options = {\r\n        name: 'stdout',\r\n        output_type: 'stream',\r\n        text: [output]\r\n      };\r\n      // Stream output doesn't instantiate correctly without an initial output string\r\n      if (this.emptyOutput) {\r\n        // Clears the \"Waiting for kernel\" message immediately\r\n        this.outputAreaWidget?.model.clear(false);\r\n        this.outputAreaWidget?.model.add(options);\r\n        this.emptyOutput = false;\r\n        // Clear will wait until the first output from the kernel to clear the initial string\r\n        this.outputAreaWidget?.model.clear(true);\r\n      } else {\r\n        this.outputAreaWidget?.model.add(options);\r\n      }\r\n      this.updatePromptText('*');\r\n      this.setOutputAreaClasses();\r\n    }\r\n  };\r\n\r\n  private setOutputAreaClasses = (): void => {\r\n    this.getOutputAreaChildWidget().addClass(OUTPUT_AREA_CHILD_CLASS);\r\n    this.getOutputAreaOutputWidget().addClass(OUTPUT_AREA_OUTPUT_CLASS);\r\n    this.getOutputAreaPromptWidget().addClass(OUTPUT_AREA_PROMPT_CLASS);\r\n  };\r\n\r\n  /**\r\n   * Function: Gets OutputArea child widget, where output and kernel status are displayed.\r\n   */\r\n  private getOutputAreaChildWidget = (): Widget => {\r\n    const outputAreaChildLayout = this.outputAreaWidget?.layout as PanelLayout;\r\n    return outputAreaChildLayout.widgets[0];\r\n  };\r\n\r\n  /**\r\n   * Function: Gets OutputArea prompt widget, where kernel status is displayed.\r\n   */\r\n  private getOutputAreaOutputWidget = (): Widget => {\r\n    const outputAreaChildLayout = this.getOutputAreaChildWidget()\r\n      .layout as PanelLayout;\r\n    return outputAreaChildLayout.widgets[1];\r\n  };\r\n\r\n  /**\r\n   * Function: Gets OutputArea prompt widget, where kernel status is displayed.\r\n   */\r\n  private getOutputAreaPromptWidget = (): OutputPrompt => {\r\n    const outputAreaChildLayout = this.getOutputAreaChildWidget()\r\n      .layout as PanelLayout;\r\n    return outputAreaChildLayout.widgets[0] as OutputPrompt;\r\n  };\r\n\r\n  /**\r\n   * Function: Updates OutputArea prompt widget to display kernel status.\r\n   */\r\n  private updatePromptText = (kernelStatusFlag: string): void => {\r\n    this.getOutputAreaPromptWidget().node.innerText =\r\n      '[' + kernelStatusFlag + ']:';\r\n  };\r\n\r\n  /**\r\n   * Function: Saves file editor content.\r\n   */\r\n  private saveFile = async (): Promise<void> => {\r\n    if (this.context.model.readOnly) {\r\n      await showDialog({\r\n        title: 'Cannot Save',\r\n        body: 'Document is read-only',\r\n        buttons: [Dialog.okButton()]\r\n      });\r\n      return;\r\n    }\r\n    this.context.save().then(async () => {\r\n      if (!this.isDisposed) {\r\n        await this.context.createCheckpoint();\r\n      }\r\n    });\r\n  };\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { KernelSpec, KernelSpecManager } from '@jupyterlab/services';\r\n\r\nexport class ScriptEditorController {\r\n  kernelSpecManager: KernelSpecManager;\r\n\r\n  constructor() {\r\n    this.kernelSpecManager = new KernelSpecManager();\r\n  }\r\n\r\n  /**\r\n   * Get available kernel specs.\r\n   */\r\n  getKernelSpecs = async (): Promise<KernelSpec.ISpecModels | null> => {\r\n    await this.kernelSpecManager.ready;\r\n    const specs = this.kernelSpecManager.specs;\r\n\r\n    // return a deep copy of the object preserving the original type\r\n    return JSON.parse(JSON.stringify(specs)) as typeof specs;\r\n  };\r\n\r\n  /**\r\n   * Get available kernel specs by language.\r\n   */\r\n  getKernelSpecsByLanguage = async (\r\n    language: string\r\n  ): Promise<KernelSpec.ISpecModels | null> => {\r\n    const specs = await this.getKernelSpecs();\r\n    Object.entries(specs?.kernelspecs ?? [])\r\n      .filter((entry) => entry[1]?.language.includes(language) === false)\r\n      .forEach((entry) => delete specs?.kernelspecs[entry[0]]);\r\n\r\n    return specs;\r\n  };\r\n\r\n  /**\r\n   * Get kernel specs by name.\r\n   */\r\n  getKernelSpecsByName = async (\r\n    kernelName: string\r\n  ): Promise<KernelSpec.ISpecModels | null> => {\r\n    const specs = await this.getKernelSpecs();\r\n    Object.entries(specs?.kernelspecs ?? [])\r\n      .filter((entry) => entry[1]?.name?.includes(kernelName) === false)\r\n      .forEach((entry) => delete specs?.kernelspecs[entry[0]]);\r\n\r\n    return specs;\r\n  };\r\n\r\n  /**\r\n   * Get the default kernel name from a given language\r\n   * or the name of the first kernel from the list of kernelspecs.\r\n   */\r\n  getDefaultKernel = async (language: string): Promise<string> => {\r\n    const kernelSpecs: KernelSpec.ISpecModels | null =\r\n      await this.getKernelSpecs();\r\n    if (!kernelSpecs) {\r\n      return '';\r\n    }\r\n\r\n    if (kernelSpecs.default?.includes(language)) {\r\n      return kernelSpecs.default;\r\n    }\r\n\r\n    return this.getFirstKernelName(language);\r\n  };\r\n\r\n  getFirstKernelName = async (language: string): Promise<string> => {\r\n    const specsByLang = await this.getKernelSpecsByLanguage(language);\r\n\r\n    const empty = '';\r\n    if (specsByLang && Object.keys(specsByLang.kernelspecs).length !== 0) {\r\n      const [key, value] = Object.entries(specsByLang.kernelspecs)[0];\r\n      return value?.name ?? key;\r\n    }\r\n    return empty;\r\n  };\r\n\r\n  /**\r\n   * Return value of debugger boolean property from the kernel spec of a given name.\r\n   */\r\n  debuggerAvailable = async (kernelName: string | ''): Promise<boolean> => {\r\n    const specs = await this.getKernelSpecsByName(kernelName);\r\n    return !!(specs?.kernelspecs[kernelName]?.metadata?.['debugger'] ?? false);\r\n  };\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { CodeEditor, IEditorServices } from '@jupyterlab/codeeditor';\r\nimport {\r\n  ABCWidgetFactory,\r\n  DocumentRegistry,\r\n  DocumentWidget\r\n} from '@jupyterlab/docregistry';\r\nimport { FileEditor } from '@jupyterlab/fileeditor';\r\n\r\nimport { ScriptEditor } from './ScriptEditor';\r\n\r\n/**\r\n * A widget factory for script editors.\r\n */\r\nexport class ScriptEditorWidgetFactory extends ABCWidgetFactory<\r\n  ScriptEditor,\r\n  DocumentRegistry.ICodeModel\r\n> {\r\n  private options: ScriptEditorWidgetFactory.IOptions;\r\n  /**\r\n   * Construct a new editor widget factory.\r\n   */\r\n  constructor(options: ScriptEditorWidgetFactory.IOptions) {\r\n    super(options.factoryOptions);\r\n    this._services = options.editorServices;\r\n    this.options = options;\r\n  }\r\n\r\n  /**\r\n   * Create a new widget given a context.\r\n   */\r\n  protected createNewWidget(\r\n    context: DocumentRegistry.CodeContext\r\n  ): ScriptEditor {\r\n    const newDocumentEditor = this._services.factoryService.newDocumentEditor;\r\n    const factory: CodeEditor.Factory = (options) => {\r\n      return newDocumentEditor(options);\r\n    };\r\n    const content = new FileEditor({\r\n      factory,\r\n      context,\r\n      mimeTypeService: this._services.mimeTypeService\r\n    });\r\n\r\n    return this.options.instanceCreator({ content, context });\r\n  }\r\n\r\n  private _services: IEditorServices;\r\n}\r\n\r\n/**\r\n * The namespace for `ScriptEditorWidgetFactory` class statics.\r\n */\r\nexport namespace ScriptEditorWidgetFactory {\r\n  /**\r\n   * The options used to create an editor widget factory.\r\n   */\r\n  export interface IOptions {\r\n    /**\r\n     * The editor services used by the factory.\r\n     */\r\n    editorServices: IEditorServices;\r\n\r\n    /**\r\n     * The factory options associated with the factory.\r\n     */\r\n    factoryOptions: DocumentRegistry.IWidgetFactoryOptions<ScriptEditor>;\r\n\r\n    /**\r\n     * The function that creates ScriptEditor instances.\r\n     */\r\n    instanceCreator: (\r\n      options: DocumentWidget.IOptions<FileEditor, DocumentRegistry.ICodeModel>\r\n    ) => ScriptEditor;\r\n  }\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { Dialog, showDialog } from '@jupyterlab/apputils';\r\nimport {\r\n  KernelAPI,\r\n  KernelManager,\r\n  KernelSpecManager,\r\n  Session,\r\n  SessionManager\r\n} from '@jupyterlab/services';\r\nimport {\r\n  IDisplayDataMsg,\r\n  IErrorMsg,\r\n  IExecuteResultMsg,\r\n  IIOPubMessage,\r\n  IStatusMsg,\r\n  IStreamMsg\r\n} from '@jupyterlab/services/lib/kernel/messages';\r\n\r\nconst KERNEL_ERROR_MSG =\r\n  'Could not run script because no supporting kernel is defined.';\r\nconst SESSION_ERROR_MSG = 'Could not start session to execute script.';\r\n\r\nexport interface IMessageOutput {\r\n  output?: string;\r\n  status?: string;\r\n  error?: {\r\n    type: string;\r\n    output: string;\r\n  };\r\n}\r\n\r\n/**\r\n * Utility class to enable running scripts in the context of a Kernel environment\r\n */\r\nexport class ScriptRunner {\r\n  sessionManager: SessionManager;\r\n  sessionConnection: Session.ISessionConnection | null;\r\n  kernelSpecManager: KernelSpecManager;\r\n  kernelManager: KernelManager;\r\n  disableButton: (disabled: boolean) => void;\r\n\r\n  /**\r\n   * Construct a new runner.\r\n   */\r\n  constructor(disableButton: (disabled: boolean) => void) {\r\n    this.disableButton = disableButton;\r\n\r\n    this.kernelSpecManager = new KernelSpecManager();\r\n    this.kernelManager = new KernelManager();\r\n    this.sessionManager = new SessionManager({\r\n      kernelManager: this.kernelManager\r\n    });\r\n    this.sessionConnection = null;\r\n  }\r\n\r\n  private errorDialog = (errorMsg: string): Promise<Dialog.IResult<string>> => {\r\n    this.disableButton(false);\r\n    return showDialog({\r\n      title: 'Error',\r\n      body: errorMsg,\r\n      buttons: [Dialog.okButton()]\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Function: Starts a session with a proper kernel and executes code from file editor.\r\n   */\r\n  runScript = async (\r\n    kernelName: string | null,\r\n    contextPath: string,\r\n    code: string,\r\n    handleKernelMsg: (msgOutput: IMessageOutput) => void\r\n  ): Promise<void> => {\r\n    this.disableButton(true);\r\n\r\n    if (!kernelName) {\r\n      await this.errorDialog(KERNEL_ERROR_MSG);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await this.startSession(kernelName, contextPath);\r\n    } catch (e) {\r\n      await this.errorDialog(SESSION_ERROR_MSG);\r\n      return;\r\n    }\r\n\r\n    if (!this.sessionConnection?.kernel) {\r\n      // session didn't get started\r\n      await this.errorDialog(SESSION_ERROR_MSG);\r\n      return;\r\n    }\r\n\r\n    const future = this.sessionConnection.kernel.requestExecute({ code });\r\n\r\n    future.onIOPub = (msg: IIOPubMessage): void => {\r\n      const msgType = msg.header.msg_type;\r\n      const msgOutput: IMessageOutput = {};\r\n\r\n      if (msgType === 'error') {\r\n        const errorMsg = msg as IErrorMsg;\r\n        msgOutput.error = {\r\n          type: errorMsg.content.ename,\r\n          output: errorMsg.content.evalue\r\n        };\r\n      } else if (msgType === 'execute_result' || msgType === 'display_data') {\r\n        const resultMsg = msg as IExecuteResultMsg | IDisplayDataMsg;\r\n        if ('text/plain' in resultMsg.content.data) {\r\n          msgOutput.output = resultMsg.content.data['text/plain'] as string;\r\n        } else {\r\n          console.log('Ignoring received message ' + JSON.stringify(msg));\r\n        }\r\n      } else if (msgType === 'stream') {\r\n        const streamMsg = msg as IStreamMsg;\r\n        msgOutput.output = streamMsg.content.text;\r\n      } else if (msgType === 'status') {\r\n        const statusMsg = msg as IStatusMsg;\r\n        msgOutput.status = statusMsg.content.execution_state;\r\n      } else {\r\n        // ignore other message types\r\n      }\r\n\r\n      // Notify UI\r\n      handleKernelMsg(msgOutput);\r\n    };\r\n\r\n    try {\r\n      await future.done;\r\n      // TO DO: Keep session open but shut down kernel\r\n      // this.interruptKernel(); // debugger is not triggered after this\r\n      // this.shutdownKernel(); // also shuts down session for some reason\r\n      this.disableButton(false);\r\n    } catch (e) {\r\n      console.log('Exception: done = ' + JSON.stringify(e));\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function: Starts new kernel session.\r\n   */\r\n  startSession = async (\r\n    kernelName: string,\r\n    contextPath: string\r\n  ): Promise<void> => {\r\n    const options: Session.ISessionOptions = {\r\n      kernel: {\r\n        name: kernelName\r\n      },\r\n      path: contextPath,\r\n      type: 'file',\r\n      name: contextPath\r\n    };\r\n\r\n    if (!this.sessionConnection || !this.sessionConnection.kernel) {\r\n      try {\r\n        this.sessionConnection = await this.sessionManager.startNew(options);\r\n        this.sessionConnection.setPath(contextPath);\r\n      } catch (e) {\r\n        console.log('Exception: kernel start = ' + JSON.stringify(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function: Shuts down kernel session.\r\n   */\r\n  shutdownSession = async (): Promise<void> => {\r\n    if (this.sessionConnection) {\r\n      const name = this.sessionConnection.kernel?.name;\r\n\r\n      try {\r\n        await this.sessionConnection.shutdown();\r\n        this.sessionConnection = null;\r\n        console.log(name + ' kernel shut down');\r\n      } catch (e) {\r\n        console.log('Exception: session shutdown = ' + JSON.stringify(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function: Shuts down kernel.\r\n   */\r\n  shutdownKernel = async (): Promise<void> => {\r\n    if (this.sessionConnection) {\r\n      const kernel = this.sessionConnection.kernel;\r\n      try {\r\n        kernel && (await KernelAPI.shutdownKernel(kernel.id));\r\n        console.log(kernel?.name + ' kernel shutdown');\r\n      } catch (e) {\r\n        console.log('Exception: kernel shutdown = ' + JSON.stringify(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function: Interrupts kernel.\r\n   * TO DO: Interrupting kernel does not notify debugger service. Same behavior debugging notebooks.\r\n   */\r\n  interruptKernel = async (): Promise<void> => {\r\n    if (this.sessionConnection) {\r\n      const kernel = this.sessionConnection.kernel;\r\n      try {\r\n        kernel &&\r\n          (await KernelAPI.interruptKernel(kernel.id, kernel.serverSettings));\r\n        console.log(kernel?.name + ' kernel interrupted.');\r\n        this.disableButton(false);\r\n      } catch (e) {\r\n        console.log('Exception: kernel interrupt = ' + JSON.stringify(e));\r\n      }\r\n    }\r\n  };\r\n}\r\n","/*\r\n * Copyright 2018-2025 Elyra Authors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport * from './KernelDropdown';\r\nexport * from './ScriptEditor';\r\nexport * from './ScriptEditorController';\r\nexport * from './ScriptRunner';\r\nexport * from './ScriptEditorWidgetFactory';\r\n"],"names":[],"sourceRoot":""}