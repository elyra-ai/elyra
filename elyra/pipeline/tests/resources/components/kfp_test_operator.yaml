name: Test Operator
inputs:
- {name: test_string_no_default, description: 'The test command description', type: String}
- {name: test_string_default_value, description: 'The test command description', type: String, default: 'default', optional: true}
- {name: test_string_default_empty, description: 'The test command description', type: String, default: '', optional: true}
- {name: test_bool_default, description: 'The test command description', type: Bool, optional: true}
- {name: test_bool_false, description: 'The test command description', type: Bool, default: 'False', optional: true}
- {name: test_bool_true, description: 'The test command description', type: Bool, default: 'True', optional: true}
- {name: test_int_default, description: 'The test command description', type: Integer, optional: true}
- {name: test_int_zero, description: 'The test command description', type: Integer, default: '0', optional: true}
- {name: test_int_non_zero, description: 'The test command description', type: Integer, default: '1', optional: true}
- {name: test_dict_default, description: 'The test command description', type: Dict, optional: true}
- {name: test_list_default, description: 'The test command description', type: List, optional: true}
- {name: test_required_property, description: 'The test command description', type: String, optional: false}
- {name: test_optional_property, description: 'The test command description', type: String, optional: true}
- {name: test_required_property_default, description: 'The test command description', type: String}
- {name: test_unusual_type_dict, description: 'The test command description', type: Dictionary of arrays, optional: true}
- {name: test_unusual_type_list, description: 'The test command description', type: An array, optional: true}
- {name: test_unusual_type_string, description: 'The test command description', type: A string, optional: true}
- {name: test_unusual_type_file, description: 'The test command description', type: Notebook}
outputs:
- {name: Filtered text}
implementation:
  container:
    image: alpine
    command:
    - sh
    - -ec
    - |
      text_path=$0
      pattern=$1
      filtered_text_path=$2
      mkdir -p "$(dirname "$filtered_text_path")"

      grep "$pattern" < "$text_path" > "$filtered_text_path"
    - {inputPath: test_unusual_type_file}
    - {inputValue: test_string_no_default}
    - {outputPath: Filtered text}
