apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: kfp-one-node-generic-
  annotations: {pipelines.kubeflow.org/kfp_sdk_version: 1.8.13, pipelines.kubeflow.org/pipeline_compilation_time: '2022-11-18T15:59:22.512273',
    pipelines.kubeflow.org/pipeline_spec: '{"description": "A Kubeflow Pipelines pipeline
      that contains one generic node", "name": "kfp-one-node-generic"}'}
  labels: {pipelines.kubeflow.org/kfp_sdk_version: 1.8.13}
spec:
  entrypoint: kfp-one-node-generic
  templates:
  - name: kfp-one-node-generic
    dag:
      tasks:
      - {name: run-a-file, template: run-a-file}
  - name: run-a-file
    container:
      args: ['mkdir -p ./jupyter-work-dir && cd ./jupyter-work-dir && echo ''Downloading
          https://raw.githubusercontent.com/elyra-ai/elyra/main/elyra/kfp/bootstrapper.py''
          && curl --fail -H ''Cache-Control: no-cache'' -L https://raw.githubusercontent.com/elyra-ai/elyra/main/elyra/kfp/bootstrapper.py
          --output bootstrapper.py && echo ''Downloading https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra.txt''
          && curl --fail -H ''Cache-Control: no-cache'' -L https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra.txt
          --output requirements-elyra.txt && echo ''Downloading https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra-py37.txt''
          && curl --fail -H ''Cache-Control: no-cache'' -L https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra-py37.txt
          --output requirements-elyra-py37.txt && python3 -m pip install  packaging
          && python3 -m pip freeze > requirements-current.txt && python3 bootstrapper.py
          --pipeline-name ''kfp-one-node-generic'' --cos-endpoint ''http://examples.com:31671''
          --cos-bucket ''test'' --cos-directory ''kfp-one-node-generic-1118155922''
          --cos-dependencies-archive ''a-notebook-d3cbeeec-0e4f-4032-8318-4500fb9aa352.tar.gz''
          --file ''a-notebook.ipynb'' ']
      command: [sh, -c]
      env:
      - {name: ELYRA_RUNTIME_ENV, value: kfp}
      - {name: AWS_ACCESS_KEY_ID, value: my_name}
      - {name: AWS_SECRET_ACCESS_KEY, value: my_password}
      - name: ELYRA_ENABLE_PIPELINE_INFO
        value: "True"
      - {name: ELYRA_WRITABLE_CONTAINER_DIR, value: /tmp}
      - {name: ELYRA_RUN_NAME, value: '{{workflow.uid}}'}
      image: tensorflow/tensorflow:2.8.0
      imagePullPolicy: IfNotPresent
    outputs:
      artifacts:
      - {name: mlpipeline-metrics, path: /tmp/mlpipeline-metrics.json}
      - {name: mlpipeline-ui-metadata, path: /tmp/mlpipeline-ui-metadata.json}
    metadata:
      annotations: {elyra/node-user-doc: test comment, elyra/node-file-name: a-notebook.ipynb,
        elyra/pipeline-source: kfp-one-node-generic.pipeline, pipelines.kubeflow.org/task_display_name: a-notebook,
        pipelines.kubeflow.org/component_spec: '{"description": "Run a Jupyter notebook
          or Python/R script", "implementation": {"container": {"args": ["mkdir -p
          ./jupyter-work-dir && cd ./jupyter-work-dir && echo ''Downloading https://raw.githubusercontent.com/elyra-ai/elyra/main/elyra/kfp/bootstrapper.py''
          && curl --fail -H ''Cache-Control: no-cache'' -L https://raw.githubusercontent.com/elyra-ai/elyra/main/elyra/kfp/bootstrapper.py
          --output bootstrapper.py && echo ''Downloading https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra.txt''
          && curl --fail -H ''Cache-Control: no-cache'' -L https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra.txt
          --output requirements-elyra.txt && echo ''Downloading https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra-py37.txt''
          && curl --fail -H ''Cache-Control: no-cache'' -L https://raw.githubusercontent.com/elyra-ai/elyra/main/etc/generic/requirements-elyra-py37.txt
          --output requirements-elyra-py37.txt && python3 -m pip install  packaging
          && python3 -m pip freeze > requirements-current.txt && python3 bootstrapper.py
          --pipeline-name ''kfp-one-node-generic'' --cos-endpoint ''http://examples.com:31671''
          --cos-bucket ''test'' --cos-directory ''kfp-one-node-generic-1118155922''
          --cos-dependencies-archive ''a-notebook-d3cbeeec-0e4f-4032-8318-4500fb9aa352.tar.gz''
          --file ''a-notebook.ipynb'' "], "command": ["sh", "-c"], "image": "tensorflow/tensorflow:2.8.0"}},
          "name": "Run a file"}', pipelines.kubeflow.org/component_ref: '{"digest":
          "5c266fdcdb02f899404136361b1e149bb435a66e16608154bc867db9281c12ed"}'}
      labels:
        elyra/node-type: notebook-script
        elyra/pipeline-name: kfp-one-node-generic
        elyra/pipeline-version: kfp-one-node-generic-test-0
        elyra/experiment-name: kfp-one-node-generic-test-0
        elyra/node-name: a-notebook
        pipelines.kubeflow.org/kfp_sdk_version: 1.8.13
        pipelines.kubeflow.org/pipeline-sdk-type: kfp
        pipelines.kubeflow.org/enable_caching: "true"
  arguments:
    parameters: []
  serviceAccountName: pipeline-runner
